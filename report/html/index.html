<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Copy/Paste Detector Report</title>
    <link href="styles/tailwind.css" rel="stylesheet" />
    <link href="styles/prism.css" rel="stylesheet" />
  </head>
  <body class="bg-gray-100">
    <header class="bg-white py-4 shadow">
      <div class="container mx-auto px-4">
        <h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1>
      </div>
    </header>
    <main class="container mx-auto my-8 rounded bg-white p-4 shadow">
      <section class="mb-8" id="dashboard">
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">Dashboard</h2>
        <div class="grid grid-cols-4 gap-4">
          <div class="rounded bg-blue-200 p-4 text-center">
            <h3 class="mb-2 text-lg font-semibold text-blue-800">Total Files</h3>
            <span class="text-4xl font-bold text-blue-800">1066</span>
          </div>
          <div class="rounded bg-green-200 p-4 text-center">
            <h3 class="mb-2 text-lg font-semibold text-green-800">Total Lines of Code</h3>
            <span class="text-4xl font-bold text-green-800">256281</span>
          </div>
          <div class="rounded bg-yellow-200 p-4 text-center">
            <h3 class="mb-2 text-lg font-semibold text-yellow-800">Number of Clones</h3>
            <span class="text-4xl font-bold text-yellow-800">442</span>
          </div>
          <div class="rounded bg-red-200 p-4 text-center">
            <h3 class="mb-2 text-lg font-semibold text-red-800">Duplicated Lines</h3>
            <span class="text-4xl font-bold text-red-800">7649 (2.98%)</span>
          </div>
        </div>
      </section>
      <section class="mb-8" id="formats">
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">Formats with Duplications</h2>
        <table class="w-full table-auto">
          <thead>
            <tr class="bg-gray-200 text-sm leading-normal text-gray-600 uppercase">
              <th class="px-6 py-3 text-left">Format</th>
              <th class="px-6 py-3 text-left">Files</th>
              <th class="px-6 py-3 text-left">Lines</th>
              <th class="px-6 py-3 text-left">Clones</th>
              <th class="px-6 py-3 text-left">Duplicated Lines</th>
              <th class="px-6 py-3 text-left">Duplicated Tokens</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200 bg-white text-sm text-gray-800">
              <td class="px-6 py-3">
                <a class="text-blue-600 hover:underline" href="#javascript-clones">javascript</a>
              </td>
              <td class="px-6 py-3">316</td>
              <td class="px-6 py-3">34309</td>
              <td class="px-6 py-3">30</td>
              <td class="px-6 py-3">1075</td>
              <td class="px-6 py-3">8774</td>
            </tr>
            <tr class="border-b border-gray-200 bg-white text-sm text-gray-800">
              <td class="px-6 py-3">
                <a class="text-blue-600 hover:underline" href="#tsx-clones">tsx</a>
              </td>
              <td class="px-6 py-3">365</td>
              <td class="px-6 py-3">114119</td>
              <td class="px-6 py-3">255</td>
              <td class="px-6 py-3">4290</td>
              <td class="px-6 py-3">37486</td>
            </tr>
            <tr class="border-b border-gray-200 bg-white text-sm text-gray-800">
              <td class="px-6 py-3">
                <a class="text-blue-600 hover:underline" href="#typescript-clones">typescript</a>
              </td>
              <td class="px-6 py-3">367</td>
              <td class="px-6 py-3">104512</td>
              <td class="px-6 py-3">154</td>
              <td class="px-6 py-3">2210</td>
              <td class="px-6 py-3">18839</td>
            </tr>
            <tr class="border-b border-gray-200 bg-white text-sm text-gray-800">
              <td class="px-6 py-3">
                <a class="text-blue-600 hover:underline" href="#css-clones">css</a>
              </td>
              <td class="px-6 py-3">18</td>
              <td class="px-6 py-3">3341</td>
              <td class="px-6 py-3">3</td>
              <td class="px-6 py-3">74</td>
              <td class="px-6 py-3">235</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section class="mb-8" id="txt-clones">
        <a name="javascript-clones"></a>
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">javascript</h2>
        <div class="divide-y divide-gray-200 border-b-2">
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/Spitflare.tsx (Line 41:10 - Line 99:64),
              src/components/ships/player/variants/warships/StarSchooner.tsx (Line 43:10 - Line
              101:70)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn2"
              onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn2"
              onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup2"
            ><code class="language-javascript text-sm text-gray-800">={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Machine Guns&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-cyan-500/30 bg-cyan-500/20 hover:bg-cyan-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/Spitflare.tsx (Line 99:64 - Line
              130:52), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 101:70 -
              Line 132:58)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn3"
              onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn3"
              onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup3"
            ><code class="language-javascript text-sm text-gray-800">
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-cyan-500/20 text-cyan-200 hover:bg-cyan-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 50:10 - Line
              108:70), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 43:10 -
              Line 101:70)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn12"
              onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn12"
              onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup12"
            ><code class="language-javascript text-sm text-gray-800">={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Weapon Systems&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-violet-500/30 bg-violet-500/20 hover:bg-violet-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 141:11 - Line
              162:58), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 114:19 -
              Line 132:58)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn13"
              onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn13"
              onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup13"
            ><code class="language-javascript text-sm text-gray-800">}`}
        &gt;
          &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
            &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{specialAbility.name}&lt;/span&gt;
            {specialAbility.active ? (
              &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
            ) : (
              &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{specialAbility.cooldown}s&lt;/span&gt;
            )}
          &lt;/div&gt;
          &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{specialAbility.description}&lt;/p&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-violet-500/20 text-violet-200 hover:bg-violet-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 63:10 -
              Line 121:4), src/components/ships/player/variants/warships/StarSchooner.tsx (Line
              43:10 - Line 96:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn18"
              onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn18"
              onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup18"
            ><code class="language-javascript text-sm text-gray-800">={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Docking Status */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;div className=&quot;mb-3 flex items-center justify-between&quot;&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Docking Bays&lt;/h4&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
            {occupiedBays}/{dockingBays.length} Occupied
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-2&quot;&gt;
          {dockingBays.map(bay =&gt; (
            &lt;button
              key={bay</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 200:15 -
              Line 223:52), src/components/ships/player/variants/warships/StarSchooner.tsx (Line
              114:19 - Line 132:58)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn19"
              onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn19"
              onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup19"
            ><code class="language-javascript text-sm text-gray-800">}`}
            &gt;
              &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                {ability.active ? (
                  &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
                ) : (
                  &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{ability.cooldown}s&lt;/span&gt;
                )}
              &lt;/div&gt;
              &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{ability.description}&lt;/p&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-rose-500/20 text-rose-200 hover:bg-rose-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 71:10 - Line
              153:17), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 43:10 -
              Line 96:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn24"
              onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn24"
              onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup24"
            ><code class="language-javascript text-sm text-gray-800">={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
          {/* Repair Rate Indicator */}
          {repairRate &gt; 0 &amp;&amp; (
            &lt;div className=&quot;mt-1 flex items-center text-xs text-emerald-400&quot;&gt;
              &lt;Zap className=&quot;mr-1 h-3 w-3&quot; /&gt;
              Repairing: +{repairRate}/s
            &lt;/div&gt;
          )}
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Fighter Status */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;div className=&quot;mb-3 flex items-center justify-between&quot;&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Fighter Squadron&lt;/h4&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
            {fighters.length}/{maxFighters} Total
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-3 grid grid-cols-4 gap-2&quot;&gt;
          &lt;div className=&quot;rounded-lg bg-gray-700/50 p-2&quot;&gt;
            &lt;div className=&quot;text-xs text-gray-300&quot;&gt;Deployed&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-fuchsia-400&quot;&gt;{deployedFighters}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;rounded-lg bg-gray-700/50 p-2&quot;&gt;
            &lt;div className=&quot;text-xs text-gray-300&quot;&gt;Docked&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-fuchsia-400&quot;&gt;{dockedFighters}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;rounded-lg bg-gray-700/50 p-2&quot;&gt;
            &lt;div className=&quot;text-xs text-gray-300&quot;&gt;Returning&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-fuchsia-400&quot;&gt;{returningFighters}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div className=&quot;rounded-lg bg-gray-700/50 p-2&quot;&gt;
            &lt;div className=&quot;text-xs text-gray-300&quot;&gt;Lost&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-red-400&quot;&gt;{lostFighters}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          &lt;button
            onClick={onDeployFighters</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 188:73 - Line
              223:49), src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line
              163:64 - Line 198:43)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn25"
              onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn25"
              onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup25"
            ><code class="language-javascript text-sm text-gray-800">
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Special Abilities */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Special Abilities&lt;/h4&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {specialAbilities.map(ability =&gt; (
            &lt;button
              key={ability.name}
              onClick={() =&gt; onActivateAbility(ability.name)}
              disabled={ability.active}
              className={`w-full rounded-lg p-3 text-left transition-colors ${
                ability.active
                  ? 'border border-fuchsia-500/30 bg-fuchsia-500/20'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 223:49 - Line
              248:61), src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line
              198:43 - Line 132:58)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn26"
              onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn26"
              onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup26"
            ><code class="language-javascript text-sm text-gray-800">
                  : 'bg-gray-700/50 hover:bg-gray-600/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                {ability.active ? (
                  &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
                ) : (
                  &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{ability.cooldown}s&lt;/span&gt;
                )}
              &lt;/div&gt;
              &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{ability.description}&lt;/p&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-fuchsia-500/20 text-fuchsia-200 hover:bg-fuchsia-500/30'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line 96:5 - Line
              142:2), src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line
              152:17 - Line 191:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn33"
              onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn33"
              onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup33"
            ><code class="language-javascript text-sm text-gray-800">} className=&quot;rounded-lg bg-gray-700/50 p-3&quot;&gt;
              &lt;div className=&quot;mb-2 text-sm capitalize text-gray-400&quot;&gt;{stat}&lt;/div&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-white&quot;&gt;{values.current}&lt;/div&gt;
                &lt;div className=&quot;flex items-center text-sm&quot;&gt;
                  &lt;ArrowRight className=&quot;mx-2 h-4 w-4 text-indigo-400&quot; /&gt;
                  &lt;span className=&quot;text-indigo-400&quot;&gt;
                    {values.upgraded} ({getStatDifference(values.current, values.upgraded)})
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Resource Costs */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Resource Requirements&lt;/h4&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {ship.resourceCost.map((resource, index) =&gt; (
            &lt;div
              key={index}
              className=&quot;flex items-center justify-between rounded-lg bg-gray-700/50 p-3&quot;
            &gt;
              &lt;span className=&quot;text-sm text-gray-300&quot;&gt;{resource.type}&lt;/span&gt;
              &lt;div
                className={`text-sm ${
                  resource.available &gt;= resource.amount ? 'text-green-400' : 'text-red-400'
                }`}
              &gt;
                {resource.available} / {resource.amount}
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Upgrade Button */}
      &lt;button
        onClick={onUpgrade}
        disabled={!canUpgrade}
        className={`flex w-full items-center justify-center space-x-2 rounded-lg px-4 py-3 ${
          canUpgrade
            ? 'bg-indigo-600 text-white hover:bg-indigo-700'
            : 'cursor-not-allowed bg-gray-700 text-gray-500'
        }`}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/EclipseScythe.tsx (Line 79:3 - Line 96:20),
              src/components/ships/FactionShips/lostNova/NullHunter.tsx (Line 81:3 - Line 98:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn51"
              onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn51"
              onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup51"
            ><code class="language-javascript text-sm text-gray-800">={id}
        name=&quot;Eclipse Scythe&quot;
        type=&quot;eclipseScythe&quot;
        status={mapStatus(status)}
        health={health}
        maxHealth={maxHealth}
        shield={shield}
        maxShield={maxShield}
        weapons={weapons}
        stats={stats}
        position={position}
        rotation={rotation}
        tactics={tactics}
        onEngage={onEngage}
        onRetreat={onRetreat}
        onFire={onFire}
        onSpecialAbility={() =&gt; {
          setShadowVeilActive</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/EtherealGalleon.tsx (Line 67:3 - Line
              83:23), src/components/ships/FactionShips/equatorHorizon/StellarEquinox.tsx (Line 67:3
              - Line 83:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn59"
              onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn59"
              onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup59"
            ><code class="language-javascript text-sm text-gray-800">={id}
        name=&quot;Ethereal Galleon&quot;
        type=&quot;etherealGalleon&quot;
        status={mapStatus(status)}
        health={health}
        maxHealth={maxHealth}
        shield={shield}
        maxShield={maxShield}
        weapons={weapons}
        stats={stats}
        position={position}
        rotation={rotation}
        onEngage={onEngage}
        onRetreat={onRetreat}
        onFire={onFire}
        onSpecialAbility={() =&gt; {
          setEtherealWindsActive</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/CelestialArbiter.tsx (Line 67:3 -
              Line 83:28), src/components/ships/FactionShips/equatorHorizon/StellarEquinox.tsx (Line
              67:3 - Line 83:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn62"
              onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn62"
              onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup62"
            ><code class="language-javascript text-sm text-gray-800">={id}
        name=&quot;Celestial Arbiter&quot;
        type=&quot;celestialArbiter&quot;
        status={mapStatus(status)}
        health={health}
        maxHealth={maxHealth}
        shield={shield}
        maxShield={maxShield}
        weapons={weapons}
        stats={stats}
        position={position}
        rotation={rotation}
        onEngage={onEngage}
        onRetreat={onRetreat}
        onFire={onFire}
        onSpecialAbility={() =&gt; {
          setCelestialJudgementActive</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ScatterPlot.tsx (Line 253:2 - Line
              265:17), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 404:3 - Line 416:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn68"
              onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn68"
              onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup68"
            ><code class="language-javascript text-sm text-gray-800">} /&gt;

      {showLegend &amp;&amp; &lt;Legend /&gt;}

      {/* Reference lines for thresholds or important values */}
      {referenceLines.map((line, i) =&gt; (
        &lt;ReferenceLine
          key={`ref-line-${i}`}
          x={line.axis === 'x' ? line.value : undefined}
          y={line.axis === 'y' ? line.value : undefined}
          stroke={line.color || '#ff7300'}
          label={
            line</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 158:11 - Line
              174:2), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 401:2 - Line 266:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn73"
              onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn73"
              onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup73"
            ><code class="language-javascript text-sm text-gray-800">}
      /&gt;

      &lt;Tooltip content={customTooltip || &lt;DefaultTooltip /&gt;} /&gt;

      {showLegend &amp;&amp; &lt;Legend /&gt;}

      {/* Reference lines for thresholds or important values */}
      {referenceLines.map((line, i) =&gt; (
        &lt;ReferenceLine
          key={`ref-line-${i}`}
          x={line.axis === 'x' ? line.value : undefined}
          y={line.axis === 'y' ? line.value : undefined}
          stroke={line.color || '#ff7300'}
          label={
            line.label
              ? {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/BarChart.tsx (Line 198:2 - Line
              230:4), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 401:2 - Line 278:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn100"
              onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn100"
              onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup100"
            ><code class="language-javascript text-sm text-gray-800">}
    &gt;
      {showGrid &amp;&amp; &lt;CartesianGrid strokeDasharray=&quot;3 3&quot; /&gt;}

      {layoutProps.xAxis}
      {layoutProps.yAxis}

      &lt;Tooltip content={customTooltip || &lt;DefaultTooltip /&gt;} /&gt;

      {showLegend &amp;&amp; &lt;Legend /&gt;}

      {/* Reference lines for thresholds or important values */}
      {referenceLines.map((line, i) =&gt; (
        &lt;ReferenceLine
          key={`ref-line-${i}`}
          x={line.axis === 'x' ? line.value : undefined}
          y={line.axis === 'y' ? line.value : undefined}
          stroke={line.color || '#ff7300'}
          label={
            line.label
              ? ({
                  value: line.label,
                  position: line.position || 'center',
                } as LabelProps)
              : undefined
          }
        /&gt;
      ))}

      {/* Render each data series as a bar */}
      {yAxisKeys.map((key, index) =&gt; (
        &lt;Bar
          key={key</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ReconShipStatus.tsx (Line 24:4 - Line
              37:2), src/components/ships/player/variants/reconships/ReconShipStatus.tsx (Line 24:4
              - Line 37:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn115"
              onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn115"
              onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup115"
            ><code class="language-javascript text-sm text-gray-800">={ship.id}
            className=&quot;flex items-center justify-between rounded-lg bg-gray-800 p-3&quot;
          &gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Rocket
                className={`h-5 w-5 ${
                  ship.status === 'scanning'
                    ? 'text-teal-400'
                    : ship.status === 'investigating'
                      ? 'text-yellow-400'
                      : ship.status === 'returning'
                        ? 'text-blue-400'
                        : 'text-gray-400'
                }`}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceVisualizationEnhanced.tsx (Line 94:10 - Line
              139:7), src/components/ui/visualization/ResourceVisualization.tsx (Line 263:10 - Line
              342:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn152"
              onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn152"
              onclick="toggleCodeBlock('cloneGroup152', 'expandBtn152', 'collapseBtn152')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup152"
            ><code class="language-javascript text-sm text-gray-800">={`rounded-md p-2 ${colors.bg} border ${colors.border}`}&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;span className={colors.base}&gt;{resourceNames[type]}&lt;/span&gt;
          {status &amp;&amp; (
            &lt;span className={status.color}&gt;
              &lt;status.icon className=&quot;h-4 w-4&quot; /&gt;
            &lt;/span&gt;
          )}
        &lt;/div&gt;

        &lt;div className=&quot;mt-1 space-y-1&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Current:&lt;/span&gt;
            &lt;span className={colors.base}&gt;{value.toLocaleString()}&lt;/span&gt;
          &lt;/div&gt;

          {rate !== 0 &amp;&amp; (
            &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
              &lt;span className=&quot;text-gray-400&quot;&gt;Rate:&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                {rate &gt; 0 ? (
                  &lt;TrendingUp className=&quot;h-4 w-4 text-green-500&quot; /&gt;
                ) : rate &lt; 0 ? (
                  &lt;TrendingDown className=&quot;h-4 w-4 text-red-500&quot; /&gt;
                ) : null}
                &lt;span
                  className={rate &gt; 0 ? 'text-green-500' : rate &lt; 0 ? 'text-red-500' : colors.base}
                &gt;
                  {rate &gt; 0 ? '+' : ''}
                  {rate.toLocaleString()}/s
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {capacity !== undefined &amp;&amp; (
            &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
              &lt;span className=&quot;text-gray-400&quot;&gt;Capacity:&lt;/span&gt;
              &lt;span className={colors.base}&gt;{capacity.toLocaleString()}&lt;/span&gt;
            &lt;/div&gt;
          )}

          {capacity !== undefined &amp;&amp; percentFilled !== 'N/A' &amp;&amp; (
            &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
              &lt;span className=&quot;text-gray-400&quot;&gt;Filled:&lt;/span&gt;
              &lt;span className={colors</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceRatesDisplay.tsx (Line 240:3 - Line 252:2),
              src/components/buildings/modules/MiningHub/ThresholdManager.tsx (Line 110:2 - Line
              141:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn156"
              onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn156"
              onclick="toggleCodeBlock('cloneGroup156', 'expandBtn156', 'collapseBtn156')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup156"
            ><code class="language-javascript text-sm text-gray-800">} /&gt;
        ) : (
          &lt;ChevronDown size={16} /&gt;
        )}
      &lt;/div&gt;

      &lt;AnimatePresence&gt;
        {(expanded !== undefined ? expanded : showRateDetails) &amp;&amp; (
          &lt;motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            transition={{</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceRateFiltering.tsx (Line 260:3 - Line 278:5),
              src/components/ui/resource/ResourceRatesDisplay.tsx (Line 242:3 - Line 255:29)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn159"
              onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn159"
              onclick="toggleCodeBlock('cloneGroup159', 'expandBtn159', 'collapseBtn159')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup159"
            ><code class="language-javascript text-sm text-gray-800">} /&gt;}
      &lt;/div&gt;

      &lt;AnimatePresence&gt;
        {isOpen &amp;&amp; (
          &lt;motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            transition={{ duration: 0.2 }}
            className=&quot;overflow-hidden&quot;
          &gt;
            {/* Filter types */}
            &lt;div className=&quot;mb-3 mt-4&quot;&gt;
              &lt;div className=&quot;mb-2 text-xs text-gray-400&quot;&gt;Filter by rate:&lt;/div&gt;
              &lt;div className=&quot;flex flex-wrap gap-2&quot;&gt;
                {Object.values(RateFilterType).map(type =&gt; (
                  &lt;button
                    key={type</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceManagementDashboard.tsx (Line 322:4 - Line 344:17),
              src/components/ui/resource/ResourceManagementDashboard.tsx (Line 300:4 - Line 322:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn160"
              onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn160"
              onclick="toggleCodeBlock('cloneGroup160', 'expandBtn160', 'collapseBtn160')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup160"
            ><code class="language-javascript text-sm text-gray-800">={type}
              className=&quot;resource-card&quot;
              onClick={() =&gt; handleResourceSelect(type === selectedResource ? undefined : type)}
            &gt;
              &lt;ResourceVisualizationWrapper
                type={type}
                value={resourceData[type]?.value ?? 0}
                rate={resourceData[type]?.rate ?? 0}
                capacity={resourceData[type]?.maxValue}
                thresholds={{
                  low: resourceData[type]?.thresholds?.low ?? 0.25,
                  critical: resourceData[type]?.thresholds?.critical ?? 0.1,
                }}
              /&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;

        {selectedResource &amp;&amp; (
          &lt;div className=&quot;resource-detail&quot;&gt;
            &lt;h3&gt;Detailed View: {selectedResource}&lt;/h3&gt;
            &lt;ResourceThresholdVisualization
              resourceType={selectedResource</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceGrid.tsx (Line 222:4 - Line 243:2),
              src/components/ui/resource/ResourceGrid.tsx (Line 180:4 - Line 201:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn161"
              onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn161"
              onclick="toggleCodeBlock('cloneGroup161', 'expandBtn161', 'collapseBtn161')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup161"
            ><code class="language-javascript text-sm text-gray-800">={resource.resourceType} className=&quot;resource-grid-item&quot;&gt;
          {displayMode === 'compact' &amp;&amp; (
            &lt;ResourceDisplay
              resourceType={resource.resourceType}
              initialAmount={resource.initialAmount}
            /&gt;
          )}
          
          {displayMode === 'detailed' &amp;&amp; (
            &lt;ResourceDisplay
              resourceType={resource.resourceType}
              initialAmount={resource.initialAmount}
              className=&quot;p-2 bg-gray-100 rounded-md&quot;
            /&gt;
          )}
          
          {displayMode === 'bars' &amp;&amp; (
            &lt;ResourceBar
              resourceType={resource.resourceType}
              initialAmount={resource.initialAmount}
              maxCapacity={resource.maxCapacity}
              showPercentage={showPercentage}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/overlays/Drawer.tsx (Line 427:2 - Line 450:2),
              src/components/ui/overlays/Modal.tsx (Line 332:37 - Line 356:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn192"
              onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn192"
              onclick="toggleCodeBlock('cloneGroup192', 'expandBtn192', 'collapseBtn192')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup192"
            ><code class="language-javascript text-sm text-gray-800">
                }}
              &gt;
                {title}
              &lt;/h2&gt;
            )}
            
            {showCloseButton &amp;&amp; (
              &lt;button
                type=&quot;button&quot;
                className=&quot;drawer-close-button&quot;
                onClick={onClose}
                aria-label=&quot;Close drawer&quot;
                style={{
                  appearance: 'none',
                  background: 'transparent',
                  border: 'none',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  padding: '8px',
                  borderRadius: 'var(--border-radius-small, 4px)',
                  color: 'var(--color-text-secondary, #718096)',</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/FactionShipStats.tsx (Line 42:10 - Line 73:5),
              src/components/ships/player/base/PlayerShipBase.tsx (Line 30:10 - Line 63:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn208"
              onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn208"
              onclick="toggleCodeBlock('cloneGroup208', 'expandBtn208', 'collapseBtn208')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup208"
            ><code class="language-javascript text-sm text-gray-800">={`bg-${color}-900/20 border border-${color}-700/30 rounded-lg p-6 ${className}`}&gt;
      {/* Ship Header */}
      &lt;div className=&quot;mb-6 flex items-start justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;flex items-center text-sm text-gray-400&quot;&gt;
            &lt;span className=&quot;capitalize&quot;&gt;{ship.faction.replace(/([A-Z])/g, ' $1').trim()}&lt;/span&gt;
            &lt;span className=&quot;mx-2&quot;&gt;•&lt;/span&gt;
            &lt;span&gt;{ship.class.replace(/-/g, ' ')}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            ship.status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : ship.status === 'patrolling'
                ? 'bg-green-900/50 text-green-400'
                : ship.status === 'retreating'
                  ? 'bg-yellow-900/50 text-yellow-400'
                  : 'bg-gray-700 text-gray-400'
          }`}
        &gt;
          {ship.status.charAt(0).toUpperCase() + ship.status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Health &amp; Shield Bars */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={ship</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/PopulationGrowthModule.tsx (Line 310:2 - Line 324:4),
              src/components/ui/resource/ResourceRatesDisplay.tsx (Line 242:3 - Line 252:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn220"
              onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn220"
              onclick="toggleCodeBlock('cloneGroup220', 'expandBtn220', 'collapseBtn220')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup220"
            ><code class="language-javascript text-sm text-gray-800">}
        &gt;
          &lt;span&gt;Growth Modifiers&lt;/span&gt;
          &lt;span className=&quot;text-xs text-gray-400&quot;&gt;
            {growthModifiers.filter(m =&gt; m.active).length} Active
          &lt;/span&gt;
        &lt;/button&gt;

        &lt;AnimatePresence&gt;
          {showModifiers &amp;&amp; (
            &lt;motion.div
              initial={{ height: 0, opacity: 0 }}
              animate={{ height: 'auto', opacity: 1 }}
              exit={{ height: 0, opacity: 0 }}
              transition={{ duration: 0.3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyCore.tsx (Line 111:3 - Line 167:2),
              src/components/buildings/mothership/MothershipCore.tsx (Line 263:8 - Line 315:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn225"
              onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn225"
              onclick="toggleCodeBlock('cloneGroup225', 'expandBtn225', 'collapseBtn225')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup225"
            ><code class="language-javascript text-sm text-gray-800">}&gt;
      {/* Core Colony Structure */}
      &lt;div className=&quot;absolute inset-0 rounded-lg border border-gray-700 bg-gray-900/90&quot;&gt;
        &lt;div className=&quot;p-6&quot;&gt;
          &lt;h2 className=&quot;mb-4 text-xl font-bold text-white&quot;&gt;Colony Control&lt;/h2&gt;
          &lt;div className=&quot;mb-6 text-sm text-gray-400&quot;&gt;Level {level}&lt;/div&gt;

          {/* Module Attachment Points */}
          &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
            {COLONY_ATTACHMENT_POINTS.map(point =&gt; {
              const attachedModule = modules.find(
                (m: ModularBuilding['modules'][0]) =&gt;
                  m.position.x === point.position.x &amp;&amp; m.position.y === point.position.y
              );

              const { handleContextMenu, ContextMenuComponent } = useContextMenu({
                items: getAttachmentPointMenuItems(point),
              });

              return (
                &lt;div key={point.id}&gt;
                  &lt;DropTarget
                    accept={['module']}
                    onDrop={item =&gt; handleModuleDrop(item, point)}
                    className=&quot;rounded-lg bg-gray-800 p-4 transition-colors hover:bg-gray-800/80&quot;
                  &gt;
                    &lt;div
                      className=&quot;flex items-center justify-between&quot;
                      onContextMenu={handleContextMenu}
                    &gt;
                      &lt;div&gt;
                        &lt;div className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                          {point.id.charAt(0).toUpperCase() + point.id.slice(1)} Attachment Point
                        &lt;/div&gt;
                        {attachedModule ? (
                          &lt;Draggable
                            item={{
                              id: attachedModule.id,
                              type: 'module',
                              data: attachedModule,
                            }}
                            className=&quot;cursor-grab text-xs text-gray-500 hover:text-gray-400&quot;
                          &gt;
                            {attachedModule.name}
                          &lt;/Draggable&gt;
                        ) : (
                          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                            Empty (Accepts: {point.allowedTypes.join(', ')})
                          &lt;/div&gt;
                        )}
                        &lt;div className=&quot;mt-1 text-xs text-gray-400&quot;&gt;
                          Allowed: {point.allowedTypes.join(', ')}
                        &lt;/div&gt;
                      &lt;/div&gt;
                      {attachedModule &amp;&amp; (
                        &lt;button
                          onClick={() =&gt; onModuleDetach?.(attachedModule.id)}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/ui/layout/Responsive.tsx (Line 71:6 - Line 258:2), src/ui/layout/Responsive.tsx
              (Line 51:6 - Line 113:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn250"
              onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn250"
              onclick="toggleCodeBlock('cloneGroup250', 'expandBtn250', 'collapseBtn250')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup250"
            ><code class="language-javascript text-sm text-gray-800">={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only on desktop devices
 */
export const Desktop: React.FC&lt;ResponsiveProps&gt; = ({
  children,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(mediaQueries.desktop);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content on devices at least at the specified breakpoint
 */
export const ScreenFrom: React.FC&lt;BreakpointProps&gt; = ({
  children,
  breakpoint,
  removeFromDOM = true,
}) =&gt; {
  const { isAtLeast } = useBreakpoint();
  const matches = isAtLeast(breakpoint);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content on devices at most at the specified breakpoint
 */
export const ScreenTo: React.FC&lt;BreakpointProps&gt; = ({
  children,
  breakpoint,
  removeFromDOM = true,
}) =&gt; {
  const { isAtMost } = useBreakpoint();
  const matches = isAtMost(breakpoint);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only on devices at exactly the specified breakpoint
 */
export const ScreenOnly: React.FC&lt;BreakpointProps&gt; = ({
  children,
  breakpoint,
  removeFromDOM = true,
}) =&gt; {
  const { is } = useBreakpoint();
  const matches = is(breakpoint);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content based on a custom media query
 */
export const MediaQuery: React.FC&lt;ResponsiveProps &amp; { query: string }&gt; = ({
  children,
  query,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(query);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only when a device has a hover capability
 */
export const WithHover: React.FC&lt;ResponsiveProps&gt; = ({
  children,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(mediaQueries.canHover);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only when a device has a fine pointer
 */
export const WithPointer: React.FC&lt;ResponsiveProps&gt; = ({
  children,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(mediaQueries.hasPointer);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only in landscape orientation
 */
export const Landscape: React.FC&lt;ResponsiveProps&gt; = ({
  children,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(mediaQueries.landscape);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}&gt;
      {children}
    &lt;/div&gt;
  );
};

/**
 * Component that shows content only in portrait orientation
 */
export const Portrait: React.FC&lt;ResponsiveProps&gt; = ({
  children,
  removeFromDOM = true,
}) =&gt; {
  const matches = useMediaQuery(mediaQueries.portrait);
  
  if (!matches &amp;&amp; removeFromDOM) {
    return null;
  }
  
  return (
    &lt;div style={{ display: matches ? 'block' : 'none' }}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/MothershipSuperstructure.tsx (Line 101:8 - Line 135:4),
              src/effects/component_effects/MothershipSuperstructure.tsx (Line 82:7 - Line 96:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn355"
              onclick="toggleCodeBlock('cloneGroup355', 'expandBtn355', 'collapseBtn355')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn355"
              onclick="toggleCodeBlock('cloneGroup355', 'expandBtn355', 'collapseBtn355')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup355"
            ><code class="language-javascript text-sm text-gray-800">)}
            &gt;
              {/* Energy flow nodes */}
              {Array.from({ length: 4 }).map((_, i) =&gt; (
                &lt;motion.div
                  key={`inner-energy-${i}`}
                  className=&quot;absolute h-6 w-6 rounded-full bg-yellow-500/80&quot;
                  style={{
                    top: '50%',
                    left: '50%',
                    transform: `rotate(${i * 90}deg) translateY(-24px)`,
                    opacity: energyFlowIntensity,
                  }}
                  animate={{
                    scale: [1, 1.2, 1],
                  }}
                  transition={{
                    duration: 2,
                    repeat: Infinity,
                    repeatType: 'loop',
                  }}
                &gt;
                  &lt;Zap className=&quot;h-6 w-6 text-yellow-300&quot; /&gt;
                &lt;/motion.div&gt;
              ))}
            &lt;/motion.div&gt;
          )}

          {/* Middle ring */}
          {sections.includes('middle') &amp;&amp; (
            &lt;motion.div
              initial={{ scale: 0, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              exit={{ scale: 0, opacity: 0 }}
              transition={{ duration: animationDuration, delay: 0.2</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/MothershipSuperstructure.tsx (Line 140:9 - Line 173:4),
              src/effects/component_effects/MothershipSuperstructure.tsx (Line 82:7 - Line 96:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn356"
              onclick="toggleCodeBlock('cloneGroup356', 'expandBtn356', 'collapseBtn356')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn356"
              onclick="toggleCodeBlock('cloneGroup356', 'expandBtn356', 'collapseBtn356')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup356"
            ><code class="language-javascript text-sm text-gray-800">)}
            &gt;
              {/* Material flow nodes */}
              {Array.from({ length: 6 }).map((_, i) =&gt; (
                &lt;motion.div
                  key={`middle-material-${i}`}
                  className=&quot;absolute h-5 w-5 rounded-full bg-blue-500/80&quot;
                  style={{
                    top: '50%',
                    left: '50%',
                    transform: `rotate(${i * 60}deg) translateY(-32px)`,
                    opacity: materialsFlowIntensity,
                  }}
                  animate={{
                    scale: [1, 1.1, 1],
                  }}
                  transition={{
                    duration: 3,
                    repeat: Infinity,
                    repeatType: 'loop',
                    delay: i * 0.5,
                  }}
                /&gt;
              ))}
            &lt;/motion.div&gt;
          )}

          {/* Outer ring */}
          {sections.includes('outer') &amp;&amp; (
            &lt;motion.div
              initial={{ scale: 0, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              exit={{ scale: 0, opacity: 0 }}
              transition={{ duration: animationDuration, delay: 0.3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/ResourceRegistryUI.tsx (Line 480:22 - Line 500:14),
              src/components/ui/ResourceRegistryUI.tsx (Line 472:12 - Line 495:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn388"
              onclick="toggleCodeBlock('cloneGroup388', 'expandBtn388', 'collapseBtn388')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn388"
              onclick="toggleCodeBlock('cloneGroup388', 'expandBtn388', 'collapseBtn388')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup388"
            ><code class="language-javascript text-sm text-gray-800">}&gt;{resource.baseValue}&lt;/span&gt;
        &lt;/div&gt;

        &lt;div style={styles.resourceProperty}&gt;
          &lt;span style={styles.resourcePropertyLabel}&gt;Weight:&lt;/span&gt;
          &lt;span style={styles.resourcePropertyValue}&gt;{resource.weight}&lt;/span&gt;
        &lt;/div&gt;

        &lt;div style={styles.resourceProperty}&gt;
          &lt;span style={styles.resourcePropertyLabel}&gt;Storage Efficiency:&lt;/span&gt;
          &lt;span style={styles.resourcePropertyValue}&gt;
            {(resource.storageEfficiency * 100).toFixed(0)}%
          &lt;/span&gt;
        &lt;/div&gt;

        &lt;div style={styles.resourceProperty}&gt;
          &lt;span style={styles.resourcePropertyLabel}&gt;Max Storage:&lt;/span&gt;
          &lt;span style={styles.resourcePropertyValue}&gt;{resource.defaultMax}&lt;/span&gt;
        &lt;/div&gt;

        &lt;div style={styles.qualityLevels</code></pre>
          </div>
          <!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed-->
        </div>
        <a name="tsx-clones"></a>
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">tsx</h2>
        <div class="divide-y divide-gray-200 border-b-2">
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/StarSchooner.tsx (Line 71:9 - Line
              79:7), src/components/ships/player/variants/warships/WarShip.tsx (Line 122:8 - Line
              131:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn0"
              onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn0"
              onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup0"
            ><code class="language-tsx text-sm text-gray-800">) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/StarSchooner.tsx (Line 104:13 - Line
              119:22), src/components/ships/player/variants/warships/WarShip.tsx (Line 148:2 - Line
              163:56)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn1"
              onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn1"
              onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup1"
            ><code class="language-tsx text-sm text-gray-800">&gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/Spitflare.tsx (Line 38:8 - Line 90:8),
              src/components/ships/player/variants/warships/StarSchooner.tsx (Line 40:7 - Line 92:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn4"
              onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn4"
              onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup4"
            ><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Machine</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/Spitflare.tsx (Line 90:5 - Line 135:8),
              src/components/ships/player/variants/warships/StarSchooner.tsx (Line 92:7 - Line
              137:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn5"
              onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn5"
              onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup5"
            ><code class="language-tsx text-sm text-gray-800">&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-cyan-500/30 bg-cyan-500/20 hover:bg-cyan-500/30'
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-cyan-500/20 text-cyan-200 hover:bg-cyan-500/30'
              : 'cursor-not-allowed bg-gray-700 text-gray-500'
          }`}
        &gt;
          &lt;Crosshair className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Fire Weapons</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 65:7 -
              Line 72:5), src/components/ships/player/variants/warships/WarShip.tsx (Line 83:7 -
              Line 90:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn6"
              onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn6"
              onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup6"
            ><code class="language-tsx text-sm text-gray-800">{/* Ship Header */}
      &lt;div className=&quot;mb-6 flex items-start justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;flex items-center text-sm text-gray-400&quot;&gt;
            &lt;span&gt;Tier {ship.tier}&lt;/span&gt;
            &lt;span className=&quot;mx-2&quot;&gt;•&lt;/span&gt;
            &lt;span className=&quot;capitalize&quot;&gt;{ship.type</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 86:2 -
              Line 96:5), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 53:2
              - Line 63:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn7"
              onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn7"
              onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup7"
            ><code class="language-tsx text-sm text-gray-800">status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={ship.hull &lt; ship.maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((ship</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 90:20 -
              Line 130:2), src/components/ships/player/variants/warships/WarShip.tsx (Line 108:27 -
              Line 148:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn8"
              onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn8"
              onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup8"
            ><code class="language-tsx text-sm text-gray-800">}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={ship.hull &lt; ship.maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((ship.hull / ship.maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                ship.hull &lt; ship.maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(ship.hull / ship.maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;
              {Math.round((ship.shield / ship.maxShield) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(ship.shield / ship.maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Weapon Systems&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {ship.weapons.map(weapon =&gt; (
            &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 140:15 -
              Line 158:7), src/components/ships/player/variants/warships/WarShip.tsx (Line 149:15 -
              Line 167:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn9"
              onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn9"
              onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup9"
            ><code class="language-tsx text-sm text-gray-800">&lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;flex items-center justify-between text-xs text-gray-400&quot;&gt;
                &lt;span&gt;Range: {weapon.range}ly&lt;/span&gt;
                &lt;span&gt;DMG: {weapon.damage}&lt;/span&gt;
              &lt;/div&gt;
            &lt;/button</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 158:7 -
              Line 169:7), src/components/ships/player/variants/warships/WarShip.tsx (Line 167:4 -
              Line 178:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn10"
              onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn10"
              onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup10"
            ><code class="language-tsx text-sm text-gray-800">&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Special Abilities */}
      {ship.specialAbilities &amp;&amp; ship.specialAbilities.length &gt; 0 &amp;&amp; (
        &lt;div className=&quot;mb-6&quot;&gt;
          &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Special Abilities&lt;/h4&gt;
          &lt;div className=&quot;space-y-2&quot;&gt;
            {ship.specialAbilities.map(ability =&gt; (
              &lt;button</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 205:11 -
              Line 220:2), src/components/ships/player/variants/warships/Spitflare.tsx (Line 134:11
              - Line 148:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn11"
              onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn11"
              onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup11"
            ><code class="language-tsx text-sm text-gray-800">&lt;Crosshair className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Fire Weapons&lt;/span&gt;
        &lt;/button&gt;
        &lt;button
          onClick={onRetreat}
          disabled={ship.status === 'damaged'}
          className={`flex items-center justify-center space-x-2 rounded-lg bg-gray-700 px-4 py-2 text-sm hover:bg-gray-600 ${
            ship.status === 'damaged' ? 'cursor-not-allowed opacity-50' : ''
          }`}
        &gt;
          &lt;Shield className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Retreat&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 47:8 - Line
              99:7), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 40:7 -
              Line 92:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn14"
              onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn14"
              onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup14"
            ><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Weapon</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 91:11 - Line
              101:8), src/components/ships/player/variants/warships/WarShip.tsx (Line 137:10 - Line
              147:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn15"
              onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn15"
              onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup15"
            ><code class="language-tsx text-sm text-gray-800">) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Weapon Systems */}
      &lt;div className=&quot;mb-6 space-y-4&quot;&gt;
        &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Weapon Systems&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 99:8 - Line
              132:22), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 92:7 -
              Line 125:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn16"
              onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn16"
              onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup16"
            ><code class="language-tsx text-sm text-gray-800">&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-violet-500/30 bg-violet-500/20 hover:bg-violet-500/30'
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Special Ability */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 152:7 - Line
              182:2), src/components/ships/player/variants/warships/Spitflare.tsx (Line 120:4 - Line
              150:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn17"
              onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn17"
              onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup17"
            ><code class="language-tsx text-sm text-gray-800">&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-violet-500/20 text-violet-200 hover:bg-violet-500/30'
              : 'cursor-not-allowed bg-gray-700 text-gray-500'
          }`}
        &gt;
          &lt;Crosshair className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Fire Weapons&lt;/span&gt;
        &lt;/button&gt;
        &lt;button
          onClick={onRetreat}
          disabled={status === 'damaged'}
          className={`flex items-center justify-center space-x-2 rounded-lg bg-gray-700 px-4 py-2 text-sm hover:bg-gray-600 ${
            status === 'damaged' ? 'cursor-not-allowed opacity-50' : ''
          }`}
        &gt;
          &lt;Shield className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Retreat&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 60:5 - Line
              110:21), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 40:7 -
              Line 90:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn20"
              onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn20"
              onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup20"
            ><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Docking Status */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 154:8 -
              Line 187:24), src/components/ships/player/variants/warships/StarSchooner.tsx (Line
              92:7 - Line 125:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn21"
              onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn21"
              onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup21"
            ><code class="language-tsx text-sm text-gray-800">&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-rose-500/30 bg-rose-500/20 hover:bg-rose-500/30'
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Special Abilities */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 202:15 -
              Line 216:2), src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx
              (Line 179:17 - Line 192:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn22"
              onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn22"
              onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup22"
            ><code class="language-tsx text-sm text-gray-800">&lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                {ability.active ? (
                  &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
                ) : (
                  &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{ability.cooldown}s&lt;/span&gt;
                )}
              &lt;/div&gt;
              &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{ability.description}&lt;/p&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line 245:2 -
              Line 258:2), src/components/ships/player/variants/warships/WarShip.tsx (Line 226:2 -
              Line 239:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn23"
              onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn23"
              onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup23"
            ><code class="language-tsx text-sm text-gray-800">alerts.map((alert, index) =&gt; (
            &lt;div
              key={index}
              className=&quot;flex items-start space-x-2 rounded-lg border border-red-700/30 bg-red-900/20 p-3&quot;
            &gt;
              &lt;AlertTriangle className=&quot;mt-0.5 h-4 w-4 flex-shrink-0 text-red-500&quot; /&gt;
              &lt;span className=&quot;text-sm text-red-200&quot;&gt;{alert}&lt;/span&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 68:2 - Line
              102:2), src/components/ships/player/variants/warships/MotherEarthRevenge.tsx (Line
              60:2 - Line 74:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn27"
              onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn27"
              onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup27"
            ><code class="language-tsx text-sm text-gray-800">Capital Ship&lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : status === 'retreating'
                ? 'bg-yellow-900/50 text-yellow-400'
                : status === 'damaged'
                  ? 'bg-red-900/50 text-red-400'
                  : 'bg-green-900/50 text-green-400'
          }`}
        &gt;
          {status.charAt(0).toUpperCase() + status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Status */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span className={hull &lt; maxHull * 0.3 ? 'text-red-400' : 'text-gray-300'}&gt;
              {Math.round((hull / maxHull) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className={`h-full rounded-full transition-all ${
                hull &lt; maxHull * 0.3 ? 'bg-red-500' : 'bg-green-500'
              }`}
              style={{ width: `${(hull / maxHull) * 100}%` }}
            /&gt;
          &lt;/div&gt;
          {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 109:9 - Line
              125:21), src/components/ships/player/variants/warships/StarSchooner.tsx (Line 74:9 -
              Line 90:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn28"
              onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn28"
              onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup28"
            ><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;{Math.round((shield / maxShield) * 100)}%&lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(shield / maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Fighter Status */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/warships/MidwayCarrier.tsx (Line 179:2 - Line
              253:9), src/components/ships/player/variants/warships/OrionFrigate.tsx (Line 99:2 -
              Line 228:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn29"
              onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn29"
              onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup29"
            ><code class="language-tsx text-sm text-gray-800">Systems&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {weapons.map(weapon =&gt; (
            &lt;button
              key={weapon.id}
              onClick={() =&gt; onFire(weapon.id)}
              disabled={weapon.status !== 'ready'}
              className={`rounded-lg p-3 transition-colors ${
                weapon.status === 'ready'
                  ? 'border border-fuchsia-500/30 bg-fuchsia-500/20 hover:bg-fuchsia-500/30'
                  : 'cursor-not-allowed border border-gray-600/30 bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-2 flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-sm font-medium text-white&quot;&gt;{weapon.name}&lt;/div&gt;
                &lt;div
                  className={`text-xs ${
                    weapon.status === 'ready'
                      ? 'text-green-400'
                      : weapon.status === 'charging'
                        ? 'text-yellow-400'
                        : 'text-red-400'
                  }`}
                &gt;
                  {weapon.status.charAt(0).toUpperCase() + weapon.status.slice(1)}
                &lt;/div&gt;
              &lt;/div&gt;
              &lt;div className=&quot;text-xs text-gray-400&quot;&gt;Damage: {weapon.damage}&lt;/div&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Special Abilities */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Special Abilities&lt;/h4&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {specialAbilities.map(ability =&gt; (
            &lt;button
              key={ability.name}
              onClick={() =&gt; onActivateAbility(ability.name)}
              disabled={ability.active}
              className={`w-full rounded-lg p-3 text-left transition-colors ${
                ability.active
                  ? 'border border-fuchsia-500/30 bg-fuchsia-500/20'
                  : 'bg-gray-700/50 hover:bg-gray-600/50'
              }`}
            &gt;
              &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                {ability.active ? (
                  &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
                ) : (
                  &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{ability.cooldown}s&lt;/span&gt;
                )}
              &lt;/div&gt;
              &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{ability.description}&lt;/p&gt;
            &lt;/button&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Combat Actions */}
      &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
        &lt;button
          onClick={() =&gt; onFire(weapons[0].id)}
          disabled={!weapons.some(w =&gt; w.status === 'ready')}
          className={`flex items-center justify-center space-x-2 rounded-lg px-4 py-2 text-sm ${
            weapons.some(w =&gt; w.status === 'ready')
              ? 'bg-fuchsia-500/20 text-fuchsia-200 hover:bg-fuchsia-500/30'
              : 'cursor-not-allowed bg-gray-700 text-gray-500'
          }`}
        &gt;
          &lt;Crosshair className=&quot;h-4 w-4&quot; /&gt;
          &lt;span&gt;Fire Defenses</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/reconships/ReconShipControl.tsx (Line 50:9 - Line
              65:2), src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line
              55:10 - Line 70:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn30"
              onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn30"
              onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup30"
            ><code class="language-tsx text-sm text-gray-800">;
      default:
        return 'blue';
    }
  };

  const color = getShipTypeColor(ship.type);

  return (
    &lt;div className={`bg-${color}-900/20 border border-${color}-700/30 rounded-lg p-6`}&gt;
      {/* Ship Header */}
      &lt;div className=&quot;mb-6 flex items-start justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;flex items-center text-sm text-gray-400&quot;&gt;
            &lt;span&gt;{</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/variants/miningships/VoidDredgerMiner.tsx (Line 158:2 -
              Line 171:2), src/components/ships/player/variants/reconships/ReconShipControl.tsx
              (Line 222:2 - Line 235:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn31"
              onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn31"
              onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup31"
            ><code class="language-tsx text-sm text-gray-800">alerts.map((alert, index) =&gt; (
            &lt;div
              key={index}
              className=&quot;flex items-start space-x-2 rounded-lg border border-yellow-700/30 bg-yellow-900/20 p-3&quot;
            &gt;
              &lt;AlertTriangle className=&quot;mt-0.5 h-4 w-4 flex-shrink-0 text-yellow-500&quot; /&gt;
              &lt;span className=&quot;text-sm text-yellow-200&quot;&gt;{alert}&lt;/span&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line 49:23 -
              Line 68:6), src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx
              (Line 43:19 - Line 63:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn32"
              onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn32"
              onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup32"
            ><code class="language-tsx text-sm text-gray-800">) {
  const getShipTypeColor = (type: string) =&gt; {
    switch (type) {
      case 'spitflare':
        return 'cyan';
      case 'starSchooner':
        return 'indigo';
      case 'orionFrigate':
        return 'violet';
      case 'harbringerGalleon':
        return 'purple';
      case 'midwayCarrier':
        return 'fuchsia';
      default:
        return 'blue';
    }
  };

  const color = getShipTypeColor(ship.type);
  const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line 40:3 - Line
              50:2), src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line
              68:3 - Line 78:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn34"
              onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn34"
              onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup34"
            ><code class="language-tsx text-sm text-gray-800">const allRequirementsMet = ship.requirements.every(req =&gt; req.met);
  const sufficientResources = ship.resourceCost.every(cost =&gt; cost.available &gt;= cost.amount);
  const canUpgrade = ship.upgradeAvailable &amp;&amp; allRequirementsMet &amp;&amp; sufficientResources;

  const getStatDifference = (current: number, upgraded: number) =&gt; {
    const diff = upgraded - current;
    return diff &gt; 0 ? `+${diff}` : diff.toString();
  };

  return (
    &lt;div className=</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line 50:2 - Line
              91:23), src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line
              78:2 - Line 119:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn35"
              onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn35"
              onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup35"
            ><code class="language-tsx text-sm text-gray-800">&gt;
      {/* Header */}
      &lt;div className=&quot;mb-6 flex items-center justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;
            Tier {ship.tier} → {ship.tier + 1}
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div className=&quot;rounded-lg bg-indigo-500/20 p-2&quot;&gt;
          &lt;Rocket className=&quot;h-6 w-6 text-indigo-400&quot; /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Upgrade Requirements */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Requirements&lt;/h4&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {ship.requirements.map((req, index) =&gt; (
            &lt;div
              key={index}
              className={`flex items-center justify-between rounded-lg p-3 ${
                req.met ? 'border border-green-700/30 bg-green-900/20' : 'bg-gray-700/50'
              }`}
            &gt;
              &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
                {req.type === 'tech' &amp;&amp; &lt;Crosshair className=&quot;h-4 w-4 text-gray-400&quot; /&gt;}
                {req.type === 'resource' &amp;&amp; &lt;Shield className=&quot;h-4 w-4 text-gray-400&quot; /&gt;}
                {req.type === 'facility' &amp;&amp; &lt;Rocket className=&quot;h-4 w-4 text-gray-400&quot; /&gt;}
                &lt;span className=&quot;text-sm text-gray-300&quot;&gt;{req.name}&lt;/span&gt;
              &lt;/div&gt;
              {req.met ? (
                &lt;div className=&quot;text-xs text-green-400&quot;&gt;Met&lt;/div&gt;
              ) : (
                &lt;Lock className=&quot;h-4 w-4 text-gray-500&quot; /&gt;
              )}
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Stat Comparisons */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line 91:23 - Line
              99:3), src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line
              119:24 - Line 129:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn36"
              onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn36"
              onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup36"
            ><code class="language-tsx text-sm text-gray-800">}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Improvements&lt;/h4&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-3&quot;&gt;
          {Object.entries(ship.stats).map(([stat, values]) =&gt; (
            &lt;div key={stat} className=&quot;rounded-lg bg-gray-700/50 p-3&quot;&gt;
              &lt;div className=&quot;mb-2 text-sm capitalize text-gray-400&quot;&gt;{stat}&lt;/div&gt;
              &lt;div className=&quot;flex items-center justify-between&quot;&gt;
                &lt;div className=&quot;text-white&quot;&gt;{values.current}&lt;/</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line 106:4 - Line
              161:2), src/components/ships/player/customization/PlayerShipUpgradeSystem.tsx (Line
              155:2 - Line 210:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn37"
              onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn37"
              onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup37"
            ><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Resource Costs */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;h4 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Resource Requirements&lt;/h4&gt;
        &lt;div className=&quot;space-y-2&quot;&gt;
          {ship.resourceCost.map((resource, index) =&gt; (
            &lt;div
              key={index}
              className=&quot;flex items-center justify-between rounded-lg bg-gray-700/50 p-3&quot;
            &gt;
              &lt;span className=&quot;text-sm text-gray-300&quot;&gt;{resource.type}&lt;/span&gt;
              &lt;div
                className={`text-sm ${
                  resource.available &gt;= resource.amount ? 'text-green-400' : 'text-red-400'
                }`}
              &gt;
                {resource.available} / {resource.amount}
              &lt;/div&gt;
            &lt;/div&gt;
          ))}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Upgrade Button */}
      &lt;button
        onClick={onUpgrade}
        disabled={!canUpgrade}
        className={`flex w-full items-center justify-center space-x-2 rounded-lg px-4 py-3 ${
          canUpgrade
            ? 'bg-indigo-600 text-white hover:bg-indigo-700'
            : 'cursor-not-allowed bg-gray-700 text-gray-500'
        }`}
      &gt;
        &lt;Rocket className=&quot;h-5 w-5&quot; /&gt;
        &lt;span&gt;Upgrade to Tier {ship.tier + 1}&lt;/span&gt;
      &lt;/button&gt;

      {/* Warnings */}
      {!canUpgrade &amp;&amp; (
        &lt;div className=&quot;mt-4 flex items-start space-x-2 rounded-lg border border-yellow-700/30 bg-yellow-900/20 p-3&quot;&gt;
          &lt;AlertTriangle className=&quot;h-5 w-5 flex-shrink-0 text-yellow-500&quot; /&gt;
          &lt;div className=&quot;text-sm text-yellow-200&quot;&gt;
            {!ship.upgradeAvailable &amp;&amp; 'Ship is not eligible for upgrade.'}
            {!allRequirementsMet &amp;&amp; 'Not all upgrade requirements are met.'}
            {!sufficientResources &amp;&amp; 'Insufficient resources for upgrade.'}
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipCustomization.tsx (Line 49:3 -
              Line 55:14), src/components/ships/player/customization/PlayerShipUpgrade.tsx (Line
              49:3 - Line 56:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn38"
              onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn38"
              onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup38"
            ><code class="language-tsx text-sm text-gray-800">return (
    &lt;div className=&quot;rounded-lg bg-gray-800 p-6&quot;&gt;
      {/* Header */}
      &lt;div className=&quot;mb-6 flex items-center justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;text-sm text-gray-400&quot;&gt;Tier {ship.tier} Customization</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipCustomization.tsx (Line 212:7 -
              Line 223:14), src/components/ships/player/customization/PlayerShipCustomization.tsx
              (Line 176:7 - Line 187:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn39"
              onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn39"
              onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup39"
            ><code class="language-tsx text-sm text-gray-800">.stats).map(([stat, value]) =&gt; (
                    &lt;div key={stat} className=&quot;text-xs text-gray-400&quot;&gt;
                      {stat}: {value}
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Engines */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/customization/PlayerShipCustomization.tsx (Line 248:7 -
              Line 258:3), src/components/ships/player/customization/PlayerShipCustomization.tsx
              (Line 176:7 - Line 187:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn40"
              onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn40"
              onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup40"
            ><code class="language-tsx text-sm text-gray-800">.stats).map(([stat, value]) =&gt; (
                    &lt;div key={stat} className=&quot;text-xs text-gray-400&quot;&gt;
                      {stat}: {value}
                    &lt;/div&gt;
                  ))}
                &lt;/div&gt;
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/base/PlayerShipBase.tsx (Line 27:2 - Line 36:2),
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 61:2 -
              Line 70:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn41"
              onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn41"
              onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup41"
            ><code class="language-tsx text-sm text-gray-800">;

  return (
    &lt;div className={`bg-${color}-900/20 border border-${color}-700/30 rounded-lg p-6 ${className}`}&gt;
      {/* Ship Header */}
      &lt;div className=&quot;mb-6 flex items-start justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;flex items-center text-sm text-gray-400&quot;&gt;
            &lt;span </code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/base/PlayerShipBase.tsx (Line 76:15 - Line 85:6),
              src/components/ships/player/variants/warships/WarShip.tsx (Line 122:2 - Line 131:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn42"
              onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn42"
              onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup42"
            ><code class="language-tsx text-sm text-gray-800">}}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;
              {Math.round((ship.stats</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/base/PlayerShipBase.tsx (Line 144:24 - Line 150:2),
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 175:24 -
              Line 181:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn43"
              onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn43"
              onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup43"
            ><code class="language-tsx text-sm text-gray-800">bg-${color}-500/20 border border-${color}-500/30`
                    : 'bg-gray-700/50 hover:bg-gray-600/50'
                }`}
              &gt;
                &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                  &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                  &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/player/base/PlayerShipBase.tsx (Line 146:19 - Line 152:4),
              src/components/ships/player/variants/warships/WarShip.tsx (Line 184:19 - Line 190:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn44"
              onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn44"
              onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup44"
            ><code class="language-tsx text-sm text-gray-800">}
              &gt;
                &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
                  &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{ability.name}&lt;/span&gt;
                  &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{ability.cooldown}s&lt;/span&gt;
                &lt;/div&gt;
                &lt;div</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 12:10 - Line 22:2),
              src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 10:7 - Line 20:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn45"
              onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn45"
              onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup45"
            ><code class="language-tsx text-sm text-gray-800">;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat?</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/spaceRats/AsteroidMarauder.tsx (Line 7:2 - Line
              19:2), src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 9:2 - Line
              21:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn46"
              onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn46"
              onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup46"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: ()</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/spaceRats/AsteroidMarauder.tsx (Line 40:3 - Line
              56:7), src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 61:3 - Line
              77:51)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn47"
              onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn47"
              onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup47"
            ><code class="language-tsx text-sm text-gray-800">// Map the full ShipStatus to SpaceRatShip's more limited status type
  const mapStatus = (status: ShipStatus): 'engaging' | 'patrolling' | 'retreating' | 'disabled' =&gt; {
    switch (status) {
      case 'damaged':
        return 'disabled';
      case 'idle':
      case 'ready':
        return 'patrolling';
      case 'engaging':
      case 'patrolling':
      case 'retreating':
      case 'disabled':
        return status;
    }
  };

  return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/spaceRats/AsteroidMarauder.tsx (Line 79:7 - Line
              93:98), src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 119:7 - Line
              135:123)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn48"
              onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn48"
              onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup48"
            ><code class="language-tsx text-sm text-gray-800">{/* Warning indicator for damaged state */}
      {status === 'damaged' &amp;&amp; (
        &lt;div className=&quot;absolute right-0 top-0 p-2&quot;&gt;
          &lt;AlertTriangle className=&quot;h-6 w-6 animate-pulse text-yellow-500&quot; /&gt;
        &lt;/div&gt;
      )}

      {/* Action Buttons */}
      &lt;div className=&quot;absolute bottom-4 left-4 right-4 flex gap-2&quot;&gt;
        &lt;button
          onClick={onSpecialAbility}
          disabled={
            status === 'disabled' || status === 'damaged' || stats.energy &lt;= stats.maxEnergy * 0.5
          }
          className=&quot;flex-1 rounded-lg bg-blue-500/20 px-4 py-2 text-blue-300 hover:bg-blue-500/30 disabled:opacity-50</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/NullHunter.tsx (Line 9:2 - Line 26:65),
              src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 9:2 - Line 24:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn49"
              onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn49"
              onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup49"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
  position: { x: number; y: number };
  rotation: number;
}

// Helper function to create a FactionBehaviorConfig from string</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/NullHunter.tsx (Line 56:19 - Line 75:53),
              src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 52:20 - Line 71:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn50"
              onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn50"
              onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup50"
            ><code class="language-tsx text-sm text-gray-800">(false);
    }
  }, [status]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  // Create a proper FactionBehaviorConfig for tactics</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/EclipseScythe.tsx (Line 1:2 - Line 9:19),
              src/components/ships/FactionShips/lostNova/NullHunter.tsx (Line 1:2 - Line 9:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn52"
              onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn52"
              onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup52"
            ><code class="language-tsx text-sm text-gray-800">} from 'lucide-react';
import { useEffect, useState } from 'react';
import { FactionShipStats } from '../../../../types/ships/FactionShipTypes';
import { FactionBehaviorConfig, FactionBehaviorType } from '../../../../types/ships/FactionTypes';
import { ShipStatus } from '../../../../types/ships/ShipTypes';
import { WeaponMount } from '../../../../types/weapons/WeaponTypes';
import { LostNovaShip } from '../../common/LostNovaShip';

interface EclipseScytheProps</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/EclipseScythe.tsx (Line 9:2 - Line 34:14),
              src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 9:2 - Line 34:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn53"
              onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn53"
              onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup53"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
  position: { x: number; y: number };
  rotation: number;
}

// Helper function to create a FactionBehaviorConfig from string
const createFactionBehavior = (behavior: string): FactionBehaviorConfig =&gt; {
  return {
    formation: 'standard',
    behavior: behavior as FactionBehaviorType,
  };
};

export function EclipseScythe</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/EclipseScythe.tsx (Line 54:20 - Line
              74:14), src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 52:20 - Line
              76:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn54"
              onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn54"
              onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup54"
            ><code class="language-tsx text-sm text-gray-800">(false);
    }
  }, [status]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  // Create a proper FactionBehaviorConfig for tactics
  const tactics = createFactionBehavior('hit-and-run'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/DarkMatterReaper.tsx (Line 1:2 - Line 8:7),
              src/components/ships/FactionShips/lostNova/NullHunter.tsx (Line 1:2 - Line 9:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn55"
              onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn55"
              onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup55"
            ><code class="language-tsx text-sm text-gray-800">} from 'lucide-react';
import { useEffect, useState } from 'react';
import { FactionShipStats } from '../../../../types/ships/FactionShipTypes';
import { FactionBehaviorConfig, FactionBehaviorType } from '../../../../types/ships/FactionTypes';
import { ShipStatus } from '../../../../types/ships/ShipTypes';
import { WeaponMount } from '../../../../types/weapons/WeaponTypes';
import { LostNovaShip } from '../../common/LostNovaShip';
import</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/DarkMatterReaper.tsx (Line 10:2 - Line
              27:77), src/components/ships/FactionShips/spaceRats/RogueNebula.tsx (Line 9:2 - Line
              24:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn56"
              onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn56"
              onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup56"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
  position: { x: number; y: number };
  rotation: number;
}

// Ship-specific stats - kept for future implementation of ship stat scaling</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/lostNova/DarkMatterReaper.tsx (Line 99:13 - Line
              117:10), src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 54:7 - Line
              76:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn57"
              onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn57"
              onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup57"
            ><code class="language-tsx text-sm text-gray-800">]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  // Create a proper FactionBehaviorConfig for tactics
  const tactics = createFactionBehavior('stealth'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/StellarEquinox.tsx (Line 45:28 - Line
              65:4), src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 52:20 - Line
              72:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn58"
              onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn58"
              onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup58"
            ><code class="language-tsx text-sm text-gray-800">(false);
    }
  }, [status]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  return (
    &lt;div</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/EtherealGalleon.tsx (Line 8:2 - Line
              25:16), src/components/ships/FactionShips/equatorHorizon/StellarEquinox.tsx (Line 8:2
              - Line 25:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn60"
              onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn60"
              onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup60"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  position: { x: number; y: number };
  rotation: number;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
}

export function EtherealGalleon</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/EtherealGalleon.tsx (Line 45:23 -
              Line 68:17), src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 52:20 -
              Line 68:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn61"
              onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn61"
              onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup61"
            ><code class="language-tsx text-sm text-gray-800">(false);
    }
  }, [status]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  return (
    &lt;div className=&quot;relative&quot;&gt;
      &lt;EquatorHorizonShip
        id={id}
        name=&quot;Ethereal Galleon</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/CelestialArbiter.tsx (Line 8:2 - Line
              25:17), src/components/ships/FactionShips/equatorHorizon/StellarEquinox.tsx (Line 8:2
              - Line 25:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn63"
              onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn63"
              onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup63"
            ><code class="language-tsx text-sm text-gray-800">{
  id: string;
  status: ShipStatus;
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  position: { x: number; y: number };
  rotation: number;
  onFire: (weaponId: string) =&gt; void;
  onEngage?: () =&gt; void;
  onRetreat: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
}

export function CelestialArbiter</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/FactionShips/equatorHorizon/CelestialArbiter.tsx (Line 45:28 -
              Line 68:18), src/components/ships/FactionShips/spaceRats/RatKing.tsx (Line 52:20 -
              Line 68:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn64"
              onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn64"
              onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup64"
            ><code class="language-tsx text-sm text-gray-800">(false);
    }
  }, [status]);

  const mapStatus = (status: ShipStatus) =&gt; {
    switch (status) {
      case 'engaging':
        return 'engaging';
      case 'patrolling':
        return 'patrolling';
      case 'retreating':
        return 'retreating';
      case 'disabled':
        return 'disabled';
      default:
        return 'patrolling';
    }
  };

  return (
    &lt;div className=&quot;relative&quot;&gt;
      &lt;EquatorHorizonShip
        id={id}
        name=&quot;Celestial Arbiter</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ViewportOptimizedScatterPlot.tsx
              (Line 268:7 - Line 281:2),
              src/components/exploration/visualizations/charts/ViewportOptimizedScatterPlot.tsx
              (Line 238:7 - Line 251:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn65"
              onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn65"
              onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup65"
            ><code class="language-tsx text-sm text-gray-800">if (colorKey &amp;&amp; point[colorKey] !== undefined) {
        // Map the color value to the color scale
        const colorValue = Number(point[colorKey]);
        // Normalize to 0-1 range for color mapping
        const normalizedValue =
          (colorValue - dataBounds.yMin) / (dataBounds.yMax - dataBounds.yMin);
        // Get color index based on the normalized value
        const colorIndex = Math.floor(normalizedValue * (colors.length - 1));
        return getColor(colorIndex, colors);
      }
      // Default color based on index
      return getColor(index % colors.length, colors);
    },
    [colorKey, colors, dataBounds,</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ViewportOptimizedScatterPlot.tsx
              (Line 292:11 - Line 302:24),
              src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx (Line 374:11
              - Line 384:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn66"
              onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn66"
              onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup66"
            ><code class="language-tsx text-sm text-gray-800">const event = e as unknown as {
            xAxis?: Array&lt;{ domain: [number, number] }&gt;;
            yAxis?: Array&lt;{ domain: [number, number] }&gt;;
          };

          if (event &amp;&amp; event?.xAxis &amp;&amp; event?.yAxis &amp;&amp; event?.xAxis[0] &amp;&amp; event?.yAxis[0]) {
            const domain = {
              x: event?.xAxis[0].domain,
              y: event?.yAxis[0].domain,
            };
            debouncedViewportChange</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx (Line
              359:9 - Line 369:2),
              src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx (Line
              296:11 - Line 305:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn67"
              onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn67"
              onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup67"
            ><code class="language-tsx text-sm text-gray-800">const originalItem = data?.find(
          item =&gt;
            (item[xKey] === cell.originalX ||
              (typeof item[xKey] === 'object' &amp;&amp;
                (item[xKey] as Record&lt;string, unknown&gt;).x === cell.originalX)) &amp;&amp;
            (item[yKey] === cell.originalY ||
              (typeof item[yKey] === 'object' &amp;&amp;
                (item[yKey] as Record&lt;string, unknown&gt;).y === cell.originalY))
        );

        if (originalItem)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ScatterPlot.tsx (Line 174:10 - Line
              185:2), src/components/exploration/visualizations/charts/ScatterPlot.tsx (Line 150:5 -
              Line 161:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn69"
              onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn69"
              onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup69"
            ><code class="language-tsx text-sm text-gray-800">;

        // Ensure x and y values are numbers
        x = typeof x === 'number' ? x : (parseFloat(String(x)) ?? 0);
        y = typeof y === 'number' ? y : (parseFloat(String(y)) ?? 0);
        z = z &amp;&amp; typeof z === 'number' ? z : z ? parseFloat(String(z)) || pointSize : pointSize;

        return {
          x,
          y,
          z,
          name:</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/ResourceDistributionChart.tsx (Line
              186:5 - Line 197:49),
              src/components/exploration/visualizations/charts/ResourceFlowDiagram.tsx (Line 182:5 -
              Line 193:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn70"
              onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn70"
              onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup70"
            ><code class="language-tsx text-sm text-gray-800">if (interactive) {
      const zoom = d3
        .zoom&lt;SVGSVGElement, unknown&gt;()
        .scaleExtent([0.1, 4])
        .on('zoom', event =&gt; {
          container.attr('transform', event?.transform);
        });

      svg.call(zoom);
    }

    // Create D3 force simulation with proper typing</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/PredictionVisualization.tsx (Line
              209:7 - Line 214:3),
              src/components/exploration/visualizations/charts/PredictionVisualization.tsx (Line
              181:2 - Line 186:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn71"
              onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn71"
              onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup71"
            ><code class="language-tsx text-sm text-gray-800">.toFixed(2)}&lt;/Typography&gt;
            &lt;Typography variant=&quot;body2&quot;&gt;Predicted: {dataPoint.predicted.toFixed(2)}&lt;/Typography&gt;
            {dataPoint.error !== undefined &amp;&amp; (
              &lt;Typography variant=&quot;body2&quot;&gt;Error: {dataPoint.error.toFixed(2)}&lt;/Typography&gt;
            )}
          &lt;/</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/MemoryOptimizedCanvasChart.tsx (Line
              548:12 - Line 558:6),
              src/components/exploration/visualizations/charts/MemoryOptimizedCanvasChart.tsx (Line
              529:14 - Line 539:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn72"
              onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn72"
              onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup72"
            ><code class="language-tsx text-sm text-gray-800">) {
    return (
      &lt;div
        ref={containerRef}
        className={`${className} flex flex-col items-center justify-center rounded border border-solid border-opacity-10`}
        style={{
          width: typeof width === 'number' ? `${width}px` : width,
          height: typeof height === 'number' ? `${height}px` : height,
        }}
      &gt;
        &lt;Alert</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 34:2 - Line
              73:2), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx (Line
              58:2 - Line 98:67)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn74"
              onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn74"
              onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup74"
            ><code class="language-tsx text-sm text-gray-800">extends BaseChartProps {
  /** Key for X-axis values */
  xAxisKey: string;

  /** Keys for Y-axis values (multiple series) */
  yAxisKeys: string[];

  /** Whether to apply date formatting to x-axis values */
  dateFormat?: boolean;

  /** Whether to connect null data points */
  connectNulls?: boolean;

  /** Curve type for the lines */
  curveType?: 'linear' | 'monotone' | 'step' | 'stepAfter' | 'stepBefore' | 'natural';

  /** Whether to show grid lines */
  showGrid?: boolean;

  /** Whether to fill area under lines */
  fillArea?: boolean;

  /** Stroke width for the lines */
  strokeWidth?: number;

  /** X-axis label */
  xAxisLabel?: string;

  /** Y-axis label */
  yAxisLabel?: string;

  /** Whether to show dots on data points */
  showDots?: boolean;

  /** Whether to show the legend */
  showLegend?: boolean;

  /** Reference lines to display (e.g., thresholds) */
  referenceLines?: ReferenceLineType[];
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 78:10 - Line
              100:5), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 112:21 - Line 134:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn75"
              onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn75"
              onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup75"
            ><code class="language-tsx text-sm text-gray-800">({
  data,
  xAxisKey,
  yAxisKeys,
  width = '100%',
  height = 400,
  title,
  colors = [],
  dateFormat = false,
  customTooltip,
  theme = 'light',
  connectNulls = true,
  curveType = 'monotone',
  showGrid = true,
  fillArea = false,
  strokeWidth = 2,
  xAxisLabel,
  yAxisLabel,
  showDots = true,
  showLegend = true,
  referenceLines = [],
  className = '',
  animate = true</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 119:2 - Line
              142:18), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 341:2 - Line 364:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn76"
              onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn76"
              onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup76"
            ><code class="language-tsx text-sm text-gray-800">
      &gt;
        &lt;RechartsLineChart data={[]} /&gt;
      &lt;/BaseChart&gt;
    );
  }

  // Handle chart click
  const handleChartClick = (chartData: Record&lt;string, unknown&gt; | undefined, index: number) =&gt; {
    if (onElementClick &amp;&amp; chartData) {
      onElementClick(chartData, index);
    }
  };

  // Handle dot click event
  const handleDotClick = (event: DotClickEvent, index: number) =&gt; {
    if (onElementClick &amp;&amp; event &amp;&amp; event?.payload) {
      onElementClick(event?.payload, index);
    }
  };

  // Create the chart content
  const chartContent = (
    &lt;RechartsLineChart</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 180:9 - Line
              198:2), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 423:11 - Line 441:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn77"
              onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn77"
              onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup77"
            ><code class="language-tsx text-sm text-gray-800">/&gt;
      ))}

      {/* Render each data series as a line */}
      {yAxisKeys.map((key, index) =&gt; (
        &lt;Line
          key={key}
          type={curveType}
          dataKey={key}
          stroke={getColor(index, colors)}
          activeDot={
            showDots
              ? {
                  r: 6,
                  onClick: (e: DotClickEvent) =&gt; handleDotClick(e, index),
                }
              : false
          }
          dot={showDots}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/LineChart.tsx (Line 199:11 - Line
              204:2), src/components/exploration/visualizations/charts/VirtualizedLineChart.tsx
              (Line 442:13 - Line 447:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn78"
              onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn78"
              onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup78"
            ><code class="language-tsx text-sm text-gray-800">strokeWidth={strokeWidth}
          connectNulls={connectNulls}
          name={key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}
          fill={fillArea ? getColor(index, colors) + '33' : undefined} // Add transparency for fill
          fillOpacity={fillArea ? 0.2 : 0}
          isAnimationActive={animate}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 75:6 - Line 93:9),
              src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx (Line
              126:2 - Line 144:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn79"
              onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn79"
              onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup79"
            ><code class="language-tsx text-sm text-gray-800">,
  colors = [
    '#0a2f5c', // Dark blue
    '#0e4c92', // Navy blue
    '#3373c4', // Medium blue
    '#5a9bd4', // Light blue
    '#7fc8f8', // Sky blue
    '#a3d8f4', // Pale blue
    '#c6e7f5', // Very pale blue
    '#e1f3fb', // Almost white blue
    '#feebe2', // Very pale red
    '#fcc5c0', // Pale red
    '#fa9fb5', // Light red
    '#f768a1', // Pink
    '#dd3497', // Medium pink
    '#ae017e', // Dark pink
    '#7a0177', // Very dark pink/purple
  ],
  cellSize</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 171:5 - Line
              186:2), src/components/exploration/visualizations/charts/HeatMap.tsx (Line 149:5 -
              Line 164:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn80"
              onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn80"
              onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup80"
            ><code class="language-tsx text-sm text-gray-800">.split('.');
        let current: unknown = item;
        for (const part of parts) {
          if (
            current &amp;&amp;
            typeof current === 'object' &amp;&amp;
            part in (current as Record&lt;string, unknown&gt;)
          ) {
            current = (current as Record&lt;string, unknown&gt;)[part];
          } else {
            current = undefined;
            break;
          }
        }
        if (typeof current === 'number') {
          y</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 195:9 - Line
              210:6), src/components/exploration/visualizations/charts/HeatMap.tsx (Line 149:5 -
              Line 164:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn81"
              onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn81"
              onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup81"
            ><code class="language-tsx text-sm text-gray-800">.split('.');
        let current: unknown = item;
        for (const part of parts) {
          if (
            current &amp;&amp;
            typeof current === 'object' &amp;&amp;
            part in (current as Record&lt;string, unknown&gt;)
          ) {
            current = (current as Record&lt;string, unknown&gt;)[part];
          } else {
            current = undefined;
            break;
          }
        }
        if (typeof current === 'number') {
          value</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 284:11 - Line
              305:7), src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx
              (Line 286:27 - Line 370:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn82"
              onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn82"
              onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup82"
            ><code class="language-tsx text-sm text-gray-800">]
  );

  // Function to get color for a value
  const getColorForValue = useCallback(
    (value: number) =&gt; {
      if (colorAccessor &amp;&amp; data &amp;&amp; processedData) {
        // Find the original data point for this cell
        const cell = processedData.find(c =&gt; c.value === value);
        if (cell) {
          // Find the original data item
          const originalItem = data?.find(
            item =&gt;
              (item[xKey] === cell.originalX ||
                (typeof item[xKey] === 'object' &amp;&amp;
                  (item[xKey] as Record&lt;string, unknown&gt;).x === cell.originalX)) &amp;&amp;
              (item[yKey] === cell.originalY ||
                (typeof item[yKey] === 'object' &amp;&amp;
                  (item[yKey] as Record&lt;string, unknown&gt;).y === cell.originalY))
          );
          if (originalItem) {
            return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 304:13 - Line
              319:26), src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx
              (Line 305:14 - Line 320:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn83"
              onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn83"
              onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup83"
            ><code class="language-tsx text-sm text-gray-800">) {
            return colorAccessor(originalItem);
          }
        }
      }

      // Use gradient if no colorAccessor or original item not found
      if (valueRange === 0) return colors[Math.floor(colors.length / 2)];
      const normalizedValue = Math.max(0, Math.min(1, (value - effectiveMinValue) / valueRange));
      const colorIndex = Math.min(colors.length - 1, Math.floor(normalizedValue * colors.length));
      return colors[colorIndex];
    },
    [colorAccessor, data, processedData, xKey, yKey, valueRange, colors, effectiveMinValue]
  );

  // Handle click on a cell</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/HeatMap.tsx (Line 316:18 - Line
              334:2), src/components/exploration/visualizations/charts/ViewportOptimizedHeatMap.tsx
              (Line 353:13 - Line 370:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn84"
              onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn84"
              onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup84"
            ><code class="language-tsx text-sm text-gray-800">]
  );

  // Handle click on a cell
  const handleCellClick = useCallback(
    (cell: HeatMapCell) =&gt; {
      if (onElementClick) {
        const originalItem = data?.find(
          item =&gt;
            (item[xKey] === cell.originalX ||
              (typeof item[xKey] === 'object' &amp;&amp;
                (item[xKey] as Record&lt;string, unknown&gt;).x === cell.originalX)) &amp;&amp;
            (item[yKey] === cell.originalY ||
              (typeof item[yKey] === 'object' &amp;&amp;
                (item[yKey] as Record&lt;string, unknown&gt;).y === cell.originalY))
        );

        if (originalItem) {
          onElementClick(originalItem)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx (Line 622:5 -
              Line 631:67), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 550:5 - Line 559:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn85"
              onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn85"
              onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup85"
            ><code class="language-tsx text-sm text-gray-800">data?.forEach(item =&gt; {
      const x = Number(item[xAxisKey] ?? 0);
      const y = Number(item[yAxisKey] ?? 0);

      // Skip points outside the visible range
      if (x &lt; domains.x[0] || x &gt; domains.x[1] || y &lt; domains.y[0] || y &gt; domains.y[1]) {
        return;
      }

      // Convert to normalized device coordinates (WebGL space: -1 to 1)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 207:2 -
              Line 212:18), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 119:2 - Line 124:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn86"
              onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn86"
              onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup86"
            ><code class="language-tsx text-sm text-gray-800">| null&gt;(null);
  const [zoom, setZoom] = useState(1);
  const [pan, setPan] = useState({ x: 0, y: 0 });
  const [isDragging, setIsDragging] = useState(false);
  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });
  const [animationProgress</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 374:10 -
              Line 402:20), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 417:15 - Line 445:33)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn87"
              onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn87"
              onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup87"
            ><code class="language-tsx text-sm text-gray-800">.current.height = height;
    }
  }, []);

  // Debounced version of updateDimensions
  const debouncedUpdateDimensions = useMemo(
    () =&gt; debounce(updateDimensions, 100),
    [updateDimensions]
  );

  // Set up ResizeObserver
  useEffect(() =&gt; {
    updateDimensions();

    const observer = new ResizeObserver(debouncedUpdateDimensions);
    if (containerRef.current) {
      observer.observe(containerRef.current);
    }

    window.addEventListener('resize', debouncedUpdateDimensions);

    return () =&gt; {
      observer.disconnect();
      window.removeEventListener('resize', debouncedUpdateDimensions);
      debouncedUpdateDimensions.cancel();
    };
  }, [debouncedUpdateDimensions]);

  // Animation effect</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 452:7 -
              Line 462:37), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 466:7 - Line 476:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn88"
              onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn88"
              onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup88"
            ><code class="language-tsx text-sm text-gray-800">for (let i = 0; i &lt;= 10; i++) {
        const x = domains.x[0] + (i / 10) * (domains.x[1] - domains.x[0]);
        const xPixel = scales.x(x);

        ctx.beginPath();
        ctx.moveTo(xPixel, scales.y(domains.y[0]));
        ctx.lineTo(xPixel, scales.y(domains.y[1]));
        ctx.stroke();
      }

      // Y grid lines (5 horizontal lines)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 464:2 -
              Line 498:42), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 478:3 - Line 512:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn89"
              onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn89"
              onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup89"
            ><code class="language-tsx text-sm text-gray-800">) * (domains.y[1] - domains.y[0]);
        const yPixel = scales.y(y);

        ctx.beginPath();
        ctx.moveTo(scales.x(domains.x[0]), yPixel);
        ctx.lineTo(scales.x(domains.x[1]), yPixel);
        ctx.stroke();
      }
    }

    // Draw axes
    if (showAxes) {
      ctx.strokeStyle = theme.palette.mode === 'dark' ? '#fff' : '#000';
      ctx.lineWidth = 2;

      // X-axis
      ctx.beginPath();
      ctx.moveTo(scales.x(domains.x[0]), scales.y(0));
      ctx.lineTo(scales.x(domains.x[1]), scales.y(0));
      ctx.stroke();

      // Y-axis
      ctx.beginPath();
      ctx.moveTo(scales.x(0), scales.y(domains.y[0]));
      ctx.lineTo(scales.x(0), scales.y(domains.y[1]));
      ctx.stroke();
    }

    // Draw axis labels if enabled
    if (showAxisLabels) {
      ctx.fillStyle = theme.palette.mode === 'dark' ? '#fff' : '#000';
      ctx.font = '12px Arial';
      ctx.textAlign = 'center';

      // X-axis labels (5 evenly spaced labels)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 514:2 -
              Line 540:15), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 523:3 - Line 549:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn90"
              onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn90"
              onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup90"
            ><code class="language-tsx text-sm text-gray-800">) * (domains.y[1] - domains.y[0]);
        const yPixel = scales.y(y);

        ctx.fillText(y.toFixed(1), scales.x(domains.x[0]) - 10, yPixel + 4);
      }

      // Axis titles
      if (xAxisLabel) {
        ctx.textAlign = 'center';
        ctx.fillText(
          xAxisLabel,
          scales.x(domains.x[0] + (domains.x[1] - domains.x[0]) / 2),
          canvas.height - 10
        );
      }

      if (yAxisLabel) {
        ctx.save();
        ctx.translate(15, scales.y(domains.y[0] + (domains.y[1] - domains.y[0]) / 2));
        ctx.rotate(-Math.PI / 2);
        ctx.textAlign = 'center';
        ctx.fillText(yAxisLabel, 0, 0);
        ctx.restore();
      }
    }

    // Draw legend</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 569:3 -
              Line 585:8), src/components/exploration/visualizations/charts/CanvasLineChart.tsx
              (Line 551:3 - Line 567:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn91"
              onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn91"
              onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup91"
            ><code class="language-tsx text-sm text-gray-800">;

        legendItems.forEach(item =&gt; {
          // Draw color box
          ctx.fillStyle = item?.color;
          ctx.fillRect(x, y - 9, 12, 9);
          ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
          ctx.strokeRect(x, y - 9, 12, 9);

          // Draw label
          ctx.fillStyle = theme.palette.mode === 'dark' ? '#fff' : '#000';
          ctx.textAlign = 'left';
          ctx.fillText(item?.label, x + 16, y);

          x += ctx.measureText(item?.label).width + 30;
        });
      } else if (legendPosition === 'right'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 587:3 -
              Line 601:2), src/components/exploration/visualizations/charts/CanvasLineChart.tsx
              (Line 551:3 - Line 565:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn92"
              onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn92"
              onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup92"
            ><code class="language-tsx text-sm text-gray-800">;

        legendItems.forEach(item =&gt; {
          // Draw color box
          ctx.fillStyle = item?.color;
          ctx.fillRect(x, y - 9, 12, 9);
          ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
          ctx.strokeRect(x, y - 9, 12, 9);

          // Draw label
          ctx.fillStyle = theme.palette.mode === 'dark' ? '#fff' : '#000';
          ctx.textAlign = 'left';
          ctx.fillText(item?.label, x + 16, y);

          y</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 605:2 -
              Line 622:2), src/components/exploration/visualizations/charts/CanvasLineChart.tsx
              (Line 569:2 - Line 603:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn93"
              onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn93"
              onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup93"
            ><code class="language-tsx text-sm text-gray-800">10;

        legendItems.forEach(item =&gt; {
          // Draw color box
          ctx.fillStyle = item?.color;
          ctx.fillRect(x, y - 9, 12, 9);
          ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
          ctx.strokeRect(x, y - 9, 12, 9);

          // Draw label
          ctx.fillStyle = theme.palette.mode === 'dark' ? '#fff' : '#000';
          ctx.textAlign = 'left';
          ctx.fillText(item?.label, x + 16, y);

          y += 20;
        });
      }
    }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 747:7 -
              Line 759:16), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 725:7 - Line 737:22)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn94"
              onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn94"
              onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup94"
            ><code class="language-tsx text-sm text-gray-800">setIsDragging(true);
      setDragStart({ x: e.clientX, y: e.clientY });
    },
    [interactive]
  );

  // Handle mouse up for panning
  const handleMouseUp = useCallback(() =&gt; {
    setIsDragging(false);
  }, []);

  // Handle mouse move for panning
  const handleMouseMove</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 769:2 -
              Line 781:35), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 752:2 - Line 764:61)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn95"
              onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn95"
              onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup95"
            ><code class="language-tsx text-sm text-gray-800">);

      // If dragging, handle panning
      if (isDragging &amp;&amp; interactive) {
        const dx = e.clientX - dragStart.x;
        const dy = e.clientY - dragStart.y;

        setPan(prev =&gt; ({ x: prev.x + dx, y: prev.y + dy }));
        setDragStart({ x: e.clientX, y: e.clientY });
        return;
      }

      // Otherwise, handle hover effects</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 842:10 -
              Line 861:12), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 805:14 - Line 824:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn96"
              onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn96"
              onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup96"
            ><code class="language-tsx text-sm text-gray-800">,
    ]
  );

  // Handle wheel for zooming
  const handleWheel = useCallback(
    (e: React.WheelEvent&lt;HTMLCanvasElement&gt;) =&gt; {
      if (!interactive) return;

      e.preventDefault();

      const zoomFactor = e.deltaY &lt; 0 ? 1.1 : 0.9;
      setZoom(prev =&gt; Math.max(0.1, Math.min(10, prev * zoomFactor)));
    },
    [interactive]
  );

  // Render the visualization
  useEffect(() =&gt; {
    renderChart</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 862:18 -
              Line 883:2), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 836:5 - Line 857:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn97"
              onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn97"
              onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup97"
            ><code class="language-tsx text-sm text-gray-800">]);

  // If no data, show error
  if (!data || data?.length === 0) {
    return (
      &lt;div
        className={`${className} flex flex-col items-center justify-center rounded border border-solid border-opacity-10`}
        style={{
          width: typeof width === 'number' ? `${width}px` : width,
          height: typeof height === 'number' ? `${height}px` : height,
        }}
      &gt;
        &lt;Typography variant=&quot;body1&quot; color=&quot;text.secondary&quot;&gt;
          {errorMessage || 'No data available'}
        &lt;/Typography&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div
      className={`</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/CanvasLineChart.tsx (Line 886:7 -
              Line 901:13), src/components/exploration/visualizations/charts/CanvasScatterPlot.tsx
              (Line 862:9 - Line 877:36)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn98"
              onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn98"
              onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup98"
            ><code class="language-tsx text-sm text-gray-800">,
      }}
    &gt;
      {/* Chart title and subtitle */}
      {(title || subtitle) &amp;&amp; (
        &lt;div className=&quot;mb-2 text-center&quot;&gt;
          {title &amp;&amp; &lt;Typography variant=&quot;h6&quot;&gt;{title}&lt;/Typography&gt;}
          {subtitle &amp;&amp; (
            &lt;Typography variant=&quot;body2&quot; color=&quot;text.secondary&quot;&gt;
              {subtitle}
            &lt;/Typography&gt;
          )}
        &lt;/div&gt;
      )}

      {/* Legend */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/charts/BaseChart.tsx (Line 210:2 - Line
              215:38), src/components/exploration/visualizations/charts/BaseChart.tsx (Line 181:13 -
              Line 186:51)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn99"
              onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn99"
              onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup99"
            ><code class="language-tsx text-sm text-gray-800">) {
    return (
      &lt;div className={`chart-container ${themeClasses} rounded-lg p-4 shadow-md ${className}`}&gt;
        {title &amp;&amp; &lt;h3 className=&quot;chart-title mb-2 text-lg font-semibold&quot;&gt;{title}&lt;/h3&gt;}
        {subtitle &amp;&amp; &lt;p className=&quot;chart-subtitle mb-4 text-sm text-gray-500&quot;&gt;{subtitle}&lt;/p&gt;}
        &lt;div className=&quot;flex h-64 items-center justify-center</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line 185:5 - Line
              190:19), src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line
              169:4 - Line 174:18)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn101"
              onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn101"
              onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup101"
            ><code class="language-tsx text-sm text-gray-800">: (data: Record&lt;string, unknown&gt;, chartWidth: number, chartHeight: number, options?: VisualizationOptions) =&gt; {
      if (!Array.isArray(data)) {
        return &lt;VisualizationErrorBoundary fallback={&lt;p&gt;Invalid data format for Line Chart.&lt;/p&gt;}&gt;&lt;div /&gt;&lt;/VisualizationErrorBoundary&gt;;
      }
      return (
        &lt;LineChartComponent</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line 191:11 - Line
              201:8), src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line
              175:11 - Line 185:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn102"
              onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn102"
              onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup102"
            ><code class="language-tsx text-sm text-gray-800">data={data as Record&lt;string, unknown&gt;[]}
          width={chartWidth}
          height={chartHeight}
          xAxisKey={(options?.xAxisKey as string) || 'label'}
          yAxisKeys={(options?.yAxisKeys as string[]) || ['value']}
          {...(options as Record&lt;string, unknown&gt;)}
        /&gt;
      );
    },

    scatter</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line 201:8 - Line
              206:12), src/components/exploration/unified/core/BaseAnalysisVisualizer.tsx (Line
              169:4 - Line 174:18)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn103"
              onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn103"
              onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup103"
            ><code class="language-tsx text-sm text-gray-800">: (data: Record&lt;string, unknown&gt;, chartWidth: number, chartHeight: number, options?: VisualizationOptions) =&gt; {
      if (!Array.isArray(data)) {
        return &lt;VisualizationErrorBoundary fallback={&lt;p&gt;Invalid data format for Scatter Plot.&lt;/p&gt;}&gt;&lt;div /&gt;&lt;/VisualizationErrorBoundary&gt;;
      }
      return (
        &lt;ScatterPlot</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/unified/context/ExplorationContext.tsx (Line 356:11 - Line
              362:78), src/components/exploration/unified/context/ExplorationContext.tsx (Line
              303:11 - Line 309:77)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn104"
              onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn104"
              onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup104"
            ><code class="language-tsx text-sm text-gray-800">const dx = coords.x - system.coordinates.x;
          const dy = coords.y - system.coordinates.y;
          const dz = (coords.z ?? 0) - (system.coordinates.z ?? 0);

          const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);

          // Consider the resource part of the system if it's within a certain distance</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 1:2 - Line 21:6),
              src/components/buildings/modules/academy/OfficerDetails.tsx (Line 1:2 - Line 21:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn105"
              onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn105"
              onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup105"
            ><code class="language-tsx text-sm text-gray-800">} from 'lucide-react';

interface Officer {
  id: string;
  name: string;
  portrait: string;
  level: number;
  xp: number;
  nextLevelXp: number;
  role: 'Squad Leader' | 'Captain';
  status: 'training' | 'assigned' | 'available';
  specialization: 'War' | 'Recon' | 'Mining';
  skills: {
    combat: number;
    leadership: number;
    technical: number;
  };
  assignedTo?: string;
  trainingProgress?: number;
  traits: string[];
  stats</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 36:17 - Line 51:2),
              src/components/buildings/modules/academy/OfficerDetails.tsx (Line 37:20 - Line 52:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn106"
              onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn106"
              onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup106"
            ><code class="language-tsx text-sm text-gray-800">) {
  const getSpecializationColor = () =&gt; {
    switch (officer.specialization) {
      case 'War':
        return 'red';
      case 'Recon':
        return 'cyan';
      case 'Mining':
        return 'amber';
      default:
        return 'blue';
    }
  };

  const color = getSpecializationColor();
  const particleCount = quality === 'high' ? 8</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 166:9 - Line 183:2),
              src/components/buildings/modules/academy/OfficerDetails.tsx (Line 63:13 - Line 79:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn107"
              onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn107"
              onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup107"
            ><code class="language-tsx text-sm text-gray-800">{officer.status === 'training' &amp;&amp; (
          &lt;&gt;
            &lt;div className=&quot;absolute inset-0 animate-pulse bg-gradient-to-t from-violet-500/20&quot; /&gt;
            {Array.from({ length: particleCount }).map((_, i) =&gt; (
              &lt;div
                key={i}
                className=&quot;absolute h-1 w-1 rounded-full bg-violet-400&quot;
                style={{
                  left: `${Math.random() * 100}%`,
                  top: `${Math.random() * 100}%`,
                  animation: `float ${1 + Math.random()}s infinite`,
                }}
              /&gt;
            ))}
          &lt;/&gt;
        )}

        {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 195:5 - Line 210:13),
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 87:5 - Line 102:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn108"
              onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn108"
              onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup108"
            ><code class="language-tsx text-sm text-gray-800">&quot;&gt;
        &lt;div className=&quot;mb-1 flex justify-between text-xs&quot;&gt;
          &lt;span className=&quot;text-gray-400&quot;&gt;Level {officer.level}&lt;/span&gt;
          &lt;span className=&quot;text-gray-400&quot;&gt;
            {officer.xp}/{officer.nextLevelXp} XP
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;div className=&quot;h-1 overflow-hidden rounded-full bg-gray-700&quot;&gt;
          &lt;div
            className={`h-full bg-${color}-500 rounded-full`}
            style={{ width: `${(officer.xp / officer.nextLevelXp) * 100}%` }}
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Skills */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 236:7 - Line 278:2),
              src/components/buildings/modules/academy/OfficerCard.tsx (Line 102:9 - Line 144:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn109"
              onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn109"
              onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup109"
            ><code class="language-tsx text-sm text-gray-800">{/* Stats */}
      &lt;div className=&quot;mb-4 grid grid-cols-3 gap-2&quot;&gt;
        &lt;div title={`Combat rating affects battle performance`}&gt;
          &lt;div className=&quot;mb-1 flex items-center text-xs text-gray-500&quot;&gt;
            &lt;Sword className=&quot;mr-1 h-3 w-3&quot; /&gt;
            Combat
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-300&quot;&gt;{officer.stats.combat}&lt;/div&gt;
        &lt;/div&gt;
        &lt;div title={`Leadership affects squad coordination`}&gt;
          &lt;div className=&quot;mb-1 flex items-center text-xs text-gray-500&quot;&gt;
            &lt;Users className=&quot;mr-1 h-3 w-3&quot; /&gt;
            Leadership
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-300&quot;&gt;{officer.stats.leadership}&lt;/div&gt;
        &lt;/div&gt;
        &lt;div title={`Technical affects ship systems`}&gt;
          &lt;div className=&quot;mb-1 flex items-center text-xs text-gray-500&quot;&gt;
            &lt;Database className=&quot;mr-1 h-3 w-3&quot; /&gt;
            Technical
          &lt;/div&gt;
          &lt;div className=&quot;text-sm text-gray-300&quot;&gt;{officer.stats.technical}&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Status Indicators */}
      &lt;div className=&quot;flex items-center space-x-2&quot;&gt;
        {officer.status === 'training' &amp;&amp; (
          &lt;div className=&quot;flex items-center text-xs text-violet-400&quot;&gt;
            &lt;Star className=&quot;mr-1 h-3 w-3&quot; /&gt;
            In Training
          &lt;/div&gt;
        )}
        {officer.assignedTo &amp;&amp; (
          &lt;div className=&quot;flex items-center text-xs text-cyan-400&quot;&gt;
            &lt;Radar className=&quot;mr-1 h-3 w-3&quot; /&gt;
            On Mission
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    &lt;/button&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/academy/OfficerAcademy.tsx (Line 16:19 - Line 43:21),
              src/components/buildings/modules/academy/OfficerDetails.tsx (Line 1:15 - Line 28:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn110"
              onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn110"
              onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup110"
            ><code class="language-tsx text-sm text-gray-800">;

interface Officer {
  id: string;
  name: string;
  portrait: string;
  level: number;
  xp: number;
  nextLevelXp: number;
  role: 'Squad Leader' | 'Captain';
  status: 'training' | 'assigned' | 'available';
  specialization: 'War' | 'Recon' | 'Mining';
  skills: {
    combat: number;
    leadership: number;
    technical: number;
  };
  assignedTo?: string;
  trainingProgress?: number;
  traits: string[];
  stats: {
    combat: number;
    leadership: number;
    technical: number;
  };
}

interface OfficersAcademyProps</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/MiningHub/MiningWindow.tsx (Line 68:2 - Line 85:11),
              src/components/buildings/modules/MiningHub/ResourceNode.tsx (Line 5:46 - Line 21:18)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn111"
              onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn111"
              onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup111"
            ><code class="language-tsx text-sm text-gray-800">;

interface Resource {
  id: string;
  name: string;
  type: 'mineral' | ResourceType.GAS | ResourceType.EXOTIC;
  abundance: number;
  distance: number;
  extractionRate: number;
  depletion: number;
  priority: number;
  thresholds: {
    min: number;
    max: number;
  };
}

interface MiningShip</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/MiningHub/MiningWindow.tsx (Line 717:13 - Line
              738:2), src/components/buildings/modules/MiningHub/MiningWindow.tsx (Line 296:7 - Line
              316:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn112"
              onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn112"
              onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup112"
            ><code class="language-tsx text-sm text-gray-800">.sort((a, b) =&gt; {
              let comparison = 0;
              switch (sortBy) {
                case 'priority':
                  comparison = a.priority - b.priority;
                  break;
                case 'name':
                  comparison = a.name.localeCompare(b.name);
                  break;
                case 'type':
                  comparison = a.type.localeCompare(b.type);
                  break;
                case 'abundance':
                  comparison = b.abundance - a.abundance;
                  break;
                case 'distance':
                  comparison = a.distance - b.distance;
                  break;
              }
              return sortOrder === 'asc' ? comparison : -comparison;
            })
            .</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/MiningHub/MineralProcessingCentre.tsx (Line 106:2 -
              Line 130:51), src/components/buildings/modules/MiningHub/MiningWindow.tsx (Line 26:21
              - Line 50:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn113"
              onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn113"
              onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup113"
            ><code class="language-tsx text-sm text-gray-800">;

  // Mock storage data
  const mockStorageData = [
    {
      id: 'iron-storage',
      resourceType: ResourceType.IRON,
      currentAmount: 8500,
      maxCapacity: 10000,
      refiningAmount: 250,
      refiningProgress: 0.65,
      transferRate: 25,
    },
    {
      id: 'helium-storage',
      resourceType: ResourceType.HELIUM,
      currentAmount: 2800,
      maxCapacity: 5000,
      refiningAmount: 100,
      refiningProgress: 0.3,
      transferRate: 15,
    },
  ];

  // Use resourcesByType to filter resources by type</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/MiningHub/MineralProcessingCentre.tsx (Line 154:10 -
              Line 159:2), src/components/buildings/modules/MiningHub/MiningWindow.tsx (Line 320:8 -
              Line 325:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn114"
              onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn114"
              onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup114"
            ><code class="language-tsx text-sm text-gray-800">(() =&gt; {
    const tierBonuses = {
      1: { extractionRate: 1, storageCapacity: 1, efficiency: 1 },
      2: { extractionRate: 1.5, storageCapacity: 1.5, efficiency: 1.25 },
      3: { extractionRate: 2, storageCapacity: 2, efficiency: 1.5 },
    };</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ReconShipStatus.tsx (Line 1:1 - Line
              53:2), src/components/ships/player/variants/reconships/ReconShipStatus.tsx (Line 1:1 -
              Line 53:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn116"
              onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn116"
              onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup116"
            ><code class="language-tsx text-sm text-gray-800">import { ChevronRight, Rocket } from 'lucide-react';

interface ReconShip {
  id: string;
  name: string;
  status: 'idle' | 'scanning' | 'investigating' | 'returning';
  targetSector?: string;
  experience: number;
  specialization: 'mapping' | 'anomaly' | 'resource';
  efficiency: number;
}

interface ReconShipStatusProps {
  ships: ReconShip[];
}

export function ReconShipStatus({ ships }: ReconShipStatusProps) {
  return (
    &lt;div className=&quot;mt-6 rounded-lg bg-gray-800/50 p-4&quot;&gt;
      &lt;h3 className=&quot;mb-3 text-sm font-medium text-gray-300&quot;&gt;Active Recon Ships&lt;/h3&gt;
      &lt;div className=&quot;space-y-2&quot;&gt;
        {ships.map(ship =&gt; (
          &lt;div
            key={ship.id}
            className=&quot;flex items-center justify-between rounded-lg bg-gray-800 p-3&quot;
          &gt;
            &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
              &lt;Rocket
                className={`h-5 w-5 ${
                  ship.status === 'scanning'
                    ? 'text-teal-400'
                    : ship.status === 'investigating'
                      ? 'text-yellow-400'
                      : ship.status === 'returning'
                        ? 'text-blue-400'
                        : 'text-gray-400'
                }`}
              /&gt;
              &lt;div&gt;
                &lt;div className=&quot;text-sm font-medium text-gray-200&quot;&gt;{ship.name}&lt;/div&gt;
                &lt;div className=&quot;text-xs text-gray-400&quot;&gt;
                  {ship.status.charAt(0).toUpperCase() + ship.status.slice(1)} • XP:{' '}
                  {ship.experience.toLocaleString()}
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;ChevronRight className=&quot;h-5 w-5 text-gray-500&quot; /&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ExplorationWindow.tsx (Line 136:2 -
              Line 167:16), src/components/buildings/modules/MiningHub/MiningMap.tsx (Line 34:2 -
              Line 65:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn117"
              onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn117"
              onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup117"
            ><code class="language-tsx text-sm text-gray-800">useRef({ x: 0, y: 0 });

  const handleMouseDown = (e: React.MouseEvent) =&gt; {
    isDragging.current = true;
    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseMove = (e: React.MouseEvent) =&gt; {
    if (!isDragging.current) {
      return;
    }

    const deltaX = e.clientX - lastPosition.current.x;
    const deltaY = e.clientY - lastPosition.current.y;

    setPosition(prev =&gt; ({
      x: prev.x + deltaX,
      y: prev.y + deltaY,
    }));

    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseUp = () =&gt; {
    isDragging.current = false;
  };

  const handleZoom = (delta: number) =&gt; {
    setZoom(prev =&gt; Math.max(0.5, Math.min(2, prev + delta)));
  };

  const filteredSectors</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ExplorationWindow.tsx (Line 236:2 -
              Line 252:3), src/components/buildings/modules/academy/OfficerAcademy.tsx (Line 133:2 -
              Line 150:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn118"
              onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn118"
              onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup118"
            ><code class="language-tsx text-sm text-gray-800">},
            ].map(({ id, label, icon: Icon }) =&gt; (
              &lt;button
                key={id}
                onClick={() =&gt; setFilter(id as FilterType)}
                className={`flex items-center space-x-2 rounded-lg px-3 py-2 ${
                  filter === id
                    ? 'bg-teal-600 text-white'
                    : 'bg-gray-800 text-gray-400 hover:bg-gray-700'
                }`}
              &gt;
                &lt;Icon className=&quot;h-4 w-4&quot; /&gt;
                &lt;span&gt;{label}&lt;/span&gt;
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ExplorationTutorial.tsx (Line 41:25 -
              Line 60:30), src/components/buildings/modules/MiningHub/MiningTutorial.tsx (Line 47:20
              - Line 66:32)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn119"
              onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn119"
              onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup119"
            ><code class="language-tsx text-sm text-gray-800">) {
  const [currentStep, setCurrentStep] = React.useState(0);

  const nextStep = () =&gt; {
    if (currentStep &lt; tutorialSteps.length - 1) {
      setCurrentStep(prev =&gt; prev + 1);
    } else {
      onClose();
    }
  };

  const step = tutorialSteps[currentStep];
  const Icon = step.icon;

  return (
    &lt;div className=&quot;fixed inset-0 z-50 flex items-center justify-center bg-black/50&quot;&gt;
      &lt;div className=&quot;mx-4 w-full max-w-md rounded-lg bg-gray-800 p-6&quot;&gt;
        &lt;div className=&quot;mb-6 flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex items-center space-x-3&quot;&gt;
            &lt;div className=&quot;rounded-lg bg-teal-500/20 p-2</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ExplorationTutorial.tsx (Line 61:22 -
              Line 89:108), src/components/buildings/modules/MiningHub/MiningTutorial.tsx (Line
              67:24 - Line 95:112)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn120"
              onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn120"
              onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup120"
            ><code class="language-tsx text-sm text-gray-800">&quot; /&gt;
            &lt;/div&gt;
            &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{step.title}&lt;/h3&gt;
          &lt;/div&gt;
          &lt;button
            onClick={onClose}
            className=&quot;rounded-full p-1 transition-colors hover:bg-gray-700&quot;
          &gt;
            &lt;X className=&quot;h-5 w-5 text-gray-400&quot; /&gt;
          &lt;/button&gt;
        &lt;/div&gt;

        &lt;p className=&quot;mb-6 text-gray-300&quot;&gt;{step.description}&lt;/p&gt;

        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;div className=&quot;flex space-x-1&quot;&gt;
            {tutorialSteps.map((_, index) =&gt; (
              &lt;div
                key={index}
                className={`h-2 w-2 rounded-full ${
                  index === currentStep ? 'bg-teal-500' : 'bg-gray-600'
                }`}
              /&gt;
            ))}
          &lt;/div&gt;

          &lt;button
            onClick={nextStep}
            className=&quot;flex items-center space-x-2 rounded-lg bg-teal-600 px-4 py-2 text-white transition-colors hover:bg-teal-700</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/modules/ExplorationHub/ExplorationControls.tsx (Line 1:15 -
              Line 22:25), src/components/buildings/modules/ExplorationHub/ExplorationWindow.tsx
              (Line 19:20 - Line 40:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn121"
              onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn121"
              onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup121"
            ><code class="language-tsx text-sm text-gray-800">;

interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
}

interface Anomaly {
  id: string;
  type: 'artifact' | 'signal' | 'phenomenon';
  severity: 'low' | 'medium' | 'high';
  description: string;
  investigated: boolean;
}

interface ExplorationControlsProps</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/ui/components/inputs/Slider.tsx (Line 184:12 - Line 196:11),
              src/ui/components/inputs/Switch.tsx (Line 121:9 - Line 133:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn125"
              onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn125"
              onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup125"
            ><code class="language-tsx text-sm text-gray-800">,
  onFocus,
  onBlur,
  validate,
  required,
  
  // Rest of props
  ...rest
}, ref) =&gt; {
  // Internal state
  const [isValidated, setIsValidated] = useState(false);
  const [validationError, setValidationError] = useState&lt;string | undefined&gt;(undefined);
  const [localValue</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/ui/components/inputs/Input.tsx (Line 259:8 - Line 269:15),
              src/ui/components/inputs/Select.tsx (Line 376:9 - Line 386:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn126"
              onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn126"
              onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup126"
            ><code class="language-tsx text-sm text-gray-800">${Math.random().toString(36).substring(2, 9)}`;
  
  // Determine hidden label for accessibility
  const ariaLabel = hideLabel &amp;&amp; typeof label === 'string' ? label : undefined;
  
  return (
    &lt;div className={inputContainerClassName} style={style}&gt;
      {label &amp;&amp; !hideLabel &amp;&amp; (
        &lt;label 
          htmlFor={inputId}
          className=&quot;ui-input-label</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/ui/components/inputs/Checkbox.tsx (Line 211:16 - Line 230:9),
              src/ui/components/inputs/Radio.tsx (Line 187:13 - Line 206:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn127"
              onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn127"
              onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup127"
            ><code class="language-tsx text-sm text-gray-800">}
        
        {/* Render label on the right by default */}
        {labelPosition === 'right' &amp;&amp; labelElement}
      &lt;/div&gt;
      
      {/* Helper text or error message */}
      {(helperText || hasError) &amp;&amp; (
        &lt;div 
          className={`ui-checkbox-helper-text ${hasError ? 'ui-checkbox-error-text' : ''}`}
          id={hasError ? `${checkboxId}-error` : undefined}
        &gt;
          {hasError ? errorMessage : helperText}
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
});

Checkbox</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/NetworkGraph.tsx (Line 540:7 - Line 546:41),
              src/components/ui/visualization/NetworkGraph.tsx (Line 262:7 - Line 267:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn128"
              onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn128"
              onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup128"
            ><code class="language-tsx text-sm text-gray-800">for (const edge of edges) {
        const source = simulationNodes.find(n =&gt; n.id === edge.source);
        const target = simulationNodes.find(n =&gt; n.id === edge.target);
        
        if (!source || !target || !source.position || !target.position) continue;
        
        // Check if cursor is near the edge line</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/LazyResourceFlowDiagram.tsx (Line 16:1 - Line 29:38),
              src/components/ui/visualization/ResourceFlowDiagram.tsx (Line 13:1 - Line 26:38)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn129"
              onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn129"
              onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup129"
            ><code class="language-tsx text-sm text-gray-800">export interface ResourceFlowNode {
  id: string;
  name: string;
  type: FlowNodeType;
  resources?: ResourceType[];
  capacity?: number;
  currentLoad?: number;
  efficiency?: number;
  status?: 'active' | 'inactive' | 'maintenance' | 'error';
  position?: { x: number; y: number };
  metadata?: Record&lt;string, string | number | boolean&gt;;
}

// Define ResourceFlowConnection type</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/LazyResourceFlowDiagram.tsx (Line 30:1 - Line 42:33),
              src/components/ui/visualization/ResourceFlowDiagram.tsx (Line 27:1 - Line 39:29)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn130"
              onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn130"
              onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup130"
            ><code class="language-tsx text-sm text-gray-800">export interface ResourceFlowConnection {
  id: string;
  source: string;
  target: string;
  resourceTypes: ResourceType[];
  maxFlow?: number;
  currentFlow?: number;
  priority?: number;
  active?: boolean;
  metadata?: Record&lt;string, string | number | boolean&gt;;
}

// Loading placeholder component</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/FlowDiagram.tsx (Line 415:5 - Line 429:34),
              src/components/exploration/visualizations/charts/ResourceDistributionChart.tsx (Line
              183:5 - Line 193:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn131"
              onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn131"
              onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup131"
            ><code class="language-tsx text-sm text-gray-800">const container = svg.append('g').attr('class', 'container');

    // Add zoom behavior if interactive
    if (interactive) {
      const zoom = d3
        .zoom&lt;SVGSVGElement, unknown&gt;()
        .scaleExtent([0.1, 4])
        .on('zoom', event =&gt; {
          container.attr('transform', event?.transform);
        });

      svg.call(zoom);
    }

    // Create arrow markers for links</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/FlowDiagram.tsx (Line 471:2 - Line 480:6),
              src/components/ui/visualization/FlowDiagram.tsx (Line 435:12 - Line 444:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn132"
              onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn132"
              onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup132"
            ><code class="language-tsx text-sm text-gray-800">)
        .attr('viewBox', '-10 -5 10 10')
        .attr('refX', 0)
        .attr('refY', 0)
        .attr('orient', 'auto')
        .attr('markerWidth', 8)
        .attr('markerHeight', 8)
        .append('path')
        .attr('d', 'M-10,-5L0,0L-10,5')
        .attr('fill', color</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/CustomShaderVisualization.tsx (Line 95:17 - Line
              102:36), src/components/ui/visualization/DataHighlightVisualization.tsx (Line 104:13 -
              Line 111:36)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn133"
              onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn133"
              onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup133"
            ><code class="language-tsx text-sm text-gray-800">,
}) =&gt; {
  const canvasRef = useRef&lt;HTMLCanvasElement&gt;(null);
  const containerRef = useRef&lt;HTMLDivElement&gt;(null);
  const shaderManagerRef = useRef&lt;WebGLShaderManager | null&gt;(null);
  const [isInitialized, setIsInitialized] = useState(false);

  // Register with component registry</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/CustomShaderVisualization.tsx (Line 107:2 - Line
              151:30), src/components/ui/visualization/DataHighlightVisualization.tsx (Line 109:6 -
              Line 153:34)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn134"
              onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn134"
              onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup134"
            ><code class="language-tsx text-sm text-gray-800">);

  // Prepare data for WebGL rendering
  const { positions, dataValues, dataRange } = useMemo(() =&gt; {
    const pos: Position[] = [];
    const values = new Float32Array(data?.length);
    let min = Infinity;
    let max = -Infinity;

    data?.forEach((point, index) =&gt; {
      pos.push({ x: point.x, y: point.y });
      values[index] = point.value;

      min = Math.min(min, point.value);
      max = Math.max(max, point.value);
    });

    return {
      positions: pos,
      dataValues: values,
      dataRange: [min, max] as [number, number],
    };
  }, [data]);

  // Initialize WebGL shader manager
  useEffect(() =&gt; {
    if (!canvasRef.current) return;

    const manager = new WebGLShaderManager();
    const success = manager.initialize(canvasRef.current);

    if (success) {
      shaderManagerRef.current = manager;
      setIsInitialized(true);
    }

    return () =&gt; {
      if (shaderManagerRef.current) {
        shaderManagerRef.current.dispose();
        shaderManagerRef.current = null;
      }
    };
  }, []);

  // Handle component lifecycle</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/CustomShaderVisualization.tsx (Line 194:13 - Line
              209:13), src/components/ui/visualization/DataHighlightVisualization.tsx (Line 174:7 -
              Line 191:18)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn135"
              onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn135"
              onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup135"
            ><code class="language-tsx text-sm text-gray-800">, dataValues, positions, width, height);
    };

    // Single render if not animating
    if (!animate) {
      renderFrame();
      return;
    }

    // Start animation loop
    manager.startAnimationLoop(renderFrame);

    return () =&gt; {
      manager.stopAnimationLoop();
    };
  }, [isInitialized, shaderConfig</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/CustomShaderVisualization.tsx (Line 209:8 - Line
              239:7), src/components/ui/visualization/DataHighlightVisualization.tsx (Line 203:3 -
              Line 233:30)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn136"
              onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn136"
              onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup136"
            ><code class="language-tsx text-sm text-gray-800">]);

  // Handle canvas clicks
  const handleCanvasClick = (e: React.MouseEvent&lt;HTMLCanvasElement&gt;) =&gt; {
    if (!onDataPointClick || !containerRef.current) return;

    const rect = containerRef.current.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // Find nearest data point
    let nearestIndex = -1;
    let nearestDistance = Infinity;

    data?.forEach((point, index) =&gt; {
      const dx = point.x - x;
      const dy = point.y - y;
      const distance = Math.sqrt(dx * dx + dy * dy);

      if (distance &lt; nearestDistance &amp;&amp; distance &lt; 20) {
        nearestDistance = distance;
        nearestIndex = index;
      }
    });

    if (nearestIndex !== -1) {
      onDataPointClick(data[nearestIndex], nearestIndex);
    }
  };

  return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/Chart.tsx (Line 323:8 - Line 340:57),
              src/components/ui/visualization/Chart.tsx (Line 260:13 - Line 277:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn137"
              onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn137"
              onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup137"
            ><code class="language-tsx text-sm text-gray-800">) return;
    
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    // Calculate chart area
    const chartArea = {
      x: margin.left,
      y: margin.top,
      width: dimensions.width - margin.left - margin.right,
      height: dimensions.height - margin.top - margin.bottom,
    };
    
    // Similar logic to handleMouseMove, but trigger onClick</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/Chart.tsx (Line 342:7 - Line 348:3),
              src/components/ui/visualization/Chart.tsx (Line 291:9 - Line 295:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn138"
              onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn138"
              onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup138"
            ><code class="language-tsx text-sm text-gray-800">const dataset = data.datasets[0];
      const barWidth = chartArea.width / dataset.data.length;
      const barIndex = Math.floor((x - chartArea.x) / barWidth);
      
      if (
        barIndex &gt;= 0 &amp;&amp; 
        barIndex &lt; dataset.data.length &amp;&amp;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/Chart.tsx (Line 578:18 - Line 588:12),
              src/components/ui/visualization/Chart.tsx (Line 532:13 - Line 542:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn139"
              onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn139"
              onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup139"
            ><code class="language-tsx text-sm text-gray-800">(
  ctx: CanvasRenderingContext2D,
  data: DataPoint[],
  chartArea: { x: number; y: number; width: number; height: number },
  colors: string[]
) {
  if (data.length === 0) return;
  
  const centerX = chartArea.x + chartArea.width / 2;
  const centerY = chartArea.y + chartArea.height / 2;
  const outerRadius</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/Chart.tsx (Line 589:4 - Line 600:4),
              src/components/ui/visualization/Chart.tsx (Line 542:2 - Line 553:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn140"
              onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn140"
              onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup140"
            ><code class="language-tsx text-sm text-gray-800">;
  
  const total = data.reduce((sum, point) =&gt; sum + point.value, 0);
  
  let startAngle = 0;
  
  data.forEach((point, index) =&gt; {
    const portionValue = point.value / total;
    const endAngle = startAngle + portionValue * Math.PI * 2;
    
    ctx.beginPath();
    ctx.arc</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/visualization/Chart.tsx (Line 611:14 - Line 620:6),
              src/components/ui/visualization/Chart.tsx (Line 459:14 - Line 468:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn141"
              onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn141"
              onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup141"
            ><code class="language-tsx text-sm text-gray-800">(
  ctx: CanvasRenderingContext2D,
  data: DataPoint[],
  chartArea: { x: number; y: number; width: number; height: number },
  maxValue: number,
  color: string
) {
  if (data.length === 0) return;
  
  const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 60:9 - Line 72:9),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 51:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn142"
              onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn142"
              onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup142"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;path d=&quot;M2 22h20&quot;&gt;&lt;/path&gt;
      &lt;path d=&quot;M12 2v20</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 78:11 - Line 89:7),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 50:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn143"
              onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn143"
              onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup143"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;circle</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 96:12 - Line 107:9),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 50:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn144"
              onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn144"
              onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup144"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;path d=&quot;M2 12h20</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 115:8 - Line 126:5),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 50:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn145"
              onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn145"
              onclick="toggleCodeBlock('cloneGroup145', 'expandBtn145', 'collapseBtn145')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup145"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;line</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 132:8 - Line 143:44),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 50:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn146"
              onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn146"
              onclick="toggleCodeBlock('cloneGroup146', 'expandBtn146', 'collapseBtn146')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup146"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;path d=&quot;M12 22s8-4 8-10V4l-8-2-8 2v8c0 6 8 10 8 10z</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 146:8 - Line 157:94),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 50:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn147"
              onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn147"
              onclick="toggleCodeBlock('cloneGroup147', 'expandBtn147', 'collapseBtn147')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup147"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;path d=&quot;M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14l-5-4.87 6.91-1.01L12 2z</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 160:8 - Line 171:3),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 39:15 - Line 89:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn148"
              onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn148"
              onclick="toggleCodeBlock('cloneGroup148', 'expandBtn148', 'collapseBtn148')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup148"
            ><code class="language-tsx text-sm text-gray-800">: (
    &lt;svg
      xmlns=&quot;http://www.w3.org/2000/svg&quot;
      viewBox=&quot;0 0 24 24&quot;
      fill=&quot;none&quot;
      stroke=&quot;currentColor&quot;
      strokeWidth=&quot;2&quot;
      strokeLinecap=&quot;round&quot;
      strokeLinejoin=&quot;round&quot;
      className=&quot;h-4 w-4&quot;
    &gt;
      &lt;circle cx=&quot;12&quot; cy=&quot;12&quot; r=&quot;10</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 383:13 - Line 396:21),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 336:5 - Line 349:61)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn149"
              onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn149"
              onclick="toggleCodeBlock('cloneGroup149', 'expandBtn149', 'collapseBtn149')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup149"
            ><code class="language-tsx text-sm text-gray-800">;
          const otherNodeElement = document.querySelector(`[data-node-id=&quot;${otherNodeId}&quot;]`);
          
          if (!otherNodeElement) {
            return null;
          }
          
          const rect = otherNodeElement.getBoundingClientRect();
          const otherNodePosition = {
            x: rect.left + rect.width / 2,
            y: rect.top + rect.height / 2,
          };
          
          // Draw synergy line</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/tech/TechVisualFeedback.tsx (Line 697:9 - Line 705:46),
              src/components/ui/tech/TechVisualFeedback.tsx (Line 586:2 - Line 594:48)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn150"
              onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn150"
              onclick="toggleCodeBlock('cloneGroup150', 'expandBtn150', 'collapseBtn150')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup150"
            ><code class="language-tsx text-sm text-gray-800">: number;
}) {
  // Calculate line properties
  const dx = to.x - from.x;
  const dy = to.y - from.y;
  const length = Math.sqrt(dx * dx + dy * dy);
  const angle = Math.atan2(dy, dx) * (180 / Math.PI);
  
  // Calculate line thickness based on strength</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/VirtualizedResourceDataset.tsx (Line 210:5 - Line 219:19),
              src/components/ui/resource/VirtualizedResourceList.tsx (Line 134:5 - Line 143:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn151"
              onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn151"
              onclick="toggleCodeBlock('cloneGroup151', 'expandBtn151', 'collapseBtn151')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup151"
            ><code class="language-tsx text-sm text-gray-800">const resizeObserver = new ResizeObserver(entries =&gt; {
      for (const entry of entries) {
        const { width } = entry.contentRect;
        setContainerSize(prev =&gt; ({ ...prev, width }));
      }
    });

    resizeObserver.observe(containerRef.current);

    // Initialize size</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceVisualizationEnhanced.tsx (Line 63:3 - Line 84:33),
              src/components/ui/visualization/ResourceVisualization.tsx (Line 231:3 - Line 252:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn153"
              onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn153"
              onclick="toggleCodeBlock('cloneGroup153', 'expandBtn153', 'collapseBtn153')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup153"
            ><code class="language-tsx text-sm text-gray-800">const percentage = (value / capacity) * 100;

  if (percentage &lt;= thresholds.critical) {
    return {
      icon: AlertTriangle,
      message: 'Critical',
      color: 'text-red-500',
    };
  }

  if (percentage &lt;= thresholds.warning) {
    return {
      icon: AlertTriangle,
      message: 'Warning',
      color: 'text-yellow-500',
    };
  }

  return null;
}

// Tooltip content for resources</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceVisualizationEnhanced.tsx (Line 91:6 - Line
              120:19), src/components/ui/visualization/ResourceVisualization.tsx (Line 260:2 - Line
              289:17)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn154"
              onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn154"
              onclick="toggleCodeBlock('cloneGroup154', 'expandBtn154', 'collapseBtn154')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup154"
            ><code class="language-tsx text-sm text-gray-800">;

    return (
      &lt;div className={`rounded-md p-2 ${colors.bg} border ${colors.border}`}&gt;
        &lt;div className=&quot;flex items-center gap-2&quot;&gt;
          &lt;span className={colors.base}&gt;{resourceNames[type]}&lt;/span&gt;
          {status &amp;&amp; (
            &lt;span className={status.color}&gt;
              &lt;status.icon className=&quot;h-4 w-4&quot; /&gt;
            &lt;/span&gt;
          )}
        &lt;/div&gt;

        &lt;div className=&quot;mt-1 space-y-1&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Current:&lt;/span&gt;
            &lt;span className={colors.base}&gt;{value.toLocaleString()}&lt;/span&gt;
          &lt;/div&gt;

          {rate !== 0 &amp;&amp; (
            &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
              &lt;span className=&quot;text-gray-400&quot;&gt;Rate:&lt;/span&gt;
              &lt;div className=&quot;flex items-center gap-1&quot;&gt;
                {rate &gt; 0 ? (
                  &lt;TrendingUp className=&quot;h-4 w-4 text-green-500&quot; /&gt;
                ) : rate &lt; 0 ? (
                  &lt;TrendingDown className=&quot;h-4 w-4 text-red-500&quot; /&gt;
                ) : null}
                &lt;span
                  </code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceVisualizationEnhanced.tsx (Line 121:17 - Line
              136:2), src/components/ui/visualization/ResourceVisualization.tsx (Line 290:15 - Line
              304:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn155"
              onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn155"
              onclick="toggleCodeBlock('cloneGroup155', 'expandBtn155', 'collapseBtn155')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup155"
            ><code class="language-tsx text-sm text-gray-800">&gt;
                  {rate &gt; 0 ? '+' : ''}
                  {rate.toLocaleString()}/s
                &lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )}

          {capacity !== undefined &amp;&amp; (
            &lt;div className=&quot;flex items-center justify-between gap-4&quot;&gt;
              &lt;span className=&quot;text-gray-400&quot;&gt;Capacity:&lt;/span&gt;
              &lt;span className={colors.base}&gt;{capacity.toLocaleString()}&lt;/span&gt;
            &lt;/div&gt;
          )}

          {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceRatesDisplay.tsx (Line 12:2 - Line 56:47),
              src/components/ui/visualization/ResourceVisualization.tsx (Line 81:3 - Line 125:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn157"
              onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn157"
              onclick="toggleCodeBlock('cloneGroup157', 'expandBtn157', 'collapseBtn157')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup157"
            ><code class="language-tsx text-sm text-gray-800">}
&gt; = {
  [ResourceType.MINERALS]: {
    base: 'text-amber-400',
    bg: 'bg-amber-900/20',
    border: 'border-amber-700/30',
    fill: 'bg-amber-500',
  },
  [ResourceType.ENERGY]: {
    base: 'text-cyan-400',
    bg: 'bg-cyan-900/20',
    border: 'border-cyan-700/30',
    fill: 'bg-cyan-500',
  },
  [ResourceType.POPULATION]: {
    base: 'text-green-400',
    bg: 'bg-green-900/20',
    border: 'border-green-700/30',
    fill: 'bg-green-500',
  },
  [ResourceType.RESEARCH]: {
    base: 'text-purple-400',
    bg: 'bg-purple-900/20',
    border: 'border-purple-700/30',
    fill: 'bg-purple-500',
  },
  [ResourceType.PLASMA]: {
    base: 'text-red-400',
    bg: 'bg-red-900/20',
    border: 'border-red-700/30',
    fill: 'bg-red-500',
  },
  [ResourceType.GAS]: {
    base: 'text-blue-400',
    bg: 'bg-blue-900/20',
    border: 'border-blue-700/30',
    fill: 'bg-blue-500',
  },
  [ResourceType.EXOTIC]: {
    base: 'text-pink-400',
    bg: 'bg-pink-900/20',
    border: 'border-pink-700/30',
    fill: 'bg-pink-500',
  },
  // Add default colors for other resource types</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ResourceRatesDisplay.tsx (Line 57:3 - Line 131:45),
              src/components/ui/visualization/ResourceVisualization.tsx (Line 125:3 - Line 199:25)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn158"
              onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn158"
              onclick="toggleCodeBlock('cloneGroup158', 'expandBtn158', 'collapseBtn158')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup158"
            ><code class="language-tsx text-sm text-gray-800">[ResourceType.IRON]: {
    base: 'text-gray-400',
    bg: 'bg-gray-900/20',
    border: 'border-gray-700/30',
    fill: 'bg-gray-500',
  },
  [ResourceType.COPPER]: {
    base: 'text-orange-400',
    bg: 'bg-orange-900/20',
    border: 'border-orange-700/30',
    fill: 'bg-orange-500',
  },
  [ResourceType.TITANIUM]: {
    base: 'text-slate-400',
    bg: 'bg-slate-900/20',
    border: 'border-slate-700/30',
    fill: 'bg-slate-500',
  },
  [ResourceType.URANIUM]: {
    base: 'text-lime-400',
    bg: 'bg-lime-900/20',
    border: 'border-lime-700/30',
    fill: 'bg-lime-500',
  },
  [ResourceType.WATER]: {
    base: 'text-sky-400',
    bg: 'bg-sky-900/20',
    border: 'border-sky-700/30',
    fill: 'bg-sky-500',
  },
  [ResourceType.HELIUM]: {
    base: 'text-indigo-400',
    bg: 'bg-indigo-900/20',
    border: 'border-indigo-700/30',
    fill: 'bg-indigo-500',
  },
  [ResourceType.DEUTERIUM]: {
    base: 'text-violet-400',
    bg: 'bg-violet-900/20',
    border: 'border-violet-700/30',
    fill: 'bg-violet-500',
  },
  [ResourceType.ANTIMATTER]: {
    base: 'text-fuchsia-400',
    bg: 'bg-fuchsia-900/20',
    border: 'border-fuchsia-700/30',
    fill: 'bg-fuchsia-500',
  },
  [ResourceType.DARK_MATTER]: {
    base: 'text-rose-400',
    bg: 'bg-rose-900/20',
    border: 'border-rose-700/30',
    fill: 'bg-rose-500',
  },
  [ResourceType.EXOTIC_MATTER]: {
    base: 'text-emerald-400',
    bg: 'bg-emerald-900/20',
    border: 'border-emerald-700/30',
    fill: 'bg-emerald-500',
  },
  [ResourceType.ORGANIC]: {
    base: 'text-teal-400',
    bg: 'bg-teal-900/20',
    border: 'border-teal-700/30',
    fill: 'bg-teal-500',
  },
  [ResourceType.FOOD]: {
    base: 'text-yellow-400',
    bg: 'bg-yellow-900/20',
    border: 'border-yellow-700/30',
    fill: 'bg-yellow-500',
  },
};

// Props for detailed rate display component</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ChainVisualization.tsx (Line 8:1 - Line 37:33),
              src/components/ui/resource/ConverterDashboard.tsx (Line 11:1 - Line 40:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn162"
              onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn162"
              onclick="toggleCodeBlock('cloneGroup162', 'expandBtn162', 'collapseBtn162')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup162"
            ><code class="language-tsx text-sm text-gray-800">interface ChainStatus {
  chainId: string;
  currentStepIndex: number;
  recipeIds: string[];
  startTime: number;
  estimatedEndTime: number;
  progress: number;
  stepStatus: Array&lt;{
    recipeId: string;
    converterId: string;
    processId?: string;
    status: 'pending' | 'in_progress' | 'completed' | 'failed';
    startTime?: number;
    endTime?: number;
  }&gt;;
  resourceTransfers: Array&lt;{
    type: ResourceType;
    amount: number;
    fromStep: number;
    toStep: number;
    status: 'pending' | 'in_progress' | 'completed';
  }&gt;;
  active: boolean;
  paused: boolean;
  completed: boolean;
  failed: boolean;
  errorMessage?: string;
}

// Types for the component props</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/resource/ChainVisualization.tsx (Line 162:2 - Line 168:4),
              src/components/exploration/visualizations/charts/ResourceFlowDiagram.tsx (Line 199:2 -
              Line 205:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn163"
              onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn163"
              onclick="toggleCodeBlock('cloneGroup163', 'expandBtn163', 'collapseBtn163')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup163"
            ><code class="language-tsx text-sm text-gray-800">links)
          .id(d =&gt; d.id)
          .distance(100)
      )
      .force('charge', d3.forceMunknownnownBody().strength(-300))
      .force('center', d3.forceCenter(width / 2, height / 2))
      .force('x'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/UserBehaviorCorrelationView.tsx (Line 336:16 - Line
              345:12), src/components/ui/performance/UserBehaviorCorrelationView.tsx (Line 212:20 -
              Line 222:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn164"
              onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn164"
              onclick="toggleCodeBlock('cloneGroup164', 'expandBtn164', 'collapseBtn164')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup164"
            ><code class="language-tsx text-sm text-gray-800">.current)
      .append('svg')
      .attr('width', chartWidth)
      .attr('height', chartHeight);

    // Create chart group
    const chart = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);

    // Set up scales
    const xScale = d3.scaleLinear</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceRegressionReport.tsx (Line 425:13 - Line
              436:13), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 396:12 -
              Line 407:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn165"
              onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn165"
              onclick="toggleCodeBlock('cloneGroup165', 'expandBtn165', 'collapseBtn165')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup165"
            ><code class="language-tsx text-sm text-gray-800">&lt;/h3&gt;
                &lt;table className=&quot;data-table&quot;&gt;
                  &lt;thead&gt;
                    &lt;tr&gt;
                      &lt;th&gt;Test&lt;/th&gt;
                      &lt;th&gt;Baseline (ms)&lt;/th&gt;
                      &lt;th&gt;Current (ms)&lt;/th&gt;
                      &lt;th&gt;Change (%)&lt;/th&gt;
                    &lt;/tr&gt;
                  &lt;/thead&gt;
                  &lt;tbody&gt;
                    {analysis.improvements</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceRegressionReport.tsx (Line 459:15 - Line
              466:2), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 397:17 -
              Line 404:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn166"
              onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn166"
              onclick="toggleCodeBlock('cloneGroup166', 'expandBtn166', 'collapseBtn166')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup166"
            ><code class="language-tsx text-sm text-gray-800">&lt;table className=&quot;data-table&quot;&gt;
                &lt;thead&gt;
                  &lt;tr&gt;
                    &lt;th&gt;Test&lt;/th&gt;
                    &lt;th&gt;Baseline (ms)&lt;/th&gt;
                    &lt;th&gt;Current (ms)&lt;/th&gt;
                    &lt;th&gt;Change (%)&lt;/th&gt;
                    &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceRegressionReport.tsx (Line 471:14 - Line
              478:2), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 409:2 -
              Line 416:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn167"
              onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn167"
              onclick="toggleCodeBlock('cloneGroup167', 'expandBtn167', 'collapseBtn167')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup167"
            ><code class="language-tsx text-sm text-gray-800">)
                    .map((regression, index) =&gt; (
                      &lt;tr key={`regression-full-${index}`}&gt;
                        &lt;td&gt;{regression.name}&lt;/td&gt;
                        &lt;td&gt;{regression.baselineTime.toFixed(2)}&lt;/td&gt;
                        &lt;td&gt;{regression.newTime.toFixed(2)}&lt;/td&gt;
                        &lt;td className=&quot;regression&quot;&gt;+{regression.percentChange.toFixed(2)}%&lt;/td&gt;
                        &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceRegressionReport.tsx (Line 490:2 - Line
              503:13), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 457:3 -
              Line 470:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn168"
              onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn168"
              onclick="toggleCodeBlock('cloneGroup168', 'expandBtn168', 'collapseBtn168')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup168"
            ><code class="language-tsx text-sm text-gray-800">&lt;/div&gt;
            ) : (
              &lt;table className=&quot;data-table&quot;&gt;
                &lt;thead&gt;
                  &lt;tr&gt;
                    &lt;th&gt;Test&lt;/th&gt;
                    &lt;th&gt;Baseline (ms)&lt;/th&gt;
                    &lt;th&gt;Current (ms)&lt;/th&gt;
                    &lt;th&gt;Change (%)&lt;/th&gt;
                    &lt;th&gt;Absolute Diff (ms)&lt;/th&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  {analysis.improvements</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceRegressionReport.tsx (Line 504:14 - Line
              511:2), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 438:2 -
              Line 445:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn169"
              onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn169"
              onclick="toggleCodeBlock('cloneGroup169', 'expandBtn169', 'collapseBtn169')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup169"
            ><code class="language-tsx text-sm text-gray-800">)
                    .map((improvement, index) =&gt; (
                      &lt;tr key={`improvement-full-${index}`}&gt;
                        &lt;td&gt;{improvement.name}&lt;/td&gt;
                        &lt;td&gt;{improvement.baselineTime.toFixed(2)}&lt;/td&gt;
                        &lt;td&gt;{improvement.newTime.toFixed(2)}&lt;/td&gt;
                        &lt;td className=&quot;improvement&quot;&gt;{improvement.percentChange.toFixed(2)}%&lt;/td&gt;
                        &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceBenchmarkDashboard.tsx (Line 424:12 - Line
              434:2), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 410:23 -
              Line 420:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn170"
              onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn170"
              onclick="toggleCodeBlock('cloneGroup170', 'expandBtn170', 'collapseBtn170')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup170"
            ><code class="language-tsx text-sm text-gray-800">.map((regression, index) =&gt; (
                    &lt;tr key={`regression-${index}`}&gt;
                      &lt;td&gt;{regression.name}&lt;/td&gt;
                      &lt;td&gt;{regression.baselineTime.toFixed(2)}&lt;/td&gt;
                      &lt;td&gt;{regression.newTime.toFixed(2)}&lt;/td&gt;
                      &lt;td className=&quot;regression&quot;&gt;+{regression.percentChange.toFixed(2)}%&lt;/td&gt;
                    &lt;/tr&gt;
                  ))}
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceBenchmarkDashboard.tsx (Line 439:13 - Line
              450:13), src/components/ui/performance/PerformanceBenchmarkDashboard.tsx (Line 413:12
              - Line 424:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn171"
              onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn171"
              onclick="toggleCodeBlock('cloneGroup171', 'expandBtn171', 'collapseBtn171')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup171"
            ><code class="language-tsx text-sm text-gray-800">&lt;/h3&gt;
              &lt;table className=&quot;analysis-table&quot;&gt;
                &lt;thead&gt;
                  &lt;tr&gt;
                    &lt;th&gt;Name&lt;/th&gt;
                    &lt;th&gt;Baseline (ms)&lt;/th&gt;
                    &lt;th&gt;New (ms)&lt;/th&gt;
                    &lt;th&gt;Change (%)&lt;/th&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  {regressionAnalysis.improvements</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/PerformanceBenchmarkDashboard.tsx (Line 450:13 - Line
              460:2), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 439:23 -
              Line 449:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn172"
              onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn172"
              onclick="toggleCodeBlock('cloneGroup172', 'expandBtn172', 'collapseBtn172')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup172"
            ><code class="language-tsx text-sm text-gray-800">.map((improvement, index) =&gt; (
                    &lt;tr key={`improvement-${index}`}&gt;
                      &lt;td&gt;{improvement.name}&lt;/td&gt;
                      &lt;td&gt;{improvement.baselineTime.toFixed(2)}&lt;/td&gt;
                      &lt;td&gt;{improvement.newTime.toFixed(2)}&lt;/td&gt;
                      &lt;td className=&quot;improvement&quot;&gt;{improvement.percentChange.toFixed(2)}%&lt;/td&gt;
                    &lt;/tr&gt;
                  ))}
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 136:7 - Line
              144:18), src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 125:7 -
              Line 133:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn173"
              onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn173"
              onclick="toggleCodeBlock('cloneGroup173', 'expandBtn173', 'collapseBtn173')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup173"
            ><code class="language-tsx text-sm text-gray-800">.selectAll&lt;SVGCircleElement, Particle&gt;('circle')
      .data(particles, (d: Particle) =&gt; d.id)
      .join('circle')
      .attr('r', d =&gt; d.size)
      .attr('cx', d =&gt; d.x)
      .attr('cy', d =&gt; d.y)
      .attr('fill', d =&gt; d.color);

    // FPS monitoring</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 169:8 - Line
              175:11), src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 154:11 -
              Line 160:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn174"
              onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn174"
              onclick="toggleCodeBlock('cloneGroup174', 'expandBtn174', 'collapseBtn174')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup174"
            ><code class="language-tsx text-sm text-gray-800">:
            return {
              position: typedInterpolators.object(
                { x: p.x, y: p.y },
                { x: p.targetX, y: p.targetY }
              ),
              size: typedInterpolators.number(p.size, p.targetSize</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 206:8 - Line
              212:11), src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 191:11 -
              Line 197:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn175"
              onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn175"
              onclick="toggleCodeBlock('cloneGroup175', 'expandBtn175', 'collapseBtn175')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup175"
            ><code class="language-tsx text-sm text-gray-800">:
            return {
              position: memoizedInterpolatorFactory.object(
                { x: p.x, y: p.y },
                { x: p.targetX, y: p.targetY }
              ),
              size: memoizedInterpolatorFactory.number(p.size, p.targetSize</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 289:30 - Line
              313:21), src/components/ui/performance/InterpolationMemoizationDemo.tsx (Line 235:22 -
              Line 259:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn176"
              onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn176"
              onclick="toggleCodeBlock('cloneGroup176', 'expandBtn176', 'collapseBtn176')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup176"
            ><code class="language-tsx text-sm text-gray-800">[i];

          // Calculate t value oscillating between 0 and 1
          const t = (Math.sin(elapsed * d.speed * 0.001) + 1) / 2;

          // Apply interpolated values
          const pos = interpolators.position(t);

          const element = d3.select(this);
          element.attr('cx', pos.x);
          element.attr('cy', pos.y);

          if (interpolationType === 'color' || interpolationType === 'mixed') {
            element.attr('fill', interpolators.color!(t));
          }

          if (interpolationType === 'mixed') {
            element.attr('r', interpolators.size(t));
          }
        });

        return false; // Continue animation
      },
      {
        name: 'Memoized Animation'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/DynamicBudgetAdjustmentPanel.tsx (Line 195:16 - Line
              218:2), src/components/ui/performance/DynamicBudgetAdjustmentPanel.tsx (Line 100:30 -
              Line 124:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn178"
              onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn178"
              onclick="toggleCodeBlock('cloneGroup178', 'expandBtn178', 'collapseBtn178')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup178"
            ><code class="language-tsx text-sm text-gray-800">) {
      const success = budgetAdjuster.adjustBudget(
        recommendation.originalBudget.name,
        recommendation.recommendedBudget
      );

      if (success) {
        applied.push(recommendation);
      }
    }

    if (applied.length &gt; 0) {
      // Update state
      setCurrentBudgets(budgetAdjuster.getCurrentBudgets());
      setRecommendations(budgetAdjuster.checkForBudgetAdjustments());
      setAppliedChanges(prev =&gt; [...prev, ...applied]);
      setShowAppliedChanges(true);

      // Notify parent component
      if (onBudgetsAdjusted) {
        onBudgetsAdjusted(budgetAdjuster.getCurrentBudgets());
      }
    }
  };</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 200:2 - Line 214:55),
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 105:2 - Line 119:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn179"
              onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn179"
              onclick="toggleCodeBlock('cloneGroup179', 'expandBtn179', 'collapseBtn179')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup179"
            ><code class="language-tsx text-sm text-gray-800">as D3SVGSelection)
      .selectAll&lt;SVGCircleElement, CircleElement&gt;('circle')
      .data&lt;CircleElement&gt;(elements, (d: CircleElement) =&gt; d.id)
      .enter()
      .append('circle')
      .attr('cx', (d: CircleElement) =&gt; d.x)
      .attr('cy', (d: CircleElement) =&gt; d.y)
      .attr('r', (d: CircleElement) =&gt; d.radius)
      .attr('fill', (d: CircleElement) =&gt; d.color)
      .attr('stroke', '#333')
      .attr('stroke-width', 1);

    // Set up animation if active
    if (isAnimating) {
      // Register animation with the animation frame manager</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 236:9 - Line 244:2),
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 121:9 - Line 128:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn180"
              onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn180"
              onclick="toggleCodeBlock('cloneGroup180', 'expandBtn180', 'collapseBtn180')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup180"
            ><code class="language-tsx text-sm text-gray-800">const updatedElements = elements.map(el =&gt; {
          // More complex movement based on complexity level
          const complexityFactor = animationComplexity / 100;
          const noise = Math.sin(Date.now() * 0.001 + el.id) * 10 * complexityFactor;

          return {
            ...el,
            x:
              Math.max(10, Math.min(width / 2 - 10, el.x + (Math.random() - 0.5) * 10 + noise)) +</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 246:13 - Line 255:49),
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 129:13 - Line 138:51)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn181"
              onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn181"
              onclick="toggleCodeBlock('cloneGroup181', 'expandBtn181', 'collapseBtn181')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup181"
            ><code class="language-tsx text-sm text-gray-800">y: Math.max(10, Math.min(height - 10, el.y + (Math.random() - 0.5) * 10 + noise)),
            radius: Math.max(3, el.radius + (Math.random() - 0.5) * 2 * complexityFactor),
            color: d3.interpolateRgb(
              el.color,
              d3.interpolateRainbow(Math.random() * complexityFactor)
            )(0.05),
          };
        });

        // Batched D3 update (prevents layout thrashing)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 256:2 - Line 266:51),
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 139:2 - Line 149:25)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn182"
              onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn182"
              onclick="toggleCodeBlock('cloneGroup182', 'expandBtn182', 'collapseBtn182')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup182"
            ><code class="language-tsx text-sm text-gray-800">as D3SVGSelection)
          .selectAll&lt;SVGCircleElement, CircleElement&gt;('circle')
          .data&lt;CircleElement&gt;(updatedElements, (d: CircleElement) =&gt; d.id)
          .transition()
          .duration(updateFrequency * 0.8)
          .attr('cx', (d: CircleElement) =&gt; d.x)
          .attr('cy', (d: CircleElement) =&gt; d.y)
          .attr('r', (d: CircleElement) =&gt; d.radius)
          .attr('fill', (d: CircleElement) =&gt; d.color);

        // Note: we don't update elements state here since</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 279:14 - Line 293:3),
              src/components/ui/performance/BatchedUpdateDemo.tsx (Line 162:15 - Line 176:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn183"
              onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn183"
              onclick="toggleCodeBlock('cloneGroup183', 'expandBtn183', 'collapseBtn183')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup183"
            ><code class="language-tsx text-sm text-gray-800">(Math.round((frameCount * 1000) / (now - lastTime)));
          frameCount = 0;
          lastTime = now;
        }

        if (isAnimating) {
          requestAnimationFrame(measureFps);
        }
      };

      requestAnimationFrame(measureFps);

      return () =&gt; {
        clearInterval(updateInterval);
        if</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AnimationFrameManagerDemo.tsx (Line 296:2 - Line
              305:16), src/components/ui/performance/AnimationFrameManagerDemo.tsx (Line 283:2 -
              Line 292:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn184"
              onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn184"
              onclick="toggleCodeBlock('cloneGroup184', 'expandBtn184', 'collapseBtn184')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup184"
            ><code class="language-tsx text-sm text-gray-800">= (group: 'circles' | 'paths' | 'background') =&gt; {
    const ids =
      group === 'circles'
        ? circleAnimations.map(a =&gt; a.id)
        : group === 'paths'
          ? pathAnimations.map(a =&gt; a.id)
          : backgroundAnimations.map(a =&gt; a.id);

    ids.forEach(id =&gt; {
      animationFrameManager.resumeAnimation</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AdvancedMetricAnalysis.tsx (Line 111:3 - Line 130:33),
              src/components/ui/performance/MLPerformancePrediction.tsx (Line 492:3 - Line 511:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn187"
              onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn187"
              onclick="toggleCodeBlock('cloneGroup187', 'expandBtn187', 'collapseBtn187')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup187"
            ><code class="language-tsx text-sm text-gray-800">const setupCharts = () =&gt; {
    if (!chartRef.current) return;

    // Clear previous charts
    d3.select(chartRef.current).selectAll('*').remove();

    // Set up the SVG container
    const svg = d3
      .select(chartRef.current)
      .append('svg')
      .attr('width', width)
      .attr('height', height)
      .append('g')
      .attr('transform', 'translate(50, 20)');

    // Calculate chart dimensions
    const chartWidth = width - 100;
    const chartHeight = height - 100;

    // Create charts for each metric</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AdvancedMetricAnalysis.tsx (Line 137:17 - Line 143:7),
              src/components/ui/performance/MLPerformancePrediction.tsx (Line 515:12 - Line 526:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn188"
              onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn188"
              onclick="toggleCodeBlock('cloneGroup188', 'expandBtn188', 'collapseBtn188')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup188"
            ><code class="language-tsx text-sm text-gray-800">.length - 40;

      // Create a group for this chart
      const chartGroup = svg.append('g').attr('transform', `translate(0, ${yPos})`);

      // Add title
      chartGroup.append('text').attr('x', 0).attr('y', 0).attr('dy', '0.35em').text(metric</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AdvancedMetricAnalysis.tsx (Line 163:7 - Line 170:25),
              src/components/ui/performance/MLPerformancePrediction.tsx (Line 547:7 - Line 554:41)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn189"
              onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn189"
              onclick="toggleCodeBlock('cloneGroup189', 'expandBtn189', 'collapseBtn189')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup189"
            ><code class="language-tsx text-sm text-gray-800">const yAxis = d3.axisLeft(yScale).ticks(5);

      // Add axes
      chartGroup.append('g').attr('transform', `translate(0, ${chartHeight_i})`).call(xAxis);

      chartGroup.append('g').call(yAxis);

      // Create line generator</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/overlays/Modal.tsx (Line 192:13 - Line 203:27),
              src/components/ui/overlays/Modal.tsx (Line 158:13 - Line 169:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn190"
              onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn190"
              onclick="toggleCodeBlock('cloneGroup190', 'expandBtn190', 'collapseBtn190')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup190"
            ><code class="language-tsx text-sm text-gray-800">, {
              detail: { modalId: title || 'modal' }
            });
            document.dispatchEvent(event);
          } catch (error) {
            errorLoggingService.logError(
              error instanceof Error ? error : new Error(String(error)),
              ErrorType.EVENT_HANDLING,
              ErrorSeverity.LOW,
              {
                componentName: 'Modal',
                action: 'dispatchModalClosedEvent'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/overlays/Modal.tsx (Line 219:3 - Line 235:27),
              src/components/ui/overlays/Popover.tsx (Line 427:3 - Line 443:32)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn191"
              onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn191"
              onclick="toggleCodeBlock('cloneGroup191', 'expandBtn191', 'collapseBtn191')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup191"
            ><code class="language-tsx text-sm text-gray-800">useEffect(() =&gt; {
    if (!isOpen || !closeOnEsc) return;
    
    const handleKeyDown = (event: KeyboardEvent) =&gt; {
      if (event.key === 'Escape') {
        onClose();
      }
    };
    
    document.addEventListener('keydown', handleKeyDown);
    
    return () =&gt; {
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, [isOpen, onClose, closeOnEsc]);
  
  // Handle click on overlay</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/overlays/Drawer.tsx (Line 229:13 - Line 240:28),
              src/components/ui/overlays/Drawer.tsx (Line 186:13 - Line 197:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn193"
              onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn193"
              onclick="toggleCodeBlock('cloneGroup193', 'expandBtn193', 'collapseBtn193')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup193"
            ><code class="language-tsx text-sm text-gray-800">, {
              detail: { modalId: title || 'drawer', modalType: 'drawer' }
            });
            document.dispatchEvent(event);
          } catch (error) {
            errorLoggingService.logError(
              error instanceof Error ? error : new Error(String(error)),
              ErrorType.EVENT_HANDLING,
              ErrorSeverity.LOW,
              {
                componentName: 'Drawer',
                action: 'dispatchDrawerClosedEvent'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/overlays/Drawer.tsx (Line 254:12 - Line 274:2),
              src/components/ui/overlays/Modal.tsx (Line 216:18 - Line 236:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn194"
              onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn194"
              onclick="toggleCodeBlock('cloneGroup194', 'expandBtn194', 'collapseBtn194')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup194"
            ><code class="language-tsx text-sm text-gray-800">]);
  
  // Handle ESC key for closing
  useEffect(() =&gt; {
    if (!isOpen || !closeOnEsc) return;
    
    const handleKeyDown = (event: KeyboardEvent) =&gt; {
      if (event.key === 'Escape') {
        onClose();
      }
    };
    
    document.addEventListener('keydown', handleKeyDown);
    
    return () =&gt; {
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, [isOpen, onClose, closeOnEsc]);
  
  // Handle click on overlay
  const handleOverlayClick = (</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleUpgradeDisplay.tsx (Line 277:2 - Line 289:2),
              src/components/ui/modules/ModuleUpgradeDisplay.tsx (Line 51:3 - Line 62:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn195"
              onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn195"
              onclick="toggleCodeBlock('cloneGroup195', 'expandBtn195', 'collapseBtn195')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup195"
            ><code class="language-tsx text-sm text-gray-800">} =
    useModuleUpgrade(moduleId);

  const [module, setModule] = useState&lt;BaseModule | null&gt;(null);

  // Load module data
  useEffect(() =&gt; {
    const moduleData = moduleManager.getModule(moduleId);
    setModule(moduleData || null);
  }, [moduleId]);

  // Handle upgrade start
  const handleUpgradeStart = (e</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleStatusDisplay.tsx (Line 45:16 - Line 55:24),
              src/components/ui/modules/ModuleUpgradeDisplay.tsx (Line 51:17 - Line 61:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn196"
              onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn196"
              onclick="toggleCodeBlock('cloneGroup196', 'expandBtn196', 'collapseBtn196')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup196"
            ><code class="language-tsx text-sm text-gray-800">(moduleId);

    const [module, setModule] = useState&lt;BaseModule | null&gt;(null);

    // Load module data
    useEffect(() =&gt; {
      const moduleData = moduleManager.getModule(moduleId);
      setModule(moduleData || null);
    }, [moduleId]);

    // Handle status change</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleStatusDisplay.tsx (Line 306:2 - Line 316:3),
              src/components/ui/modules/ModuleStatusDisplay.tsx (Line 45:5 - Line 61:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn197"
              onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn197"
              onclick="toggleCodeBlock('cloneGroup197', 'expandBtn197', 'collapseBtn197')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup197"
            ><code class="language-tsx text-sm text-gray-800">} = useModuleStatus(moduleId);

    const [module, setModule] = useState&lt;BaseModule | null&gt;(null);

    // Load module data
    useEffect(() =&gt; {
      const moduleData = moduleManager.getModule(moduleId);
      setModule(moduleData || null);
    }, [moduleId]);

    if</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleStatusDisplay.tsx (Line 433:2 - Line 447:46),
              src/components/ui/modules/ModuleStatusDisplay.tsx (Line 45:5 - Line 320:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn198"
              onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn198"
              onclick="toggleCodeBlock('cloneGroup198', 'expandBtn198', 'collapseBtn198')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup198"
            ><code class="language-tsx text-sm text-gray-800">} = useModuleStatus(moduleId);

    const [module, setModule] = useState&lt;BaseModule | null&gt;(null);

    // Load module data
    useEffect(() =&gt; {
      const moduleData = moduleManager.getModule(moduleId);
      setModule(moduleData || null);
    }, [moduleId]);

    if (!module) {
      return null;
    }

    // Filter alerts by level and acknowledgement</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleHUD.tsx (Line 359:2 - Line 377:8),
              src/components/ui/modules/ModuleHUD.tsx (Line 349:2 - Line 359:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn199"
              onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn199"
              onclick="toggleCodeBlock('cloneGroup199', 'expandBtn199', 'collapseBtn199')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup199"
            ><code class="language-tsx text-sm text-gray-800">= (event: ModuleEvent) =&gt; {
      if (event?.data?.buildingId === buildingId) {
        // Refresh module list
        const building = moduleManager.getBuilding(buildingId);
        if (building) {
          setModuleIds(building.modules.map(module =&gt; module.id));
        }
      }
    };

    /**
     * Handler for module status changes - will be implemented in future updates
     * This function will be used to:
     * 1. Update module status indicators in real-time
     * 2. Trigger visual feedback for status transitions
     * 3. Update performance metrics based on status changes
     * 4. Notify connected systems about status changes
     * 5. Log status changes for analytics and debugging
     */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleGrid.tsx (Line 65:5 - Line 85:52),
              src/components/ui/resource/ResourceGrid.tsx (Line 106:4 - Line 126:66)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn200"
              onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn200"
              onclick="toggleCodeBlock('cloneGroup200', 'expandBtn200', 'collapseBtn200')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup200"
            ><code class="language-tsx text-sm text-gray-800">);

  // Measure container height for virtualization
  useEffect(() =&gt; {
    if (containerRef.current &amp;&amp; virtualized) {
      const resizeObserver = new ResizeObserver(entries =&gt; {
        const { height } = entries[0].contentRect;
        setContainerHeight(height);
      });
      
      resizeObserver.observe(containerRef.current);
      
      return () =&gt; {
        if (containerRef.current) {
          resizeObserver.unobserve(containerRef.current);
        }
      };
    }
  }, [virtualized]);

  // Filter and sort modules based on current filters</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/modules/ModuleControls.tsx (Line 179:7 - Line 197:25),
              src/components/ui/modules/ModuleControls.tsx (Line 148:7 - Line 166:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn201"
              onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn201"
              onclick="toggleCodeBlock('cloneGroup201', 'expandBtn201', 'collapseBtn201')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup201"
            ><code class="language-tsx text-sm text-gray-800">moduleManager.publishEvent({
        type: EventType.MODULE_STATUS_CHANGED,
        moduleId,
        moduleType: activeModule.type,
        timestamp: Date.now(),
        data: {
          status: newStatus,
          previousStatus: currentStatus,
        },
      });
      
      // Call status change callback if provided
      if (onStatusChange) {
        onStatusChange(newStatus);
      }
    }
  };
  
  // Display loading state</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/layout/ResponsiveLayout.tsx (Line 138:11 - Line 149:6),
              src/components/ui/layout/ResponsiveLayout.tsx (Line 89:8 - Line 100:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn202"
              onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn202"
              onclick="toggleCodeBlock('cloneGroup202', 'expandBtn202', 'collapseBtn202')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup202"
            ><code class="language-tsx text-sm text-gray-800">?: string | number | {
    xs?: string | number;
    sm?: string | number;
    md?: string | number;
    lg?: string | number;
    xl?: string | number;
    xxl?: string | number;
  };
  
  /**
   * Layout items width (set to 'auto' to disable)
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/layout/ResponsiveLayout.tsx (Line 150:10 - Line 161:6),
              src/components/ui/layout/ResponsiveLayout.tsx (Line 89:8 - Line 100:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn203"
              onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn203"
              onclick="toggleCodeBlock('cloneGroup203', 'expandBtn203', 'collapseBtn203')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup203"
            ><code class="language-tsx text-sm text-gray-800">?: string | number | {
    xs?: string | number;
    sm?: string | number;
    md?: string | number;
    lg?: string | number;
    xl?: string | number;
    xxl?: string | number;
  };
  
  /**
   * Whether to animate layout changes
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/event/VirtualizedEventLog.tsx (Line 149:15 - Line 177:35),
              src/components/ui/resource/VirtualizedResourceDataset.tsx (Line 202:9 - Line 154:33)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn204"
              onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn204"
              onclick="toggleCodeBlock('cloneGroup204', 'expandBtn204', 'collapseBtn204')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup204"
            ><code class="language-tsx text-sm text-gray-800">]);

  // Handle container resizing
  useEffect(() =&gt; {
    if (!containerRef.current) {
      return;
    }

    const resizeObserver = new ResizeObserver(entries =&gt; {
      for (const entry of entries) {
        const { width } = entry.contentRect;
        setContainerSize(prev =&gt; ({ ...prev, width }));
      }
    });

    resizeObserver.observe(containerRef.current);

    // Initialize width
    setContainerSize(prev =&gt; ({
      ...prev,
      width: containerRef.current?.clientWidth ?? 0,
    }));

    return () =&gt; {
      resizeObserver.disconnect();
    };
  }, []);

  // Update height when prop changes</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/event/VirtualizedEventLog.tsx (Line 167:5 - Line 182:36),
              src/components/ui/resource/VirtualizedResourceDataset.tsx (Line 220:5 - Line 235:32)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn205"
              onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn205"
              onclick="toggleCodeBlock('cloneGroup205', 'expandBtn205', 'collapseBtn205')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup205"
            ><code class="language-tsx text-sm text-gray-800">setContainerSize(prev =&gt; ({
      ...prev,
      width: containerRef.current?.clientWidth ?? 0,
    }));

    return () =&gt; {
      resizeObserver.disconnect();
    };
  }, []);

  // Update height when prop changes
  useEffect(() =&gt; {
    setContainerSize(prev =&gt; ({ ...prev, height }));
  }, [height]);

  // Auto-scroll to most recent event</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/automation/AutomationRuleEditor.tsx (Line 773:7 - Line 797:7),
              src/components/ui/automation/AutomationRuleEditor.tsx (Line 650:10 - Line 674:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn206"
              onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn206"
              onclick="toggleCodeBlock('cloneGroup206', 'expandBtn206', 'collapseBtn206')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup206"
            ><code class="language-tsx text-sm text-gray-800">,
                    target: e.target.value,
                  });
                }}
              &gt;
                &lt;option value=&quot;&quot;&gt;Select Resource&lt;/option&gt;
                {[
                  ResourceType.MINERALS,
                  ResourceType.ENERGY,
                  ResourceType.POPULATION,
                  ResourceType.RESEARCH,
                ].map(resource =&gt; (
                  &lt;option key={resource} value={resource}&gt;
                    {resource}
                  &lt;/option&gt;
                ))}
              &lt;/select&gt;
            &lt;/div&gt;

            &lt;div className=&quot;form-group&quot;&gt;
              &lt;label&gt;Amount&lt;/label&gt;
              &lt;input
                type=&quot;number&quot;
                value={
                  typeof action</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/LostNovaShip.tsx (Line 20:18 - Line 41:11),
              src/components/ships/common/SpaceRatShip.tsx (Line 19:19 - Line 40:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn207"
              onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn207"
              onclick="toggleCodeBlock('cloneGroup207', 'expandBtn207', 'collapseBtn207')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup207"
            ><code class="language-tsx text-sm text-gray-800">;
  status: 'engaging' | 'patrolling' | 'retreating' | 'disabled';
  health: number;
  maxHealth: number;
  shield: number;
  maxShield: number;
  weapons: WeaponMount[];
  stats: FactionShipStats;
  tactics: FactionBehaviorConfig | string;
  position: { x: number; y: number };
  rotation: number;
  onEngage?: () =&gt; void;
  onRetreat?: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
  onFire?: (weaponId: string) =&gt; void;
  children?: ReactNode;
}

// Helper function to create a FactionBehaviorConfig from string
const createFactionBehavior = (behavior: string): FactionBehaviorConfig =&gt; {
  return {
    formation: 'standard'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/FactionShipStats.tsx (Line 41:3 - Line 48:8),
              src/components/ships/player/variants/warships/PlayerWarShipCombat.tsx (Line 63:3 -
              Line 36:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn209"
              onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn209"
              onclick="toggleCodeBlock('cloneGroup209', 'expandBtn209', 'collapseBtn209')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup209"
            ><code class="language-tsx text-sm text-gray-800">return (
    &lt;div className={`bg-${color}-900/20 border border-${color}-700/30 rounded-lg p-6 ${className}`}&gt;
      {/* Ship Header */}
      &lt;div className=&quot;mb-6 flex items-start justify-between&quot;&gt;
        &lt;div&gt;
          &lt;h3 className=&quot;text-lg font-medium text-white&quot;&gt;{ship.name}&lt;/h3&gt;
          &lt;div className=&quot;flex items-center text-sm text-gray-400&quot;&gt;
            &lt;span className=&quot;capitalize&quot;&gt;{ship.faction</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/FactionShipStats.tsx (Line 50:2 - Line 73:2),
              src/components/ships/player/base/PlayerShipBase.tsx (Line 38:6 - Line 62:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn210"
              onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn210"
              onclick="toggleCodeBlock('cloneGroup210', 'expandBtn210', 'collapseBtn210')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup210"
            ><code class="language-tsx text-sm text-gray-800">}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div
          className={`rounded-full px-3 py-1 text-sm ${
            ship.status === 'engaging'
              ? 'bg-red-900/50 text-red-400'
              : ship.status === 'patrolling'
                ? 'bg-green-900/50 text-green-400'
                : ship.status === 'retreating'
                  ? 'bg-yellow-900/50 text-yellow-400'
                  : 'bg-gray-700 text-gray-400'
          }`}
        &gt;
          {ship.status.charAt(0).toUpperCase() + ship.status.slice(1)}
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Health &amp; Shield Bars */}
      &lt;div className=&quot;mb-6 grid grid-cols-2 gap-4&quot;&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Hull Integrity&lt;/span&gt;
            &lt;span </code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/FactionShipStats.tsx (Line 82:10 - Line 103:17),
              src/components/ships/player/variants/warships/WarShip.tsx (Line 122:8 - Line 143:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn211"
              onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn211"
              onclick="toggleCodeBlock('cloneGroup211', 'expandBtn211', 'collapseBtn211')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup211"
            ><code class="language-tsx text-sm text-gray-800">) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div&gt;
          &lt;div className=&quot;mb-1 flex justify-between text-sm&quot;&gt;
            &lt;span className=&quot;text-gray-400&quot;&gt;Shield Power&lt;/span&gt;
            &lt;span className=&quot;text-gray-300&quot;&gt;
              {Math.round((ship.shield / ship.maxShield) * 100)}%
            &lt;/span&gt;
          &lt;/div&gt;
          &lt;div className=&quot;h-2 overflow-hidden rounded-full bg-gray-700&quot;&gt;
            &lt;div
              className=&quot;h-full rounded-full bg-blue-500 transition-all&quot;
              style={{ width: `${(ship.shield / ship.maxShield) * 100}%` }}
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Ship Stats */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/FactionShipStats.tsx (Line 186:8 - Line 199:2),
              src/components/ships/player/base/PlayerShipBase.tsx (Line 181:8 - Line 194:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn212"
              onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn212"
              onclick="toggleCodeBlock('cloneGroup212', 'expandBtn212', 'collapseBtn212')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup212"
            ><code class="language-tsx text-sm text-gray-800">&lt;/span&gt;
        &lt;/button&gt;
      &lt;/div&gt;

      {/* Status Warnings */}
      {ship.status === 'disabled' &amp;&amp; (
        &lt;div className=&quot;mt-4 flex items-start space-x-2 rounded-lg border border-red-700/30 bg-red-900/20 p-3&quot;&gt;
          &lt;AlertTriangle className=&quot;mt-0.5 h-4 w-4 flex-shrink-0 text-red-500&quot; /&gt;
          &lt;span className=&quot;text-sm text-red-200&quot;&gt;Ship systems critically damaged&lt;/span&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/EquatorHorizonShip.tsx (Line 26:17 - Line 41:4),
              src/components/ships/common/SpaceRatShip.tsx (Line 27:7 - Line 37:65)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn213"
              onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn213"
              onclick="toggleCodeBlock('cloneGroup213', 'expandBtn213', 'collapseBtn213')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup213"
            ><code class="language-tsx text-sm text-gray-800">;
  position: { x: number; y: number };
  rotation: number;
  onEngage?: () =&gt; void;
  onRetreat?: () =&gt; void;
  onSpecialAbility?: () =&gt; void;
  onFire?: (weaponId: string) =&gt; void;
  children?: ReactNode;
}

/**
 * EquatorHorizonShip Component
 *
 * Base component for Equator Horizon faction ships.
 * Provides faction-specific styling and behavior.
 */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/common/CommonShipStats.tsx (Line 8:21 - Line 102:2),
              src/components/ships/player/base/PlayerShipStats.tsx (Line 8:15 - Line 102:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn214"
              onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn214"
              onclick="toggleCodeBlock('cloneGroup214', 'expandBtn214', 'collapseBtn214')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup214"
            ><code class="language-tsx text-sm text-gray-800">) {
  return (
    &lt;div className=&quot;rounded-lg bg-gray-800 p-6&quot;&gt;
      &lt;h3 className=&quot;mb-6 text-lg font-medium text-white&quot;&gt;Ship Statistics&lt;/h3&gt;

      {/* Weapons */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;div className=&quot;mb-4 flex items-center space-x-2&quot;&gt;
          &lt;Crosshair className=&quot;h-5 w-5 text-red-400&quot; /&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Weapons&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-4&quot;&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Damage&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.weapons.damage}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Range&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.weapons.range}ly&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Accuracy&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.weapons.accuracy}%&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Defense */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;div className=&quot;mb-4 flex items-center space-x-2&quot;&gt;
          &lt;Shield className=&quot;h-5 w-5 text-blue-400&quot; /&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Defense&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-4&quot;&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Hull&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.defense.hull}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Shield&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.defense.shield}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Armor&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.defense.armor}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Mobility */}
      &lt;div className=&quot;mb-6&quot;&gt;
        &lt;div className=&quot;mb-4 flex items-center space-x-2&quot;&gt;
          &lt;Activity className=&quot;h-5 w-5 text-green-400&quot; /&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Mobility&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-4&quot;&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Speed&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.mobility.speed}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Agility&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.mobility.agility}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Jump Range&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.mobility.jumpRange}ly&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      {/* Systems */}
      &lt;div&gt;
        &lt;div className=&quot;mb-4 flex items-center space-x-2&quot;&gt;
          &lt;Zap className=&quot;h-5 w-5 text-yellow-400&quot; /&gt;
          &lt;h4 className=&quot;text-sm font-medium text-gray-300&quot;&gt;Systems&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div className=&quot;grid grid-cols-3 gap-4&quot;&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Power&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.systems.power}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Radar&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.systems.radar}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Efficiency&lt;/div&gt;
            &lt;div className=&quot;text-lg font-medium text-white&quot;&gt;{stats.systems.efficiency}%&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ships/base/BaseShip.tsx (Line 45:2 - Line 54:24),
              src/components/ships/common/FactionShipBase.tsx (Line 64:2 - Line 73:50)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn215"
              onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn215"
              onclick="toggleCodeBlock('cloneGroup215', 'expandBtn215', 'collapseBtn215')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup215"
            ><code class="language-tsx text-sm text-gray-800">} = useShipActions();
  const { activeEffects, clearExpiredEffects } = useShipEffects();

  // Clear expired effects periodically
  useEffect(() =&gt; {
    const interval = setInterval(clearExpiredEffects, 1000);
    return () =&gt; clearInterval(interval);
  }, [clearExpiredEffects]);

  // Handle weapon firing</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/visualizations/AnalysisVisualization.tsx (Line 388:2 - Line
              399:7), src/components/exploration/visualizations/AnalysisVisualization.tsx (Line
              367:8 - Line 378:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn216"
              onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn216"
              onclick="toggleCodeBlock('cloneGroup216', 'expandBtn216', 'collapseBtn216')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup216"
            ><code class="language-tsx text-sm text-gray-800">).forEach(([k, v]) =&gt; {
            if (
              v === null ||
              v === undefined ||
              typeof v === 'string' ||
              typeof v === 'number' ||
              typeof v === 'boolean'
            ) {
              safeObj[k] = v;
            }
          });
          result</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/combat/radar/RadarSweepAnimation.tsx (Line 85:3 - Line 99:6),
              src/components/combat/radar/RangeIndicators.tsx (Line 51:3 - Line 65:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn217"
              onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn217"
              onclick="toggleCodeBlock('cloneGroup217', 'expandBtn217', 'collapseBtn217')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup217"
            ><code class="language-tsx text-sm text-gray-800">useEffect(() =&gt; {
    const canvas = canvasRef.current;
    if (!canvas) {
      return;
    }

    const ctx = canvas.getContext('2d');
    if (!ctx) {
      return;
    }

    // Clear canvas
    ctx.clearRect(0, 0, size, size);

    const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/combat/radar/DetectionVisualization.tsx (Line 46:3 - Line 60:25),
              src/components/combat/radar/RangeIndicators.tsx (Line 51:3 - Line 65:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn218"
              onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn218"
              onclick="toggleCodeBlock('cloneGroup218', 'expandBtn218', 'collapseBtn218')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup218"
            ><code class="language-tsx text-sm text-gray-800">useEffect(() =&gt; {
    const canvas = canvasRef.current;
    if (!canvas) {
      return;
    }

    const ctx = canvas.getContext('2d');
    if (!ctx) {
      return;
    }

    // Clear canvas
    ctx.clearRect(0, 0, size, size);

    // Draw detected objects</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/combat/formations/FormationVisualizer.tsx (Line 95:8 - Line 102:6),
              src/components/combat/formations/FormationVisualizer.tsx (Line 69:8 - Line 76:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn219"
              onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn219"
              onclick="toggleCodeBlock('cloneGroup219', 'expandBtn219', 'collapseBtn219')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup219"
            ><code class="language-tsx text-sm text-gray-800">:
        for (let i = 0; i &lt; shipCount; i++) {
          if (i === 0) {
            positions.push({ x: centerX, y: centerY - 20 });
          } else {
            const side = i % 2 === 0 ? 1 : -1;
            const row = Math.floor((i + 1) / 2);
            const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/GrowthRateModifiers.tsx (Line 53:10 - Line 64:2),
              src/components/buildings/colony/PopulationGrowthModule.tsx (Line 56:16 - Line 66:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn221"
              onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn221"
              onclick="toggleCodeBlock('cloneGroup221', 'expandBtn221', 'collapseBtn221')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup221"
            ><code class="language-tsx text-sm text-gray-800">.filter(m =&gt; m.active);

    if (activeModifiers.length === 0) {
      return baseGrowthRate;
    }

    const totalEffect = activeModifiers.reduce((total, modifier) =&gt; {
      return total * modifier.effect;
    }, 1);

    return baseGrowthRate * totalEffect;
  };</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyManagementSystem.tsx (Line 39:1 - Line 63:16),
              src/components/buildings/colony/TradeRouteVisualization.tsx (Line 6:1 - Line 30:29)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn222"
              onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn222"
              onclick="toggleCodeBlock('cloneGroup222', 'expandBtn222', 'collapseBtn222')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup222"
            ><code class="language-tsx text-sm text-gray-800">interface TradePartner {
  id: string;
  name: string;
  distance: number; // Distance in light years or other unit
  position: { x: number; y: number }; // Relative position for visualization
}

interface TradeResource {
  id: string;
  name: string;
  type: 'import' | 'export';
  amount: number;
  value: number;
}

interface TradeRoute {
  id: string;
  partnerId: string;
  status: 'active' | 'pending' | 'disrupted';
  resources: TradeResource[];
  efficiency: number; // 0-1 efficiency factor
  lastTradeTime: number; // Timestamp of last trade
}

interface PopulationEvent</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyManagementSystem.tsx (Line 72:1 - Line 88:13),
              src/components/buildings/colony/ColonyMap.tsx (Line 4:1 - Line 20:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn223"
              onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn223"
              onclick="toggleCodeBlock('cloneGroup223', 'expandBtn223', 'collapseBtn223')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup223"
            ><code class="language-tsx text-sm text-gray-800">interface BuildingData {
  id: string;
  type:
    | 'housing'
    | 'industry'
    | 'agriculture'
    | ResourceType.ENERGY
    | ResourceType.RESEARCH
    | 'infrastructure';
  name: string;
  level: number;
  position: { x: number; y: number };
  size: { width: number; height: number };
  status: 'operational' | 'constructing' | 'upgrading' | 'damaged' | 'inactive';
}

interface ResourceData</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyManagementSystem.tsx (Line 281:2 - Line 295:28),
              src/components/buildings/colony/PopulationGrowthModule.tsx (Line 55:2 - Line 68:36)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn224"
              onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn224"
              onclick="toggleCodeBlock('cloneGroup224', 'expandBtn224', 'collapseBtn224')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup224"
            ><code class="language-tsx text-sm text-gray-800">= useCallback(() =&gt; {
    const activeModifiers = growthModifiers.filter(m =&gt; m.active);

    if (activeModifiers.length === 0) {
      return baseGrowthRate;
    }

    const totalEffect = activeModifiers.reduce((total, modifier) =&gt; {
      return total * modifier.effect;
    }, 1);

    return baseGrowthRate * totalEffect;
  }, [baseGrowthRate, growthModifiers]);

  // Handle population change</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyCore.tsx (Line 13:3 - Line 33:33),
              src/components/buildings/mothership/MothershipCore.tsx (Line 16:3 - Line 36:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn226"
              onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn226"
              onclick="toggleCodeBlock('cloneGroup226', 'expandBtn226', 'collapseBtn226')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup226"
            ><code class="language-tsx text-sm text-gray-800">{
    id: 'top',
    position: { x: 0, y: -100 },
    allowedTypes: ['radar', 'hangar', 'academy'],
  },
  {
    id: 'right',
    position: { x: 100, y: 0 },
    allowedTypes: ['radar', 'hangar', 'academy'],
  },
  {
    id: 'bottom',
    position: { x: 0, y: 100 },
    allowedTypes: ['radar', 'hangar', 'academy'],
  },
  {
    id: 'left',
    position: { x: -100, y: 0 },
    allowedTypes: ['radar', 'hangar', 'academy'],
  },
  // Colony-specific module points</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyCore.tsx (Line 69:3 - Line 110:7),
              src/components/buildings/mothership/MothershipCore.tsx (Line 153:3 - Line 194:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn227"
              onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn227"
              onclick="toggleCodeBlock('cloneGroup227', 'expandBtn227', 'collapseBtn227')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup227"
            ><code class="language-tsx text-sm text-gray-800">// Context menu for attachment points
  const getAttachmentPointMenuItems = (point: ModuleAttachmentPoint): ContextMenuItem[] =&gt; {
    const attachedModule = modules.find(
      (m: ModularBuilding['modules'][0]) =&gt;
        m.position.x === point.position.x &amp;&amp; m.position.y === point.position.y
    );

    if (attachedModule) {
      return [
        {
          id: 'detach',
          label: 'Detach Module',
          icon: &lt;X className=&quot;h-4 w-4&quot; /&gt;,
          action: () =&gt; onModuleDetach?.(attachedModule.id),
        },
      ];
    }

    return point.allowedTypes.map(type =&gt; {
      const config = defaultModuleConfigs[type];
      const Icon = MODULE_ICONS[type as keyof typeof MODULE_ICONS];
      return {
        id: type,
        label: config.name,
        icon: Icon ? &lt;Icon className=&quot;h-4 w-4&quot; /&gt; : undefined,
        action: () =&gt; onModuleAttach?.(type, point.id),
      };
    });
  };

  const handleModuleDrop = (item: DragItem, point: ModuleAttachmentPoint) =&gt; {
    if (
      item?.type === 'module' &amp;&amp;
      point.allowedTypes.includes(item?.data?.type as ModuleType) &amp;&amp;
      typeof item?.data?.type === 'string'
    ) {
      const moduleType = item?.data?.type as ModuleType;
      onModuleAttach?.(moduleType, point.id);
    }
  };

  return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/ColonyCore.tsx (Line 120:25 - Line 161:2),
              src/components/buildings/mothership/MothershipCore.tsx (Line 271:29 - Line 312:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn228"
              onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn228"
              onclick="toggleCodeBlock('cloneGroup228', 'expandBtn228', 'collapseBtn228')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup228"
            ><code class="language-tsx text-sm text-gray-800">.map(point =&gt; {
              const attachedModule = modules.find(
                (m: ModularBuilding['modules'][0]) =&gt;
                  m.position.x === point.position.x &amp;&amp; m.position.y === point.position.y
              );

              const { handleContextMenu, ContextMenuComponent } = useContextMenu({
                items: getAttachmentPointMenuItems(point),
              });

              return (
                &lt;div key={point.id}&gt;
                  &lt;DropTarget
                    accept={['module']}
                    onDrop={item =&gt; handleModuleDrop(item, point)}
                    className=&quot;rounded-lg bg-gray-800 p-4 transition-colors hover:bg-gray-800/80&quot;
                  &gt;
                    &lt;div
                      className=&quot;flex items-center justify-between&quot;
                      onContextMenu={handleContextMenu}
                    &gt;
                      &lt;div&gt;
                        &lt;div className=&quot;text-sm font-medium text-gray-300&quot;&gt;
                          {point.id.charAt(0).toUpperCase() + point.id.slice(1)} Attachment Point
                        &lt;/div&gt;
                        {attachedModule ? (
                          &lt;Draggable
                            item={{
                              id: attachedModule.id,
                              type: 'module',
                              data: attachedModule,
                            }}
                            className=&quot;cursor-grab text-xs text-gray-500 hover:text-gray-400&quot;
                          &gt;
                            {attachedModule.name}
                          &lt;/Draggable&gt;
                        ) : (
                          &lt;div className=&quot;text-xs text-gray-500&quot;&gt;
                            Empty (Accepts: {point.allowedTypes.join(', ')})
                          &lt;/div&gt;
                        )}
                        &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/buildings/colony/AutomatedPopulationManager.tsx (Line 94:7 - Line
              106:2), src/components/buildings/colony/PopulationGrowthModule.tsx (Line 108:5 - Line
              121:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn229"
              onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn229"
              onclick="toggleCodeBlock('cloneGroup229', 'expandBtn229', 'collapseBtn229')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup229"
            ><code class="language-tsx text-sm text-gray-800">const event: StandardizedEvent = {
        type: EventType.MODULE_UPDATED,
        moduleId: colonyId,
        moduleType: ResourceType.POPULATION,
        timestamp: Date.now(),
        data: {
          stats: {
            [ResourceType.POPULATION]: newPopulation,
          },
        },
      };
      moduleEventBus.emit(event);
    }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/visualization/renderers/SVGRenderer.tsx (Line 296:19 - Line 319:44),
              src/visualization/renderers/SVGRenderer.tsx (Line 222:16 - Line 244:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn230"
              onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn230"
              onclick="toggleCodeBlock('cloneGroup230', 'expandBtn230', 'collapseBtn230')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup230"
            ><code class="language-tsx text-sm text-gray-800">(
    data: ChartData,
    options: ChartOptions,
    chartArea: ChartArea,
    chartGroup: SVGGElement
  ): void {
    const axes = options?.axes;
    if (!axes?.x || !axes?.y) {
      return;
    }

    const scales = this.calculateScales(data, chartArea, axes.x, axes.y);
    if (!scales) {
      return;
    }

    const themeColors = options?.theme === 'dark' ? this.theme.dark : this.theme.light;

    // Draw each dataset
    data?.datasets.forEach((dataset, datasetIndex) =&gt; {
      const datasetGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      datasetGroup.setAttribute('class', `dataset-${datasetIndex}`);

      // Add the dataset group to the chart group</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/visualization/renderers/SVGRenderer.tsx (Line 361:11 - Line 379:27),
              src/visualization/renderers/SVGRenderer.tsx (Line 222:16 - Line 240:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn231"
              onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn231"
              onclick="toggleCodeBlock('cloneGroup231', 'expandBtn231', 'collapseBtn231')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup231"
            ><code class="language-tsx text-sm text-gray-800">(
    data: ChartData,
    options: ChartOptions,
    chartArea: ChartArea,
    chartGroup: SVGGElement
  ): void {
    const axes = options?.axes;
    if (!axes?.x || !axes?.y) {
      return;
    }

    const scales = this.calculateScales(data, chartArea, axes.x, axes.y);
    if (!scales) {
      return;
    }

    const themeColors = options?.theme === 'dark' ? this.theme.dark : this.theme.light;

    // Create a group for axes</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/visualization/renderers/SVGRenderer.tsx (Line 534:6 - Line 539:6),
              src/visualization/renderers/SVGRenderer.tsx (Line 385:2 - Line 390:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn232"
              onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn232"
              onclick="toggleCodeBlock('cloneGroup232', 'expandBtn232', 'collapseBtn232')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup232"
            ><code class="language-tsx text-sm text-gray-800">.tickCount || 5;
      const xStep = (scales.x.max - scales.x.min) / (xTickCount - 1);

      for (let i = 0; i &lt; xTickCount; i++) {
        const value = scales.x.min + i * xStep;
        const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/visualization/renderers/SVGRenderer.tsx (Line 555:6 - Line 560:6),
              src/visualization/renderers/SVGRenderer.tsx (Line 429:2 - Line 434:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn233"
              onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn233"
              onclick="toggleCodeBlock('cloneGroup233', 'expandBtn233', 'collapseBtn233')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup233"
            ><code class="language-tsx text-sm text-gray-800">.tickCount || 5;
      const yStep = (scales.y.max - scales.y.min) / (yTickCount - 1);

      for (let i = 0; i &lt; yTickCount; i++) {
        const value = scales.y.min + i * yStep;
        const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/resources/useResourceManagement.tsx (Line 193:5 - Line 198:10),
              src/hooks/resources/useResourceManagement.tsx (Line 161:5 - Line 166:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn326"
              onclick="toggleCodeBlock('cloneGroup326', 'expandBtn326', 'collapseBtn326')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn326"
              onclick="toggleCodeBlock('cloneGroup326', 'expandBtn326', 'collapseBtn326')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup326"
            ><code class="language-tsx text-sm text-gray-800">setResourceStates(prev =&gt; {
      const newStates = new Map(prev);
      Object.entries(resources).forEach(([type, amount]) =&gt; {
        const enumType = ensureEnumResourceType(type);
        const currentState = newStates.get(enumType) || { ...defaultResourceState };
        newStates</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/errorHandling/utils/errorBoundaryHOC.tsx (Line 30:10 - Line 35:45),
              src/components/ui/visualization/D3VisualizationErrorBoundary.tsx (Line 29:14 - Line
              34:45)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn348"
              onclick="toggleCodeBlock('cloneGroup348', 'expandBtn348', 'collapseBtn348')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn348"
              onclick="toggleCodeBlock('cloneGroup348', 'expandBtn348', 'collapseBtn348')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup348"
            ><code class="language-tsx text-sm text-gray-800">:&lt;/p&gt;
    &lt;pre className=&quot;mb-3 overflow-auto rounded bg-red-100 p-2 text-sm&quot;&gt;{error.message}&lt;/pre&gt;
    {errorContext &amp;&amp; (
      &lt;div className=&quot;mb-3&quot;&gt;
        &lt;h4 className=&quot;mb-1 font-medium&quot;&gt;Error Context:&lt;/h4&gt;
        &lt;pre className=&quot;overflow-auto rounded bg-red-100 p-2 text-xs</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/errorHandling/utils/errorBoundaryHOC.tsx (Line 65:24 - Line 71:57),
              src/components/ui/visualization/D3VisualizationErrorBoundary.tsx (Line 194:19 - Line
              200:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn349"
              onclick="toggleCodeBlock('cloneGroup349', 'expandBtn349', 'collapseBtn349')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn349"
              onclick="toggleCodeBlock('cloneGroup349', 'expandBtn349', 'collapseBtn349')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup349"
            ><code class="language-tsx text-sm text-gray-800">&gt;,
  onError?: (error: Error, errorInfo: ErrorInfo, componentName: string) =&gt; void
): React.FC&lt;P &amp; { errorContext?: Record&lt;string, unknown&gt;; resetKeys?: unknown[] }&gt; {
  return (props: P &amp; { errorContext?: Record&lt;string, unknown&gt;; resetKeys?: unknown[] }) =&gt; {
    const { errorContext, resetKeys, ...componentProps } = props;

    // Custom error handler that includes the component name</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/SmokeTrailEffect.tsx (Line 70:2 - Line 101:10),
              src/effects/component_effects/ThrusterEffect.tsx (Line 8:8 - Line 39:60)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn350"
              onclick="toggleCodeBlock('cloneGroup350', 'expandBtn350', 'collapseBtn350')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn350"
              onclick="toggleCodeBlock('cloneGroup350', 'expandBtn350', 'collapseBtn350')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup350"
            ><code class="language-tsx text-sm text-gray-800">;

// Define custom element types for Three.js components
type ThreePointsProps = {
  ref?: React.RefObject&lt;THREE.Points&gt;;
  [key: string]: unknown;
};

type ThreeBufferGeometryProps = {
  [key: string]: unknown;
};

type ThreeBufferAttributeProps = {
  attach: string;
  count: number;
  array: Float32Array;
  itemSize: number;
  [key: string]: unknown;
};

type ThreeShaderMaterialProps = {
  attach?: string;
  transparent?: boolean;
  depthWrite?: boolean;
  blending?: THREE.Blending;
  uniforms?: Record&lt;string, { value: unknown }&gt;;
  vertexShader?: string;
  fragmentShader?: string;
  [key: string]: unknown;
};

interface</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/SmokeTrailEffect.tsx (Line 268:4 - Line 306:2),
              src/effects/component_effects/ThrusterEffect.tsx (Line 307:4 - Line 345:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn351"
              onclick="toggleCodeBlock('cloneGroup351', 'expandBtn351', 'collapseBtn351')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn351"
              onclick="toggleCodeBlock('cloneGroup351', 'expandBtn351', 'collapseBtn351')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup351"
            ><code class="language-tsx text-sm text-gray-800">;

  // Use React.createElement with type assertions for Three.js elements
  return React.createElement(
    React.Fragment,
    null,
    React.createElement(
      'points',
      { ref: pointsRef } as ThreePointsProps,
      React.createElement(
        'bufferGeometry',
        {} as ThreeBufferGeometryProps,
        React.createElement('bufferAttribute', {
          attach: 'attributes.position',
          count: particleCount,
          array: positions,
          itemSize: 3,
        } as ThreeBufferAttributeProps),
        React.createElement('bufferAttribute', {
          attach: 'attributes.size',
          count: particleCount,
          array: sizes,
          itemSize: 1,
        } as ThreeBufferAttributeProps),
        React.createElement('bufferAttribute', {
          attach: 'attributes.opacity',
          count: particleCount,
          array: opacities,
          itemSize: 1,
        } as ThreeBufferAttributeProps)
      ),
      React.createElement('shaderMaterial', {
        transparent: true,
        depthWrite: false,
        blending: THREE.AdditiveBlending,
        uniforms: {
          color: { value: new THREE.Color(color) },
        },
        vertexShader:</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ShipPathEffect.tsx (Line 15:2 - Line 32:32),
              src/effects/component_effects/TradeRouteEffect.tsx (Line 21:2 - Line 38:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn352"
              onclick="toggleCodeBlock('cloneGroup352', 'expandBtn352', 'collapseBtn352')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn352"
              onclick="toggleCodeBlock('cloneGroup352', 'expandBtn352', 'collapseBtn352')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup352"
            ><code class="language-tsx text-sm text-gray-800">;
  const glowIntensity = quality === 'low' ? 2 : quality === 'medium' ? 4 : 8;

  // Calculate path
  const dx = target.x - source.x;
  const dy = target.y - source.y;
  const distance = Math.sqrt(dx * dx + dy * dy);
  const midX = (source.x + target.x) / 2;
  const midY = (source.y + target.y) / 2;
  const curvature = distance * 0.2;

  // Path data for curved line
  const path = `
    M ${source.x} ${source.y}
    Q ${midX} ${midY - curvature} ${target.x} ${target.y}
  `;

  // Get color based on ship type</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ShieldEffect.tsx (Line 144:2 - Line 162:19),
              src/effects/component_effects/SmokeTrailEffect.tsx (Line 16:3 - Line 34:25)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn353"
              onclick="toggleCodeBlock('cloneGroup353', 'expandBtn353', 'collapseBtn353')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn353"
              onclick="toggleCodeBlock('cloneGroup353', 'expandBtn353', 'collapseBtn353')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup353"
            ><code class="language-tsx text-sm text-gray-800">useEffect(() =&gt; {
    let frameId: number;
    const state: FrameState = { clock: { elapsedTime: 0 } };
    let lastTime = 0;

    const animate = (time: number) =&gt; {
      const delta = (time - lastTime) / 1000;
      lastTime = time;
      state.clock.elapsedTime += delta;
      callback(state);
      frameId = requestAnimationFrame(animate);
    };

    frameId = requestAnimationFrame(animate);
    return () =&gt; cancelAnimationFrame(frameId);
  }, [callback]);
};

// Mock for extend</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ShieldEffect.tsx (Line 457:1 - Line 464:2),
              src/effects/component_effects/SmokeTrailEffect.tsx (Line 58:1 - Line 65:71)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn354"
              onclick="toggleCodeBlock('cloneGroup354', 'expandBtn354', 'collapseBtn354')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn354"
              onclick="toggleCodeBlock('cloneGroup354', 'expandBtn354', 'collapseBtn354')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup354"
            ><code class="language-tsx text-sm text-gray-800">const Canvas: React.FC&lt;CanvasProps&gt; = ({ children, camera, style }) =&gt; {
  // Apply camera settings to the container style
  const enhancedStyle = {
    ...style,
    // Use camera position to adjust perspective
    perspective: `${1000 / (camera.fov / 75)}px`,
    perspectiveOrigin: `${50 + camera.position[0] * 5}% ${50 - camera.position[1] * 5}%`,
  }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ModuleUpgradeTransition.tsx (Line 110:2 - Line 128:2),
              src/effects/component_effects/ProgressionEffects.tsx (Line 89:9 - Line 108:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn357"
              onclick="toggleCodeBlock('cloneGroup357', 'expandBtn357', 'collapseBtn357')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn357"
              onclick="toggleCodeBlock('cloneGroup357', 'expandBtn357', 'collapseBtn357')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup357"
            ><code class="language-tsx text-sm text-gray-800">)
    ),

    /* Progress Ring */
    React.createElement(
      'svg',
      { className: 'absolute inset-0', viewBox: '0 0 100 100' },
      React.createElement('circle', {
        cx: '50',
        cy: '50',
        r: '45',
        fill: 'none',
        stroke: `rgb(var(--color-${color}-500))`,
        strokeWidth: '2',
        strokeDasharray: `${progress * 283} 283`,
        transform: 'rotate(-90 50 50)',
        className: 'opacity-30',
      })
    ),</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ExplosionEffect.tsx (Line 14:7 - Line 25:2),
              src/effects/component_effects/SmokeTrailEffect.tsx (Line 14:11 - Line 25:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn358"
              onclick="toggleCodeBlock('cloneGroup358', 'expandBtn358', 'collapseBtn358')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn358"
              onclick="toggleCodeBlock('cloneGroup358', 'expandBtn358', 'collapseBtn358')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup358"
            ><code class="language-tsx text-sm text-gray-800">) =&gt; void): void =&gt; {
  // This is a mock implementation
  useEffect(() =&gt; {
    let frameId: number;
    const state: FrameState = { clock: { elapsedTime: 0 } };
    let lastTime = 0;

    const animate = (time: number) =&gt; {
      const delta = (time - lastTime) / 1000;
      lastTime = time;
      state.clock.elapsedTime += delta;
      callback(state,</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ExplorationHub.tsx (Line 271:58 - Line 283:15),
              src/effects/component_effects/MineralProcessing.tsx (Line 204:59 - Line 216:22)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn359"
              onclick="toggleCodeBlock('cloneGroup359', 'expandBtn359', 'collapseBtn359')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn359"
              onclick="toggleCodeBlock('cloneGroup359', 'expandBtn359', 'collapseBtn359')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup359"
            ><code class="language-tsx text-sm text-gray-800">,
            style: {
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 2}s`,
              opacity: 0.5 + Math.random() * 0.5,
            },
          })
        )
      )
    ),

    /* Hub Info */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/ColonyStarStation.tsx (Line 175:58 - Line 183:2),
              src/effects/component_effects/MineralProcessing.tsx (Line 204:59 - Line 213:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn360"
              onclick="toggleCodeBlock('cloneGroup360', 'expandBtn360', 'collapseBtn360')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn360"
              onclick="toggleCodeBlock('cloneGroup360', 'expandBtn360', 'collapseBtn360')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup360"
            ><code class="language-tsx text-sm text-gray-800">,
              style: {
                left: `${Math.random() * 100}%`,
                top: `${Math.random() * 100}%`,
                animationDelay: `${Math.random() * 2}s`,
                opacity: 0.5 + Math.random() * 0.5,
              },
            })
          ),</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/CentralMothership.tsx (Line 105:60 - Line 117:24),
              src/effects/component_effects/MineralProcessing.tsx (Line 204:59 - Line 216:22)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn361"
              onclick="toggleCodeBlock('cloneGroup361', 'expandBtn361', 'collapseBtn361')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn361"
              onclick="toggleCodeBlock('cloneGroup361', 'expandBtn361', 'collapseBtn361')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup361"
            ><code class="language-tsx text-sm text-gray-800">,
            style: {
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 2}s`,
              opacity: 0.5 + Math.random() * 0.5,
            },
          })
        )
      )
    ),

    /* Status Indicators */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/BuildingUpgradeEffect.tsx (Line 49:2 - Line 58:2),
              src/effects/component_effects/ProgressionEffects.tsx (Line 38:2 - Line 46:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn362"
              onclick="toggleCodeBlock('cloneGroup362', 'expandBtn362', 'collapseBtn362')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn362"
              onclick="toggleCodeBlock('cloneGroup362', 'expandBtn362', 'collapseBtn362')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup362"
            ><code class="language-tsx text-sm text-gray-800">,
        React.createElement(
          'div',
          { className: 'flex items-center space-x-1' },
          Array.from({ length: tier }).map((_, i) =&gt;
            React.createElement(Star, { key: i, className: `h-3 w-3 text-${color}-400` })
          )
        )
      )
    )</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/BuildingUpgradeEffect.tsx (Line 73:7 - Line 81:4),
              src/effects/component_effects/ProgressionEffects.tsx (Line 62:7 - Line 70:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn363"
              onclick="toggleCodeBlock('cloneGroup363', 'expandBtn363', 'collapseBtn363')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn363"
              onclick="toggleCodeBlock('cloneGroup363', 'expandBtn363', 'collapseBtn363')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup363"
            ><code class="language-tsx text-sm text-gray-800">Array.from({ length: particleCount }).map((_, i) =&gt;
        React.createElement('div', {
          key: i,
          className: `absolute h-2 w-2 rounded-full bg-${color}-400`,
          style: {
            left: `${Math.random() * 100}%`,
            top: `${Math.random() * 100}%`,
            animation: `float ${3 + Math.random() * 2}s infinite`,
            opacity: 0.3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/BuildingUpgradeEffect.tsx (Line 105:7 - Line 115:17),
              src/effects/component_effects/ProgressionEffects.tsx (Line 93:5 - Line 103:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn364"
              onclick="toggleCodeBlock('cloneGroup364', 'expandBtn364', 'collapseBtn364')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn364"
              onclick="toggleCodeBlock('cloneGroup364', 'expandBtn364', 'collapseBtn364')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup364"
            ><code class="language-tsx text-sm text-gray-800">React.createElement(
        'svg',
        { className: 'absolute inset-0', viewBox: '0 0 100 100' },
        React.createElement('circle', {
          cx: '50',
          cy: '50',
          r: '45',
          fill: 'none',
          stroke: `rgb(var(--color-${color}-500))`,
          strokeWidth: '2',
          strokeDasharray: `${upgradeProgress </code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/BackgroundEffect.tsx (Line 15:3 - Line 34:19),
              src/effects/component_effects/StarSystemBackdrop.tsx (Line 13:2 - Line 32:28)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn365"
              onclick="toggleCodeBlock('cloneGroup365', 'expandBtn365', 'collapseBtn365')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn365"
              onclick="toggleCodeBlock('cloneGroup365', 'expandBtn365', 'collapseBtn365')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup365"
            ><code class="language-tsx text-sm text-gray-800">useEffect(() =&gt; {
    const canvas = canvasRef.current;
    if (!canvas) {
      return;
    }

    const ctx = canvas.getContext('2d');
    if (!ctx) {
      return;
    }

    // Set canvas size
    const resizeCanvas = () =&gt; {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Particle system</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/effects/component_effects/BackgroundEffect.tsx (Line 139:19 - Line 154:10),
              src/effects/component_effects/StarSystemBackdrop.tsx (Line 100:14 - Line 115:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn366"
              onclick="toggleCodeBlock('cloneGroup366', 'expandBtn366', 'collapseBtn366')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn366"
              onclick="toggleCodeBlock('cloneGroup366', 'expandBtn366', 'collapseBtn366')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup366"
            ><code class="language-tsx text-sm text-gray-800">);

        ctx.fillStyle = nebulaGradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }

      animationFrame = requestAnimationFrame(animate);
    };

    animate();

    return () =&gt; {
      window.removeEventListener('resize', resizeCanvas);
      cancelAnimationFrame(animationFrame);
    };
  }, [quality, intensity</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/weapons/WeaponControl.tsx (Line 59:6 - Line 66:6),
              src/components/weapons/WeaponSystem.tsx (Line 59:13 - Line 67:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn382"
              onclick="toggleCodeBlock('cloneGroup382', 'expandBtn382', 'collapseBtn382')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn382"
              onclick="toggleCodeBlock('cloneGroup382', 'expandBtn382', 'collapseBtn382')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup382"
            ><code class="language-tsx text-sm text-gray-800">.damage}&lt;/span&gt;
            &lt;span className=&quot;text-sm text-gray-400&quot;&gt;DPS&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;div className=&quot;mb-1 text-sm text-gray-400&quot;&gt;Range&lt;/div&gt;
          &lt;div className=&quot;flex items-baseline space-x-1&quot;&gt;
            &lt;span className=&quot;text-2xl font-bold text-white&quot;&gt;{weapon.stats</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/weapons/WeaponControl.tsx (Line 151:16 - Line 160:2),
              src/components/weapons/WeaponSystem.tsx (Line 109:16 - Line 118:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn383"
              onclick="toggleCodeBlock('cloneGroup383', 'expandBtn383', 'collapseBtn383')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn383"
              onclick="toggleCodeBlock('cloneGroup383', 'expandBtn383', 'collapseBtn383')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup383"
            ><code class="language-tsx text-sm text-gray-800">bg-${color}-600 hover:bg-${color}-700 text-white`
            : 'cursor-not-allowed bg-gray-700 text-gray-500'
        }`}
      &gt;
        &lt;Crosshair className=&quot;h-5 w-5&quot; /&gt;
        &lt;span&gt;Fire Weapon&lt;/span&gt;
      &lt;/button&gt;
    &lt;/div&gt;
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/weapons/WeaponComponents.tsx (Line 139:15 - Line 154:2),
              src/components/weapons/WeaponControl.tsx (Line 128:19 - Line 143:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn384"
              onclick="toggleCodeBlock('cloneGroup384', 'expandBtn384', 'collapseBtn384')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn384"
              onclick="toggleCodeBlock('cloneGroup384', 'expandBtn384', 'collapseBtn384')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup384"
            ><code class="language-tsx text-sm text-gray-800">}
          &gt;
            &lt;div className=&quot;mb-1 flex items-center justify-between&quot;&gt;
              &lt;span className=&quot;text-sm font-medium text-white&quot;&gt;{effect.name}&lt;/span&gt;
              {effect.active ? (
                &lt;span className=&quot;text-xs text-green-400&quot;&gt;Active&lt;/span&gt;
              ) : (
                &lt;span className=&quot;text-xs text-gray-400&quot;&gt;{effect.cooldown}s&lt;/span&gt;
              )}
            &lt;/div&gt;
            &lt;p className=&quot;text-xs text-gray-400&quot;&gt;{effect.description}&lt;/p&gt;
          &lt;/button&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/weapons/WeaponComponents.tsx (Line 219:32 - Line 226:15),
              src/components/weapons/WeaponUpgradeSystem.tsx (Line 97:29 - Line 106:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn385"
              onclick="toggleCodeBlock('cloneGroup385', 'expandBtn385', 'collapseBtn385')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn385"
              onclick="toggleCodeBlock('cloneGroup385', 'expandBtn385', 'collapseBtn385')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup385"
            ><code class="language-tsx text-sm text-gray-800">&quot;&gt;
          &lt;div className=&quot;text-xs font-medium text-gray-300&quot;&gt;{upgrade.specialEffect.name}&lt;/div&gt;
          &lt;div className=&quot;text-xs text-gray-400&quot;&gt;{upgrade.specialEffect.description}&lt;/div&gt;
        &lt;/div&gt;
      )}

      {/* Requirements */}
      &lt;div className=&quot;mb-3 space-y-2</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/SprawlView.tsx (Line 189:5 - Line 206:8),
              src/components/buildings/modules/ExplorationHub/ExplorationWindow.tsx (Line 133:2 -
              Line 49:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn386"
              onclick="toggleCodeBlock('cloneGroup386', 'expandBtn386', 'collapseBtn386')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn386"
              onclick="toggleCodeBlock('cloneGroup386', 'expandBtn386', 'collapseBtn386')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup386"
            ><code class="language-tsx text-sm text-gray-800">);
  const isDragging = useRef(false);
  const lastPosition = useRef({ x: 0, y: 0 });

  const handleMouseDown = (e: React.MouseEvent) =&gt; {
    isDragging.current = true;
    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseMove = (e: React.MouseEvent) =&gt; {
    if (!isDragging.current) {
      return;
    }

    const deltaX = e.clientX - lastPosition.current.x;
    const deltaY = e.clientY - lastPosition.current.y;

    setView</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/SprawlView.tsx (Line 211:2 - Line 222:8),
              src/components/buildings/modules/MiningHub/MiningMap.tsx (Line 51:7 - Line 62:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn387"
              onclick="toggleCodeBlock('cloneGroup387', 'expandBtn387', 'collapseBtn387')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn387"
              onclick="toggleCodeBlock('cloneGroup387', 'expandBtn387', 'collapseBtn387')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup387"
            ><code class="language-tsx text-sm text-gray-800">,
    }));

    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseUp = () =&gt; {
    isDragging.current = false;
  };

  const handleZoom = (delta: number) =&gt; {
    setView</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/GalaxyMap.tsx (Line 186:2 - Line 225:13),
              src/components/ui/SprawlView.tsx (Line 189:2 - Line 228:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn389"
              onclick="toggleCodeBlock('cloneGroup389', 'expandBtn389', 'collapseBtn389')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn389"
              onclick="toggleCodeBlock('cloneGroup389', 'expandBtn389', 'collapseBtn389')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup389"
            ><code class="language-tsx text-sm text-gray-800">= useRef&lt;HTMLDivElement&gt;(null);
  const isDragging = useRef(false);
  const lastPosition = useRef({ x: 0, y: 0 });

  const handleMouseDown = (e: React.MouseEvent) =&gt; {
    isDragging.current = true;
    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseMove = (e: React.MouseEvent) =&gt; {
    if (!isDragging.current) {
      return;
    }

    const deltaX = e.clientX - lastPosition.current.x;
    const deltaY = e.clientY - lastPosition.current.y;

    setView(prev =&gt; ({
      ...prev,
      position: {
        x: prev.position.x + deltaX,
        y: prev.position.y + deltaY,
      },
    }));

    lastPosition.current = { x: e.clientX, y: e.clientY };
  };

  const handleMouseUp = () =&gt; {
    isDragging.current = false;
  };

  const handleZoom = (delta: number) =&gt; {
    setView(prev =&gt; ({
      ...prev,
      zoom: Math.max(0.5, Math.min(2, prev.zoom + delta)),
    }));
  };

  const selectSystem</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/GalaxyMap.tsx (Line 362:7 - Line 372:12),
              src/components/ui/SprawlView.tsx (Line 425:9 - Line 435:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn390"
              onclick="toggleCodeBlock('cloneGroup390', 'expandBtn390', 'collapseBtn390')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn390"
              onclick="toggleCodeBlock('cloneGroup390', 'expandBtn390', 'collapseBtn390')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup390"
            ><code class="language-tsx text-sm text-gray-800">&gt;
        &lt;div
          className=&quot;absolute inset-0 transition-transform duration-300 ease-out&quot;
          style={{
            transform: `translate(${view.position.x}px, ${view.position.y}px) scale(${view.zoom})`,
          }}
        &gt;
          {/* Trade Routes */}
          {view.activeOverlays.includes('trade') &amp;&amp; (
            &lt;svg className=&quot;pointer-events-none absolute inset-0&quot;&gt;
              {mockSystems</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/LongSessionMemoryVisualizer.tsx (Line 374:2 - Line 382:4),
              src/components/performance/LongSessionMemoryVisualizer.tsx (Line 356:2 - Line 364:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn391"
              onclick="toggleCodeBlock('cloneGroup391', 'expandBtn391', 'collapseBtn391')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn391"
              onclick="toggleCodeBlock('cloneGroup391', 'expandBtn391', 'collapseBtn391')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup391"
            ><code class="language-tsx text-sm text-gray-800">=&gt; {
      const x =
        padding.left + ((snapshot.timestamp - startTime) / (endTime - startTime)) * chartWidth;
      const y =
        padding.top +
        chartHeight -
        ((snapshot.usedHeapSizeMB - minMemory) / (maxMemory - minMemory)) * chartHeight;

      ctx</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/DeviceCapabilityReport.tsx (Line 556:3 - Line 572:5),
              src/components/performance/DeviceCapabilityReport.tsx (Line 539:2 - Line 555:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn392"
              onclick="toggleCodeBlock('cloneGroup392', 'expandBtn392', 'collapseBtn392')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn392"
              onclick="toggleCodeBlock('cloneGroup392', 'expandBtn392', 'collapseBtn392')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup392"
            ><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;li className=&quot;flex items-start&quot;&gt;
              &lt;svg
                className=&quot;mr-1 mt-0.5 h-5 w-5 text-red-500&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;High</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/DeviceCapabilityReport.tsx (Line 576:36 - Line 589:11),
              src/components/performance/DeviceCapabilityReport.tsx (Line 542:33 - Line 555:9)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn393"
              onclick="toggleCodeBlock('cloneGroup393', 'expandBtn393', 'collapseBtn393')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn393"
              onclick="toggleCodeBlock('cloneGroup393', 'expandBtn393', 'collapseBtn393')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup393"
            ><code class="language-tsx text-sm text-gray-800">&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;JavaScript</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/DeviceCapabilityReport.tsx (Line 613:3 - Line 629:7),
              src/components/performance/DeviceCapabilityReport.tsx (Line 596:2 - Line 612:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn394"
              onclick="toggleCodeBlock('cloneGroup394', 'expandBtn394', 'collapseBtn394')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn394"
              onclick="toggleCodeBlock('cloneGroup394', 'expandBtn394', 'collapseBtn394')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup394"
            ><code class="language-tsx text-sm text-gray-800">&gt;
            &lt;li className=&quot;flex items-start&quot;&gt;
              &lt;svg
                className=&quot;mr-1 mt-0.5 h-5 w-5 text-green-500&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;Reduce</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/DeviceCapabilityReport.tsx (Line 629:10 - Line 646:9),
              src/components/performance/DeviceCapabilityReport.tsx (Line 612:15 - Line 612:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn395"
              onclick="toggleCodeBlock('cloneGroup395', 'expandBtn395', 'collapseBtn395')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn395"
              onclick="toggleCodeBlock('cloneGroup395', 'expandBtn395', 'collapseBtn395')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup395"
            ><code class="language-tsx text-sm text-gray-800">&lt;/span&gt;
            &lt;/li&gt;
            &lt;li className=&quot;flex items-start&quot;&gt;
              &lt;svg
                className=&quot;mr-1 mt-0.5 h-5 w-5 text-green-500&quot;
                fill=&quot;none&quot;
                stroke=&quot;currentColor&quot;
                viewBox=&quot;0 0 24 24&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
              &gt;
                &lt;path
                  strokeLinecap=&quot;round&quot;
                  strokeLinejoin=&quot;round&quot;
                  strokeWidth={2}
                  d=&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                /&gt;
              &lt;/svg&gt;
              &lt;span&gt;Optimize</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/performance/DeviceCapabilityReport.tsx (Line 769:2 - Line 782:5),
              src/components/performance/GeographicAnalysisDashboard.tsx (Line 611:2 - Line 624:39)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn396"
              onclick="toggleCodeBlock('cloneGroup396', 'expandBtn396', 'collapseBtn396')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn396"
              onclick="toggleCodeBlock('cloneGroup396', 'expandBtn396', 'collapseBtn396')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup396"
            ><code class="language-tsx text-sm text-gray-800">;
  };

  if (isLoading) {
    return (
      &lt;div className=&quot;flex h-96 items-center justify-center&quot;&gt;
        &lt;div className=&quot;h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-blue-500&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className=&quot;py-6&quot;&gt;
      &lt;div className=&quot;mb-6</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/factions/FactionManager.tsx (Line 195:2 - Line 210:17),
              src/components/ships/FactionShips/FactionDashboard.tsx (Line 292:2 - Line 307:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn397"
              onclick="toggleCodeBlock('cloneGroup397', 'expandBtn397', 'collapseBtn397')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn397"
              onclick="toggleCodeBlock('cloneGroup397', 'expandBtn397', 'collapseBtn397')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup397"
            ><code class="language-tsx text-sm text-gray-800">0,
            status: 'neutral',
            tradingEnabled: true,
            lastInteraction: Date.now(),
          }}
          availableActions={[
            {
              type: 'ceasefire',
              name: 'Negotiate Ceasefire',
              description: 'Attempt to establish temporary peace',
              requirements: [{ type: 'Credits', value: 5000 }],
              available: true,
            },
          ]}
          onAction={() =&gt; {}}
          onClose={() =&gt; setShowDiplomacy</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/RealTimeMapUpdates.tsx (Line 179:12 - Line 194:22),
              src/components/exploration/RealTimeMapUpdates.tsx (Line 138:9 - Line 153:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn398"
              onclick="toggleCodeBlock('cloneGroup398', 'expandBtn398', 'collapseBtn398')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn398"
              onclick="toggleCodeBlock('cloneGroup398', 'expandBtn398', 'collapseBtn398')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup398"
            ><code class="language-tsx text-sm text-gray-800">,
              lastUpdate: Date.now(),
            };
          }
          return ship;
        })
      );

      setUpdateStats(prev =&gt; ({
        ...prev,
        sectorsUpdated: prev.sectorsUpdated + 1,
        shipsUpdated: prev.shipsUpdated + 1,
      }));
    };

    const handleAnomalyDetected</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMappingSystem.tsx (Line 7:1 - Line 20:15),
              src/components/exploration/RealTimeMapUpdates.tsx (Line 16:1 - Line 29:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn399"
              onclick="toggleCodeBlock('cloneGroup399', 'expandBtn399', 'collapseBtn399')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn399"
              onclick="toggleCodeBlock('cloneGroup399', 'expandBtn399', 'collapseBtn399')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup399"
            ><code class="language-tsx text-sm text-gray-800">interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
  resources?: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  factionControl</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMappingSystem.tsx (Line 124:2 - Line 134:14),
              src/components/ui/GalaxyMap.tsx (Line 127:2 - Line 136:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn400"
              onclick="toggleCodeBlock('cloneGroup400', 'expandBtn400', 'collapseBtn400')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn400"
              onclick="toggleCodeBlock('cloneGroup400', 'expandBtn400', 'collapseBtn400')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup400"
            ><code class="language-tsx text-sm text-gray-800">;

      setCosmicEvents(prev =&gt; [...prev, newEvent]);

      // Remove event after duration
      setTimeout(() =&gt; {
        setCosmicEvents(prev =&gt; prev.filter(e =&gt; e.id !== newEvent.id));
      }, newEvent.duration);
    };

    const interval = setInterval(generateEvent</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMappingSystem.tsx (Line 180:9 - Line 190:23),
              src/components/ui/SprawlView.tsx (Line 315:11 - Line 325:15)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn401"
              onclick="toggleCodeBlock('cloneGroup401', 'expandBtn401', 'collapseBtn401')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn401"
              onclick="toggleCodeBlock('cloneGroup401', 'expandBtn401', 'collapseBtn401')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup401"
            ><code class="language-tsx text-sm text-gray-800">{/* Aurora Effect */}
        &lt;div
          className=&quot;absolute inset-0 bg-gradient-to-b from-indigo-500/5 via-transparent to-transparent&quot;
          style={{
            transform: `translateY(${Math.sin(view.dayNightCycle * Math.PI * 2) * 20}px)`,
            opacity: 0.3 + Math.sin(view.dayNightCycle * Math.PI * 2) * 0.2,
          }}
        /&gt;
      &lt;/div&gt;

      {/* Overlay Controls */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMappingSystem.tsx (Line 264:13 - Line 275:2),
              src/components/ui/GalaxyMap.tsx (Line 427:17 - Line 438:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn402"
              onclick="toggleCodeBlock('cloneGroup402', 'expandBtn402', 'collapseBtn402')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn402"
              onclick="toggleCodeBlock('cloneGroup402', 'expandBtn402', 'collapseBtn402')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup402"
            ><code class="language-tsx text-sm text-gray-800">}`}
            style={{
              width: `${event?.radius * 2}px`,
              height: `${event?.radius * 2}px`,
            }}
          &gt;
            &lt;div className=&quot;absolute inset-0 flex items-center justify-center&quot;&gt;
              {event?.type === 'storm' &amp;&amp; &lt;Zap className=&quot;h-8 w-8 text-purple-400&quot; /&gt;}
              {event?.type === 'solarFlare' &amp;&amp; (
                &lt;AlertTriangle className=&quot;h-8 w-8 text-orange-400&quot; /&gt;
              )}
              {event?.type === 'anomaly' &amp;&amp; &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMappingSystem.tsx (Line 295:7 - Line 306:2),
              src/components/ui/GalaxyMap.tsx (Line 613:7 - Line 624:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn403"
              onclick="toggleCodeBlock('cloneGroup403', 'expandBtn403', 'collapseBtn403')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn403"
              onclick="toggleCodeBlock('cloneGroup403', 'expandBtn403', 'collapseBtn403')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup403"
            ><code class="language-tsx text-sm text-gray-800">{/* Tutorial Overlay */}
      {view.showTutorial &amp;&amp; (
        &lt;div className=&quot;fixed inset-0 z-50 flex items-center justify-center bg-black/50&quot;&gt;
          &lt;div className=&quot;max-w-md rounded-lg border border-gray-700 bg-gray-800/95 p-6 backdrop-blur-sm&quot;&gt;
            &lt;h3 className=&quot;mb-4 text-xl font-bold text-white&quot;&gt;Welcome to the Galaxy Map&lt;/h3&gt;
            &lt;div className=&quot;space-y-4 text-gray-300&quot;&gt;
              &lt;p&gt;• Click and drag to pan across the galaxy&lt;/p&gt;
              &lt;p&gt;• Use the mouse wheel or buttons to zoom in/out&lt;/p&gt;
              &lt;p&gt;• Click on star systems to view details and options&lt;/p&gt;
              &lt;p&gt;• Toggle overlays to view faction territories and trade routes&lt;/p&gt;
              &lt;p&gt;• Watch out for cosmic events that may affect travel!&lt;/p&gt;
              &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/GalaxyMapSystem.tsx (Line 6:1 - Line 22:15),
              src/components/exploration/RealTimeMapUpdates.tsx (Line 16:1 - Line 23:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn404"
              onclick="toggleCodeBlock('cloneGroup404', 'expandBtn404', 'collapseBtn404')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn404"
              onclick="toggleCodeBlock('cloneGroup404', 'expandBtn404', 'collapseBtn404')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup404"
            ><code class="language-tsx text-sm text-gray-800">interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
  resources?: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  factionControl?: FactionControl;
}

interface FactionControl</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/ExplorationSystemIntegration.tsx (Line 11:1 - Line 34:10),
              src/components/exploration/RealTimeMapUpdates.tsx (Line 16:1 - Line 39:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn405"
              onclick="toggleCodeBlock('cloneGroup405', 'expandBtn405', 'collapseBtn405')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn405"
              onclick="toggleCodeBlock('cloneGroup405', 'expandBtn405', 'collapseBtn405')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup405"
            ><code class="language-tsx text-sm text-gray-800">interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
  resources?: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
}

interface Anomaly {
  id: string;
  type: 'artifact' | 'signal' | 'phenomenon';
  severity: 'low' | 'medium' | 'high';
  description: string;
  investigated: boolean;
}

interface</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/ExplorationDataManager.tsx (Line 25:2 - Line 37:2),
              src/components/exploration/RealTimeMapUpdates.tsx (Line 13:7 - Line 25:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn406"
              onclick="toggleCodeBlock('cloneGroup406', 'expandBtn406', 'collapseBtn406')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn406"
              onclick="toggleCodeBlock('cloneGroup406', 'expandBtn406', 'collapseBtn406')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup406"
            ><code class="language-tsx text-sm text-gray-800">;
}

interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/DiscoveryClassification.tsx (Line 653:24 - Line 662:3),
              src/components/exploration/DiscoveryClassification.tsx (Line 298:48 - Line 307:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn407"
              onclick="toggleCodeBlock('cloneGroup407', 'expandBtn407', 'collapseBtn407')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn407"
              onclick="toggleCodeBlock('cloneGroup407', 'expandBtn407', 'collapseBtn407')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup407"
            ><code class="language-tsx text-sm text-gray-800">&quot;&gt;
                      &lt;div className=&quot;mb-2 flex items-center&quot;&gt;
                        &lt;div className=&quot;mr-2&quot;&gt;
                          {discovery.type === 'anomaly' ? (
                            &lt;AlertTriangle className=&quot;text-yellow-500&quot; size={18} /&gt;
                          ) : (
                            &lt;Database className=&quot;text-blue-500&quot; size={18} /&gt;
                          )}
                        &lt;/div&gt;
                        &lt;h4</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/DataPointVirtualList.tsx (Line 269:9 - Line 279:2),
              src/components/exploration/DataPointVirtualList.tsx (Line 252:11 - Line 263:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn408"
              onclick="toggleCodeBlock('cloneGroup408', 'expandBtn408', 'collapseBtn408')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn408"
              onclick="toggleCodeBlock('cloneGroup408', 'expandBtn408', 'collapseBtn408')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup408"
            ><code class="language-tsx text-sm text-gray-800">).map(([key, value]) =&gt; (
                      &lt;PropertyRow key={key}&gt;
                        &lt;Typography variant=&quot;caption&quot; color=&quot;text.secondary&quot;&gt;
                          {key}:
                        &lt;/Typography&gt;
                        &lt;Typography variant=&quot;caption&quot; fontWeight=&quot;medium&quot;&gt;
                          {formatValue(value)}
                        &lt;/Typography&gt;
                      &lt;/PropertyRow&gt;
                    ))}
                  &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/DataAnalysisSystem.tsx (Line 556:7 - Line 565:8),
              src/components/exploration/DataAnalysisSystem.tsx (Line 529:7 - Line 538:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn409"
              onclick="toggleCodeBlock('cloneGroup409', 'expandBtn409', 'collapseBtn409')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn409"
              onclick="toggleCodeBlock('cloneGroup409', 'expandBtn409', 'collapseBtn409')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup409"
            ><code class="language-tsx text-sm text-gray-800">const event: StandardizedEvent = {
        type: EventType.MODULE_UPDATED,
        moduleId: selectedConfig.id,
        moduleType: 'exploration',
        timestamp: Date.now(),
        data: {
          action: 'run_analysis',
          configId: selectedConfig.id,
          configType: selectedConfig.type,
          status: 'error'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/DataAnalysisSystem.tsx (Line 844:9 - Line 851:2),
              src/components/exploration/DataAnalysisSystem.tsx (Line 829:11 - Line 837:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn410"
              onclick="toggleCodeBlock('cloneGroup410', 'expandBtn410', 'collapseBtn410')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn410"
              onclick="toggleCodeBlock('cloneGroup410', 'expandBtn410', 'collapseBtn410')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup410"
            ><code class="language-tsx text-sm text-gray-800">).map(([key, value]) =&gt; (
                              &lt;Typography key={key} variant=&quot;body2&quot;&gt;
                                &lt;strong&gt;{key}:&lt;/strong&gt;{' '}
                                {typeof value === 'object' ? JSON.stringify(value) : String(value)}
                              &lt;/Typography&gt;
                            ))}
                          &lt;/div&gt;
                        &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/AutomatedSectorScanner.tsx (Line 9:36 - Line 35:10),
              src/components/exploration/GalaxyMapSystem.tsx (Line 3:8 - Line 34:34)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn411"
              onclick="toggleCodeBlock('cloneGroup411', 'expandBtn411', 'collapseBtn411')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn411"
              onclick="toggleCodeBlock('cloneGroup411', 'expandBtn411', 'collapseBtn411')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup411"
            ><code class="language-tsx text-sm text-gray-800">;
import { ResourceType } from './../../types/resources/ResourceTypes';

interface Sector {
  id: string;
  name: string;
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  coordinates: { x: number; y: number };
  resourcePotential: number;
  habitabilityScore: number;
  anomalies: Anomaly[];
  lastScanned?: number;
  resources?: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
}

interface Anomaly {
  id: string;
  type: 'artifact' | 'signal' | 'phenomenon';
  severity: 'low' | 'medium' | 'high';
  description: string;
  investigated: boolean;
}

interface ReconShip</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/AutomatedSectorScanner.tsx (Line 24:2 - Line 43:11),
              src/components/buildings/modules/ExplorationHub/ExplorationWindow.tsx (Line 29:7 -
              Line 48:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn412"
              onclick="toggleCodeBlock('cloneGroup412', 'expandBtn412', 'collapseBtn412')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn412"
              onclick="toggleCodeBlock('cloneGroup412', 'expandBtn412', 'collapseBtn412')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup412"
            ><code class="language-tsx text-sm text-gray-800">;
}

interface Anomaly {
  id: string;
  type: 'artifact' | 'signal' | 'phenomenon';
  severity: 'low' | 'medium' | 'high';
  description: string;
  investigated: boolean;
}

interface ReconShip {
  id: string;
  name: string;
  status: 'idle' | 'scanning' | 'investigating' | 'returning';
  targetSector?: string;
  experience: number;
  specialization: 'mapping' | 'anomaly' | 'resource';
  efficiency: number;
  lastUpdate</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/AnomalyAnalysis.tsx (Line 16:1 - Line 26:17),
              src/components/exploration/ExplorationDataManager.tsx (Line 16:1 - Line 26:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn413"
              onclick="toggleCodeBlock('cloneGroup413', 'expandBtn413', 'collapseBtn413')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn413"
              onclick="toggleCodeBlock('cloneGroup413', 'expandBtn413', 'collapseBtn413')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup413"
            ><code class="language-tsx text-sm text-gray-800">interface Anomaly {
  id: string;
  type: 'artifact' | 'signal' | 'phenomenon';
  severity: 'low' | 'medium' | 'high';
  description: string;
  investigated: boolean;
  discoveryDate: number;
  sectorId: string;
  sectorName: string;
  coordinates: { x: number; y: number };
  analysisProgress</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/AnalysisConfigManager.tsx (Line 1:1 - Line 24:15),
              src/components/exploration/DatasetManager.tsx (Line 1:1 - Line 23:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn414"
              onclick="toggleCodeBlock('cloneGroup414', 'expandBtn414', 'collapseBtn414')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn414"
              onclick="toggleCodeBlock('cloneGroup414', 'expandBtn414', 'collapseBtn414')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup414"
            ><code class="language-tsx text-sm text-gray-800">import AddIcon from '@mui/icons-material/Add';
import DeleteIcon from '@mui/icons-material/Delete';
import Settings from '@mui/icons-material/Settings';
import {
    Button,
    Dialog,
    DialogActions,
    DialogContent,
    DialogTitle,
    FormControl,
    IconButton,
    InputLabel,
    List,
    ListItem,
    ListItemText,
    MenuItem,
    Select,
    TextField,
    Typography,
} from '@mui/material';
import * as React from 'react';
import { useState } from 'react';
import {
    AnalysisConfig</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/exploration/AdvancedFilteringSystem.tsx (Line 318:2 - Line 336:3),
              src/components/exploration/AdvancedFilteringSystem.tsx (Line 294:2 - Line 313:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn415"
              onclick="toggleCodeBlock('cloneGroup415', 'expandBtn415', 'collapseBtn415')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn415"
              onclick="toggleCodeBlock('cloneGroup415', 'expandBtn415', 'collapseBtn415')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup415"
            ><code class="language-tsx text-sm text-gray-800">* 100)}%
                &lt;/span&gt;
              &lt;/div&gt;
              &lt;input
                type=&quot;range&quot;
                min=&quot;0&quot;
                max=&quot;1&quot;
                step=&quot;0.05&quot;
                value={filters.minHabitabilityScore}
                onChange={e =&gt; handleHabitabilityScoreChange(parseFloat(e.target.value))}
                className=&quot;w-full&quot;
              /&gt;
              &lt;div className=&quot;mt-1 flex justify-between text-xs text-gray-500&quot;&gt;
                &lt;span&gt;0%&lt;/span&gt;
                &lt;span&gt;50%&lt;/span&gt;
                &lt;span&gt;100%&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/visualization/Chart.tsx (Line 339:7 - Line 352:7), src/visualization/Chart.tsx
              (Line 299:7 - Line 312:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn416"
              onclick="toggleCodeBlock('cloneGroup416', 'expandBtn416', 'collapseBtn416')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn416"
              onclick="toggleCodeBlock('cloneGroup416', 'expandBtn416', 'collapseBtn416')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup416"
            ><code class="language-tsx text-sm text-gray-800">// Clear unknown previous errors
      if (error) {
        setError(null);
      }
    } catch (err) {
      const error = err instanceof Error ? err : new Error(String(err));

      // Log error
      errorLoggingService.logError(error, ErrorType.RUNTIME, undefined, {
        component: 'Chart',
        renderer,
        chartType: type,
        dataSize: data?.datasets.reduce((acc, dataset) =&gt; acc + dataset.data?.length, 0),
        action</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/contexts/ShipContext.tsx (Line 185:22 - Line 203:4), src/contexts/ShipContext.tsx
              (Line 136:14 - Line 154:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn437"
              onclick="toggleCodeBlock('cloneGroup437', 'expandBtn437', 'collapseBtn437')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn437"
              onclick="toggleCodeBlock('cloneGroup437', 'expandBtn437', 'collapseBtn437')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup437"
            ><code class="language-tsx text-sm text-gray-800">: {
      const weaponIndex = state.weapons.findIndex(w =&gt; w.id === action.weaponId);
      if (weaponIndex === -1) {
        return state;
      }

      const weapon = state.weapons[weaponIndex];
      if (!weapon.currentWeapon) {
        return state;
      }

      const weapons = [...state.weapons];
      weapons[weaponIndex] = {
        ...weapon,
        currentWeapon: {
          ...weapon.currentWeapon,
          state: {
            ...weapon.currentWeapon.state,
            ...</code></pre>
          </div>
          <!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed-->
        </div>
        <a name="typescript-clones"></a>
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">typescript</h2>
        <div class="divide-y divide-gray-200 border-b-2">
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 238:2 - Line
              256:6), src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 151:5 -
              Line 169:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn122"
              onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn122"
              onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup122"
            ><code class="language-typescript text-sm text-gray-800">fn();
    if (teardownFn) {
      teardownFn();
    }
  }

  // Prepare for actual benchmark
  const executionTimes: number[] = [];
  let memoryUsage: MemoryMeasurement | null = null;

  // Execute the benchmark
  for (let i = 0; i &lt; iterations; i++) {
    if (setupFn) {
      setupFn();
    }

    if (memoryMeasurement &amp;&amp; i === Math.floor(iterations / 2)) {
      // Measure memory usage halfway through the iterations
      const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 267:2 - Line
              287:18), src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 172:2 -
              Line 192:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn123"
              onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn123"
              onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup123"
            ><code class="language-typescript text-sm text-gray-800">);
      const endTime = performance.now();
      executionTimes.push(endTime - startTime);
    }

    if (teardownFn) {
      teardownFn();
    }
  }

  // Calculate statistics
  const totalTime = executionTimes.reduce((sum, time) =&gt; sum + time, 0);
  const averageTime = totalTime / executionTimes.length;
  const sortedTimes = [ ...executionTimes ].sort((a, b) =&gt; a - b);
  const medianTime =
    sortedTimes.length % 2 === 0
      ? (sortedTimes[ sortedTimes.length / 2 - 1 ] + sortedTimes[ sortedTimes.length / 2 ]) / 2
      : sortedTimes[ Math.floor(sortedTimes.length / 2) ];

  return {
    name: 'Async Benchmark'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 287:18 - Line
              304:4), src/utils/performance/benchmarks/PerformanceBenchmarkTools.ts (Line 192:12 -
              Line 212:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn124"
              onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn124"
              onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup124"
            ><code class="language-typescript text-sm text-gray-800">,
    executionTimeMs: averageTime,
    memoryUsageMB: memoryUsage?.diffHeapUsed,
    operationsCount: iterations,
    operationsPerSecond: (1000 * iterations) / totalTime,
    additionalMetrics: {
      medianTimeMs: medianTime,
      minTimeMs: Math.min(...executionTimes),
      maxTimeMs: Math.max(...executionTimes),
      stdDevMs: calculateStandardDeviation(executionTimes),
    },
    timestamp: new Date(),
  };
}

/**
 * Calculate standard deviation of an array of numbers
 */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/state/stateMigration.ts (Line 500:1 - Line 507:4),
              src/utils/state/stateMigration.ts (Line 482:1 - Line 489:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn234"
              onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn234"
              onclick="toggleCodeBlock('cloneGroup234', 'expandBtn234', 'collapseBtn234')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup234"
            ><code class="language-typescript text-sm text-gray-800">): T {
  if (!Array.isArray(state[key])) {
    throw new Error(`Property ${String(key)} is not an array`);
  }
  
  return {
    ...state,
    [key]: (state[key] as unknown[]).map</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/hookPerformanceMonitor.ts (Line 155:16 - Line 174:73),
              src/utils/performance/hookPerformanceMonitor.ts (Line 95:13 - Line 114:67)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn235"
              onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn235"
              onclick="toggleCodeBlock('cloneGroup235', 'expandBtn235', 'collapseBtn235')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup235"
            ><code class="language-typescript text-sm text-gray-800">: string,
  fn: () =&gt; T,
  config: HookPerformanceConfig
): T {
  if (!config.enabled) {
    return fn();
  }

  // Initialize performance data for this hook if it doesn't exist
  if (!hooksPerformanceData[config.hookName]) {
    hooksPerformanceData[config.hookName] = {
      hookName: config.hookName,
      selectorTimes: {},
      computationTimes: {},
      renderCount: 0,
      lastRenderTime: Date.now(),
    };
  }

  // Initialize computation times for this computation if it doesn't exist</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/hookPerformanceMonitor.ts (Line 213:7 - Line 227:26),
              src/utils/performance/hookPerformanceMonitor.ts (Line 100:2 - Line 114:67)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn236"
              onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn236"
              onclick="toggleCodeBlock('cloneGroup236', 'expandBtn236', 'collapseBtn236')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup236"
            ><code class="language-typescript text-sm text-gray-800">;
  }

  // Initialize performance data for this hook if it doesn't exist
  if (!hooksPerformanceData[config.hookName]) {
    hooksPerformanceData[config.hookName] = {
      hookName: config.hookName,
      selectorTimes: {},
      computationTimes: {},
      renderCount: 0,
      lastRenderTime: Date.now(),
    };
  }

  // Increment render count</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/D3AccessorBenchmark.ts (Line 310:11 - Line 319:12),
              src/utils/performance/D3AccessorBenchmark.ts (Line 270:9 - Line 279:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn237"
              onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn237"
              onclick="toggleCodeBlock('cloneGroup237', 'expandBtn237', 'collapseBtn237')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup237"
            ><code class="language-typescript text-sm text-gray-800">) {
        const x = node.x ?? 0;
        const y = node.y ?? 0;
        const transform = `translate(${x}, ${y})`;
        // Use the transform string to force evaluation
        benchmarkTransformResults.push(transform.length);
      }
    },
  });
  results.push(directLarge</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/D3AccessorBenchmark.ts (Line 327:11 - Line 336:10),
              src/utils/performance/D3AccessorBenchmark.ts (Line 287:9 - Line 296:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn238"
              onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn238"
              onclick="toggleCodeBlock('cloneGroup238', 'expandBtn238', 'collapseBtn238')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup238"
            ><code class="language-typescript text-sm text-gray-800">) {
        const x = d3Accessors.getX(node);
        const y = d3Accessors.getY(node);
        const transform = `translate(${x}, ${y})`;
        // Use the transform string to force evaluation
        benchmarkTransformResults.push(transform.length);
      }
    },
  });
  results.push(safeLarge</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/performance/D3AccessorBenchmark.ts (Line 393:9 - Line 400:8),
              src/utils/performance/D3AccessorBenchmark.ts (Line 364:9 - Line 371:10)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn239"
              onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn239"
              onclick="toggleCodeBlock('cloneGroup239', 'expandBtn239', 'collapseBtn239')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup239"
            ><code class="language-typescript text-sm text-gray-800">if (d.x! &lt; 0) d.x = 0;
        if (d.x! &gt; 500) d.x = 500;
        if (d.y! &lt; 0) d.y = 0;
        if (d.y! &gt; 500) d.y = 500;
      }
    },
  });
  results.push(safeSim</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/eventTypeGuards.ts (Line 39:27 - Line 50:2),
              src/utils/events/eventTypeGuards.ts (Line 23:26 - Line 34:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn240"
              onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn240"
              onclick="toggleCodeBlock('cloneGroup240', 'expandBtn240', 'collapseBtn240')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup240"
            ><code class="language-typescript text-sm text-gray-800">(
  event: ModuleEvent
): event is ModuleEvent &amp; { data: { resourceType: ResourceType; amount: number } } {
  return (
    event?.data !== undefined &amp;&amp;
    typeof event?.data === 'object' &amp;&amp;
    event?.data !== null &amp;&amp;
    'resourceType' in event?.data &amp;&amp;
    'amount' in event?.data &amp;&amp;
    typeof event?.data?.amount === 'number'
  );
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventThrottling.ts (Line 243:3 - Line 259:20),
              src/utils/events/EventThrottling.ts (Line 150:2 - Line 166:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn241"
              onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn241"
              onclick="toggleCodeBlock('cloneGroup241', 'expandBtn241', 'collapseBtn241')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup241"
            ><code class="language-typescript text-sm text-gray-800">;
        metrics.recentEventTimestamps.push(now);

        // Keep only the last 1000 timestamps
        if (metrics.recentEventTimestamps.length &gt; 1000) {
          metrics.recentEventTimestamps.shift();
        }

        // Calculate events per second
        const oneSecondAgo = now - 1000;
        const recentEvents = metrics.recentEventTimestamps.filter(t =&gt; t &gt;= oneSecondAgo);
        metrics.eventsPerSecond = recentEvents.length;
      }
      return event;
    }),

    // Apply debouncing</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventThrottling.ts (Line 263:5 - Line 296:11),
              src/utils/events/EventThrottling.ts (Line 173:5 - Line 206:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn242"
              onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn242"
              onclick="toggleCodeBlock('cloneGroup242', 'expandBtn242', 'collapseBtn242')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup242"
            ><code class="language-typescript text-sm text-gray-800">map(event =&gt; {
      if (config.trackMetrics) {
        const now = Date.now();
        metrics.eventsEmitted++;
        metrics.eventsDropped = metrics.totalEventsReceived - metrics.eventsEmitted;
        metrics.dropRatePercentage =
          metrics.totalEventsReceived &gt; 0
            ? (metrics.eventsDropped / metrics.totalEventsReceived) * 100
            : 0;

        // Calculate average time between emitted events
        if (lastEmitTime &gt; 0) {
          const timeSinceLastEmit = now - lastEmitTime;
          // Moving average (weight: 0.2 for new value, 0.8 for existing average)
          metrics.avgTimeBetweenEmittedEventsMs =
            metrics.avgTimeBetweenEmittedEventsMs * 0.8 + timeSinceLastEmit * 0.2;
        }

        // Estimate render time saved (assuming 10ms per render)
        metrics.estimatedRenderTimeSavedMs = metrics.eventsDropped * 10;

        lastEmitTime = now;

        // Emit updated metrics
        if (metricsSubject) {
          metricsSubject.next({ ...metrics });
        }
      }
      return event;
    })
  );

  return {
    stream: debounced$</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventPrioritizer.ts (Line 541:2 - Line 564:5),
              src/utils/events/EventPrioritizer.ts (Line 197:2 - Line 222:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn243"
              onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn243"
              onclick="toggleCodeBlock('cloneGroup243', 'expandBtn243', 'collapseBtn243')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup243"
            ><code class="language-typescript text-sm text-gray-800">= {
      totalEventsReceived: 0,
      eventsByPriority: {
        [EventPriority.CRITICAL]: 0,
        [EventPriority.HIGH]: 0,
        [EventPriority.NORMAL]: 0,
        [EventPriority.LOW]: 0,
        [EventPriority.BACKGROUND]: 0,
      },
      eventsCoalesced: 0,
      avgProcessingTimeMs: 0,
      maxProcessingTimeMs: 0,
      eventsPerSecond: 0,
      isHighLoad: false,
      queueDepthByPriority: {
        [EventPriority.CRITICAL]: 0,
        [EventPriority.HIGH]: 0,
        [EventPriority.NORMAL]: 0,
        [EventPriority.LOW]: 0,
        [EventPriority.BACKGROUND]: 0,
      },
    };

    this</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventFiltering.ts (Line 149:5 - Line 154:5),
              src/utils/events/EventFiltering.ts (Line 86:5 - Line 91:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn244"
              onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn244"
              onclick="toggleCodeBlock('cloneGroup244', 'expandBtn244', 'collapseBtn244')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup244"
            ><code class="language-typescript text-sm text-gray-800">const queueEntries = Array.from(this.queues.entries());
    for (const [_priority, queue] of queueEntries) {
      while (queue.length &gt; 0) {
        const event = queue.shift();
        if (event) {
          this</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventFilter.ts (Line 230:19 - Line 241:35),
              src/utils/events/EventFilter.ts (Line 173:14 - Line 184:23)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn245"
              onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn245"
              onclick="toggleCodeBlock('cloneGroup245', 'expandBtn245', 'collapseBtn245')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup245"
            ><code class="language-typescript text-sm text-gray-800">.filter(event =&gt; {
        if (criteria.startTime !== undefined &amp;&amp; event?.timestamp &lt; criteria.startTime) {
          return false;
        }
        if (criteria.endTime !== undefined &amp;&amp; event?.timestamp &gt; criteria.endTime) {
          return false;
        }
        return true;
      });
    }

    // Apply custom filter if provided</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/events/EventBatcher.ts (Line 93:23 - Line 106:31),
              src/utils/events/rxjsIntegration.ts (Line 19:26 - Line 31:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn246"
              onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn246"
              onclick="toggleCodeBlock('cloneGroup246', 'expandBtn246', 'collapseBtn246')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup246"
            ><code class="language-typescript text-sm text-gray-800">(): () =&gt; void {
  // Subscribe to all module events and forward them to the subject
  const unsubscribe = moduleEventBus.subscribe('MODULE_CREATED' as ModuleEventType, event =&gt; {
    moduleEventSubject.next(event);
  });

  // Return a cleanup function
  return () =&gt; {
    if (typeof unsubscribe === 'function') {
      unsubscribe();
    }
    moduleEventSubject.complete();

    // Complete all batch subjects</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/dataTransforms/chartTransforms.ts (Line 689:2 - Line 694:2),
              src/utils/dataTransforms/filterTransforms.ts (Line 254:2 - Line 259:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn247"
              onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn247"
              onclick="toggleCodeBlock('cloneGroup247', 'expandBtn247', 'collapseBtn247')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup247"
            ><code class="language-typescript text-sm text-gray-800">value.includes(',')) {
    const [minStr, maxStr] = value.split(',');
    const min = parseFloat(minStr.trim());
    const max = parseFloat(maxStr.trim());
    if (!isNaN(min) &amp;&amp; !isNaN(max)) {
      return [min, max];</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/dataTransforms/chartTransforms.ts (Line 750:7 - Line 764:7),
              src/utils/dataTransforms/filterTransforms.ts (Line 377:3 - Line 391:39)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn248"
              onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn248"
              onclick="toggleCodeBlock('cloneGroup248', 'expandBtn248', 'collapseBtn248')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup248"
            ><code class="language-typescript text-sm text-gray-800">switch (operator) {
        case 'equals':
          return fieldValue === value;

        case 'notEquals':
          return fieldValue !== value;

        case 'greaterThan':
          return isNumber(fieldValue) &amp;&amp; isNumber(value) &amp;&amp; fieldValue &gt; value;

        case 'lessThan':
          return isNumber(fieldValue) &amp;&amp; isNumber(value) &amp;&amp; fieldValue &lt; value;

        case 'contains':
          return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/dataTransforms/chartTransforms.ts (Line 778:11 - Line 788:8),
              src/utils/dataTransforms/filterTransforms.ts (Line 408:7 - Line 418:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn249"
              onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn249"
              onclick="toggleCodeBlock('cloneGroup249', 'expandBtn249', 'collapseBtn249')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup249"
            ><code class="language-typescript text-sm text-gray-800">return (
            isNumber(fieldValue) &amp;&amp;
            Array.isArray(value) &amp;&amp;
            value.length === 2 &amp;&amp;
            isNumber(value[0]) &amp;&amp;
            isNumber(value[1]) &amp;&amp;
            fieldValue &gt;= value[0] &amp;&amp;
            fieldValue &lt;= value[1]
          );

        default</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/visualizations/D3ValidationHooks.ts (Line 260:15 - Line 275:2),
              src/types/visualizations/D3ValidationHooks.ts (Line 185:15 - Line 200:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn251"
              onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn251"
              onclick="toggleCodeBlock('cloneGroup251', 'expandBtn251', 'collapseBtn251')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup251"
            ><code class="language-typescript text-sm text-gray-800">,
      };
    } catch (error) {
      // Handle unexpected errors during transformation
      const errorMessage = error instanceof Error ? error.message : String(error);

      if (mergedOptions.logErrors) {
        console.error(`${mergedOptions.errorPrefix} (Transform): ${errorMessage}`);
      }

      if (mergedOptions.throwOnError) {
        throw error;
      }

      return {
        data: [] as L</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/visualizations/D3SelectionTypes.ts (Line 393:7 - Line 398:7),
              src/types/visualizations/D3SelectionTypes.ts (Line 267:2 - Line 272:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn252"
              onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn252"
              onclick="toggleCodeBlock('cloneGroup252', 'expandBtn252', 'collapseBtn252')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup252"
            ><code class="language-typescript text-sm text-gray-800">selection.on(eventType, function (this: GElement, event: Event, d: Datum) {
        const i = d3.select(this).attr('data-index') ? +d3.select(this).attr('data-index')! : 0;
        const g = [this] as GElement[];
        listener(event, d, i, g);
      } as unknown);
      return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/visualizations/D3SelectionTypes.ts (Line 463:7 - Line 471:2),
              src/types/visualizations/D3SelectionTypes.ts (Line 153:3 - Line 161:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn253"
              onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn253"
              onclick="toggleCodeBlock('cloneGroup253', 'expandBtn253', 'collapseBtn253')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup253"
            ><code class="language-typescript text-sm text-gray-800">elementType: string,
      enter?: (
        selection: d3.Selection&lt;d3.EnterElement, Datum, PElement, PDatum&gt;
      ) =&gt; d3.Selection&lt;NewElement, Datum, PElement, PDatum&gt;,
      update?: (
        selection: d3.Selection&lt;GElement, Datum, PElement, PDatum&gt;
      ) =&gt; d3.Selection&lt;GElement, Datum, PElement, PDatum&gt;,
      exit?: (selection: d3.Selection&lt;GElement, Datum, PElement, PDatum&gt;) =&gt; void
    ) {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/ships/FactionShipTypes.ts (Line 12:1 - Line 28:11),
              src/types/ships/FactionTypes.ts (Line 23:1 - Line 39:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn254"
              onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn254"
              onclick="toggleCodeBlock('cloneGroup254', 'expandBtn254', 'collapseBtn254')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup254"
            ><code class="language-typescript text-sm text-gray-800">export interface FactionConfig {
  id: FactionId;
  name: string;
  banner: {
    primaryColor: string;
    secondaryColor: string;
    sigil: string;
  };
  defaultBehavior: FactionBehaviorType;
  spawnConditions: {
    minThreatLevel: number;
    maxShipsPerFleet: number;
    territoryPreference: string[];
  };
}

export interface AIBehavior</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/ships/FactionShipTypes.ts (Line 62:10 - Line 82:2),
              src/types/ships/FactionTypes.ts (Line 76:7 - Line 96:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn255"
              onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn255"
              onclick="toggleCodeBlock('cloneGroup255', 'expandBtn255', 'collapseBtn255')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup255"
            ><code class="language-typescript text-sm text-gray-800">;
    supportShips: string[];
  };
}

export interface LostNovaConfig extends FactionConfig {
  id: 'lost-nova';
  forbiddenTech: {
    darkMatterLevel: number;
    geneticModifications: string[];
  };
}

export interface EquatorHorizonConfig extends FactionConfig {
  id: 'equator-horizon';
  balanceThresholds: {
    playerExpansion: number;
    resourceControl: number;
    techLevel: number;
  };
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/resources/ResourceConversionTypes.ts (Line 72:18 - Line 93:15),
              src/types/resources/ResourceTypes.ts (Line 76:11 - Line 97:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn256"
              onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn256"
              onclick="toggleCodeBlock('cloneGroup256', 'expandBtn256', 'collapseBtn256')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup256"
            ><code class="language-typescript text-sm text-gray-800">: number;
}

/**
 * Resource conversion recipe definition
 */
export interface ResourceConversionRecipe {
  id: string;
  name: string;
  description: string;
  inputs: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  outputs: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  duration: number;
  energyCost: number;
  requiredLevel: number;
  processingTime</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/resources/ResourceConversionTypes.ts (Line 100:2 - Line 121:4),
              src/types/resources/ResourceTypes.ts (Line 82:2 - Line 99:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn257"
              onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn257"
              onclick="toggleCodeBlock('cloneGroup257', 'expandBtn257', 'collapseBtn257')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup257"
            ><code class="language-typescript text-sm text-gray-800">{
  id: string;
  name: string;
  description: string;
  inputs: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  outputs: Array&lt;{
    type: ResourceType;
    amount: number;
  }&gt;;
  duration: number;
  energyCost: number;
  requiredLevel: number;
  processingTime: number;
  baseEfficiency: number;
}

/**
 * Extends FlowNode with converter-specific properties
 */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/exploration/AnalysisComponentTypes.ts (Line 189:2 - Line 213:4),
              src/types/visualization/CommonTypes.ts (Line 371:7 - Line 393:45)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn258"
              onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn258"
              onclick="toggleCodeBlock('cloneGroup258', 'expandBtn258', 'collapseBtn258')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup258"
            ><code class="language-typescript text-sm text-gray-800">;
}

/**
 * Resource grid cell for resource mapping
 */
export interface ResourceGridCell {
  x: number;
  y: number;
  resources: Array&lt;{
    type: ResourceType;
    amount: number;
    quality?: number;
    accessibility?: number;
    estimatedValue?: number;
  }&gt;;
  totalValue: number;
  dominantResource?: ResourceType;
  dominantPercentage?: number;
  totalResourceCount: number;
}

/**
 * Props for resource mapping visualization
 */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/config/TypeSafeConfig.ts (Line 256:2 - Line 273:2),
              src/types/config/TypeSafeConfig.ts (Line 206:2 - Line 223:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn259"
              onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn259"
              onclick="toggleCodeBlock('cloneGroup259', 'expandBtn259', 'collapseBtn259')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup259"
            ><code class="language-typescript text-sm text-gray-800">;
    } catch (error) {
      const zodError = error as z.ZodError;
      const validationErrors = this.formatZodErrors(key, zodError);

      if (this.options?.logErrors) {
        console.error(`Validation failed for config &quot;${key}&quot;:`, validationErrors);
      }

      if (this.options?.onValidationError) {
        this.options.onValidationError(validationErrors);
      }

      if (this.options?.strictMode) {
        throw new Error(`Validation failed for config &quot;${key}&quot;: ${validationErrors[0]?.message}`);
      }

      return {</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/config/TypeSafeConfig.ts (Line 415:15 - Line 433:6),
              src/types/config/TypeSafeConfig.ts (Line 359:6 - Line 377:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn260"
              onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn260"
              onclick="toggleCodeBlock('cloneGroup260', 'expandBtn260', 'collapseBtn260')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup260"
            ><code class="language-typescript text-sm text-gray-800">);
      } catch (error) {
        const zodError = error as z.ZodError;
        const validationErrors = this.formatZodErrors(key, zodError);
        result.valid = false;
        result.errors.push(...validationErrors);
      }
    }

    if (!result.valid &amp;&amp; this.options?.onValidationError) {
      this.options.onValidationError(result.errors);
    }

    return result;
  }

  /**
   * Get all registered config items
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/types/buildings/ShipHangarTypes.ts (Line 60:1 - Line 81:4),
              src/types/ships/CommonShipTypes.ts (Line 158:1 - Line 177:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn261"
              onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn261"
              onclick="toggleCodeBlock('cloneGroup261', 'expandBtn261', 'collapseBtn261')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup261"
            ><code class="language-typescript text-sm text-gray-800">export interface ShipUpgradeStats {
  hull: {
    current: number;
    upgraded: number;
  };
  shield: {
    current: number;
    upgraded: number;
  };
  weapons: {
    current: number;
    upgraded: number;
  };
  speed: {
    current: number;
    upgraded: number;
  };
}

/**
 * Ship visual upgrade
 */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/tests/performance/LongSessionMemoryTestSuite.ts (Line 224:9 - Line 241:12),
              src/tests/performance/LongSessionMemoryTestSuite.ts (Line 201:9 - Line 216:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn262"
              onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn262"
              onclick="toggleCodeBlock('cloneGroup262', 'expandBtn262', 'collapseBtn262')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup262"
            ><code class="language-typescript text-sm text-gray-800">snapshots.push({
          timestamp: Date.now(),
          memoryUsage: this.getMemoryUsage(),
        });
      }, snapshotInterval);

      // Wait for test to complete
      await new Promise&lt;void&gt;(resolve =&gt; {
        const checkComplete = setInterval(() =&gt; {
          if (!this.isRunning || Date.now() - startTime &gt;= duration) {
            clearInterval(checkComplete);
            resolve();
          }
        }, 100);
      });
    }

    testEndTime</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/tests/performance/LongSessionMemoryTestSuite.ts (Line 719:26 - Line 734:2),
              src/tests/performance/LongSessionMemoryTestSuite.ts (Line 557:22 - Line 573:26)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn263"
              onclick="toggleCodeBlock('cloneGroup263', 'expandBtn263', 'collapseBtn263')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn263"
              onclick="toggleCodeBlock('cloneGroup263', 'expandBtn263', 'collapseBtn263')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup263"
            ><code class="language-typescript text-sm text-gray-800">,
      startTime,
      endTime,
      memoryBefore,
      memoryAfter,
      heapUsed: memoryAfter - memoryBefore,
      duration: endTime - startTime,
      passed: this.config.allowGC ? memoryAfter - memoryBefore &lt; 1000000 : true, // 1MB threshold
    };

    this.results.push(result);

    if (this.onTestCompleteCallback) {
      this.onTestCompleteCallback(result);
    }
  }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/telemetry/UserBehaviorCorrelationAnalysis.ts (Line 243:26 - Line 249:19),
              src/services/telemetry/UserBehaviorCorrelationAnalysis.ts (Line 175:23 - Line 181:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn264"
              onclick="toggleCodeBlock('cloneGroup264', 'expandBtn264', 'collapseBtn264')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn264"
              onclick="toggleCodeBlock('cloneGroup264', 'expandBtn264', 'collapseBtn264')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup264"
            ><code class="language-typescript text-sm text-gray-800">(
    sessions: SessionPerformanceData[]
  ): Record&lt;string, Array&lt;{ timestamp: number; value: number }&gt;&gt; {
    const metrics: Record&lt;string, Array&lt;{ timestamp: number; value: number }&gt;&gt; = {};

    // Initialize metrics
    for (const metric of this.config.performanceMetrics</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/resource/subsystems/ResourceThresholdSubsystem.ts (Line 67:2 - Line 86:43),
              src/resource/subsystems/ResourceTransferSubsystem.ts (Line 23:2 - Line 42:34)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn265"
              onclick="toggleCodeBlock('cloneGroup265', 'expandBtn265', 'collapseBtn265')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn265"
              onclick="toggleCodeBlock('cloneGroup265', 'expandBtn265', 'collapseBtn265')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup265"
            ><code class="language-typescript text-sm text-gray-800">;
  private parentSystem: ResourceSystem;
  private config: ResourceSystemConfig;
  private isInitialized = false;

  constructor(parentSystem: ResourceSystem, config: ResourceSystemConfig) {
    this.parentSystem = parentSystem;
    this.config = config;
  }

  /**
   * Initialize the subsystem
   */
  public async initialize(): Promise&lt;void&gt; {
    if (this.isInitialized) {
      return;
    }

    try {
      // Initialize default thresholds if needed</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 777:17 - Line 783:4),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 761:15 - Line 767:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn266"
              onclick="toggleCodeBlock('cloneGroup266', 'expandBtn266', 'collapseBtn266')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn266"
              onclick="toggleCodeBlock('cloneGroup266', 'expandBtn266', 'collapseBtn266')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup266"
            ><code class="language-typescript text-sm text-gray-800">(type: ResourceTypeString | ResourceType): number {
    let total = 0;

    for (const container of this.containers.values()) {
      const resourceState = container.resources.get(type as ResourceTypeString);
      if (resourceState) {
        total += resourceState.max</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 914:25 - Line 921:6),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 898:24 - Line 905:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn267"
              onclick="toggleCodeBlock('cloneGroup267', 'expandBtn267', 'collapseBtn267')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn267"
              onclick="toggleCodeBlock('cloneGroup267', 'expandBtn267', 'collapseBtn267')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup267"
            ><code class="language-typescript text-sm text-gray-800">(type: ResourceTypeString | ResourceType): number {
    // Convert to string resource type for internal use
    const stringType = ensureStringResourceType(type);

    let total = 0;
    for (const container of this.containers.values()) {
      if (container.config.resourceTypes.includes(stringType)) {
        const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceThresholdManager.ts (Line 446:28 - Line 460:11),
              src/managers/resource/ResourceThresholdManager.ts (Line 430:27 - Line 444:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn268"
              onclick="toggleCodeBlock('cloneGroup268', 'expandBtn268', 'collapseBtn268')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn268"
              onclick="toggleCodeBlock('cloneGroup268', 'expandBtn268', 'collapseBtn268')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup268"
            ><code class="language-typescript text-sm text-gray-800">,
            moduleId: RESOURCE_MANAGER_ID,
            moduleType: RESOURCE_MANAGER_TYPE,
            timestamp: now,
            data: {
              type: resourceType,
              target: action.target,
              amount: action.amount ?? 0,
              priority: action.priority || 1,
              severity: 'info',
            },
          });
          break;

        case 'transfer'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceThresholdManager.ts (Line 462:26 - Line 476:15),
              src/managers/resource/ResourceThresholdManager.ts (Line 430:27 - Line 444:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn269"
              onclick="toggleCodeBlock('cloneGroup269', 'expandBtn269', 'collapseBtn269')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn269"
              onclick="toggleCodeBlock('cloneGroup269', 'expandBtn269', 'collapseBtn269')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup269"
            ><code class="language-typescript text-sm text-gray-800">,
            moduleId: RESOURCE_MANAGER_ID,
            moduleType: RESOURCE_MANAGER_TYPE,
            timestamp: now,
            data: {
              type: resourceType,
              target: action.target,
              amount: action.amount ?? 0,
              priority: action.priority || 1,
              severity: 'info',
            },
          });
          break;

        case 'notification'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 131:14 - Line 182:13),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 171:20 - Line 222:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn270"
              onclick="toggleCodeBlock('cloneGroup270', 'expandBtn270', 'collapseBtn270')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn270"
              onclick="toggleCodeBlock('cloneGroup270', 'expandBtn270', 'collapseBtn270')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup270"
            ><code class="language-typescript text-sm text-gray-800">&gt;();

    for (const type of config.resourceTypes) {
      resources.set(type, {
        current: 0,
        min: 0,
        max: config.capacity / config.resourceTypes.length, // Divide capacity equally by default
        production: 0,
        consumption: 0,
      });
    }

    this.containers.set(config.id, {
      config,
      resources,
      totalStored: 0,
      lastUpdated: Date.now(),
    });

    return true;
  }

  /**
   * Unregister a storage container
   */
  public unregisterContainer(id: string): boolean {
    if (!this.containers.has(id)) {
      return false;
    }

    this.containers.delete(id);
    return true;
  }

  /**
   * Get a storage container
   */
  public getContainer(id: string): StorageContainerState | undefined {
    return this.containers.get(id);
  }

  /**
   * Get all storage containers
   */
  public getAllContainers(): StorageContainerState[] {
    return Array.from(this.containers.values());
  }

  /**
   * Get containers by resource type
   */
  public getContainersByResourceType(type: ResourceType</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 224:17 - Line 232:3),
              src/managers/resource/ResourceStorageManager.ts (Line 189:14 - Line 196:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn271"
              onclick="toggleCodeBlock('cloneGroup271', 'expandBtn271', 'collapseBtn271')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn271"
              onclick="toggleCodeBlock('cloneGroup271', 'expandBtn271', 'collapseBtn271')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup271"
            ><code class="language-typescript text-sm text-gray-800">(containerId: string, type: ResourceType, amount: number): number {
    const container = this.containers.get(containerId);
    if (!container || !container.resources.has(type) || amount &lt;= 0) {
      return 0;
    }

    const resourceState = container.resources.get(type)!;

    if</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 230:5 - Line 243:19),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 320:11 - Line 332:52)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn272"
              onclick="toggleCodeBlock('cloneGroup272', 'expandBtn272', 'collapseBtn272')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn272"
              onclick="toggleCodeBlock('cloneGroup272', 'expandBtn272', 'collapseBtn272')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup272"
            ><code class="language-typescript text-sm text-gray-800">)!;

    if (resourceState.current &lt;= 0) {
      return 0;
    }

    const amountToRetrieve = Math.min(amount, resourceState.current);

    resourceState.current -= amountToRetrieve;

    container.totalStored -= amountToRetrieve;
    container.lastUpdated = Date.now();

    // Record transfer</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 280:2 - Line 292:12),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 410:2 - Line 422:23)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn273"
              onclick="toggleCodeBlock('cloneGroup273', 'expandBtn273', 'collapseBtn273')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn273"
              onclick="toggleCodeBlock('cloneGroup273', 'expandBtn273', 'collapseBtn273')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup273"
            ><code class="language-typescript text-sm text-gray-800">} of sortedContainers) {
      if (remainingAmount &lt;= 0) {
        break;
      }

      const amountStored = this.storeResource(containerId, type, remainingAmount);
      totalStored += amountStored;
      remainingAmount -= amountStored;
    }

    // Handle overflow if needed
    if (remainingAmount &gt; 0 &amp;&amp; this.config.overflowPolicy !== 'reject') {
      totalStored</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 329:2 - Line 347:13),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 469:2 - Line 487:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn274"
              onclick="toggleCodeBlock('cloneGroup274', 'expandBtn274', 'collapseBtn274')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn274"
              onclick="toggleCodeBlock('cloneGroup274', 'expandBtn274', 'collapseBtn274')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup274"
            ><code class="language-typescript text-sm text-gray-800">} of sortedContainers) {
      if (remainingAmount &lt;= 0) {
        break;
      }

      const amountRetrieved = this.retrieveResource(containerId, type, remainingAmount);
      totalRetrieved += amountRetrieved;
      remainingAmount -= amountRetrieved;
    }

    return totalRetrieved;
  }

  /**
   * Calculate container scores for allocation
   */
  private calculateContainerScores(
    containers: StorageContainerState[],
    resourceType: ResourceType</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 350:16 - Line 363:18),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 494:2 - Line 508:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn275"
              onclick="toggleCodeBlock('cloneGroup275', 'expandBtn275', 'collapseBtn275')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn275"
              onclick="toggleCodeBlock('cloneGroup275', 'expandBtn275', 'collapseBtn275')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup275"
            ><code class="language-typescript text-sm text-gray-800">;
    const resourcePriorityValue = this.resourcePriorities.get(resourceType) || 5;

    return containers.map(container =&gt; {
      const resourceState = container.resources.get(resourceType)!;
      const fillRatio = resourceState.current / resourceState.max;

      // For storage, we prefer containers with lower fill percentage
      // For retrieval, we prefer containers with higher fill percentage
      const fillScore = forRetrieval ? fillRatio : 1 - fillRatio;

      // Calculate weighted score
      const score =
        container.config.priority * containerPriority</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 405:5 - Line 421:6),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 540:7 - Line 557:43)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn276"
              onclick="toggleCodeBlock('cloneGroup276', 'expandBtn276', 'collapseBtn276')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn276"
              onclick="toggleCodeBlock('cloneGroup276', 'expandBtn276', 'collapseBtn276')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup276"
            ><code class="language-typescript text-sm text-gray-800">// Sort by upgrade potential (containers with lower upgrade level first)
    const upgradableContainers = relevantContainers
      .filter(
        container =&gt;
          container.config.upgradeLevel !== undefined &amp;&amp;
          container.config.maxUpgradeLevel !== undefined &amp;&amp;
          container.config.upgradeLevel &lt; container.config.maxUpgradeLevel
      )
      .sort((a, b) =&gt; (a.config.upgradeLevel ?? 0) - (b.config.upgradeLevel ?? 0));

    if (upgradableContainers.length === 0) {
      return 0;
    }

    // Upgrade the first container
    const containerToUpgrade = upgradableContainers[0];
    const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 451:13 - Line 471:40),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 607:19 - Line 627:61)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn277"
              onclick="toggleCodeBlock('cloneGroup277', 'expandBtn277', 'collapseBtn277')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn277"
              onclick="toggleCodeBlock('cloneGroup277', 'expandBtn277', 'collapseBtn277')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup277"
            ><code class="language-typescript text-sm text-gray-800">): void {
    const containers = this.getContainersByResourceType(type);

    if (containers.length &lt;= 1) {
      return;
    }

    // Calculate fill ratios
    const fillRatios = containers.map(container =&gt; {
      const resourceState = container.resources.get(type)!;
      return {
        id: container.config.id,
        fillRatio: resourceState.current / resourceState.max,
      };
    });

    // Find min and max fill ratios
    const minFill = Math.min(...fillRatios.map(r =&gt; r.fillRatio));
    const maxFill = Math.max(...fillRatios.map(r =&gt; r.fillRatio));

    // Check if imbalance exceeds threshold</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 480:13 - Line 537:13),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 637:19 - Line 694:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn278"
              onclick="toggleCodeBlock('cloneGroup278', 'expandBtn278', 'collapseBtn278')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn278"
              onclick="toggleCodeBlock('cloneGroup278', 'expandBtn278', 'collapseBtn278')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup278"
            ><code class="language-typescript text-sm text-gray-800">, containers: StorageContainerState[]): void {
    // Calculate target fill ratio (average)
    let totalCurrent = 0;
    let totalMax = 0;

    for (const container of containers) {
      const resourceState = container.resources.get(type)!;
      totalCurrent += resourceState.current;
      totalMax += resourceState.max;
    }

    const targetFillRatio = totalCurrent / totalMax;

    // Calculate transfers needed
    for (const container of containers) {
      const resourceState = container.resources.get(type)!;
      const currentFillRatio = resourceState.current / resourceState.max;

      if (Math.abs(currentFillRatio - targetFillRatio) &lt; 0.05) {
        // Close enough, skip
        continue;
      }

      const targetAmount = resourceState.max * targetFillRatio;
      const difference = targetAmount - resourceState.current;

      if (difference &gt; 0) {
        // Need to add resources
        // Find container with excess
        const sourceContainer = containers.find(c =&gt; {
          const rs = c.resources.get(type)!;
          return rs.current / rs.max &gt; targetFillRatio + 0.05;
        });

        if (sourceContainer) {
          const sourceState = sourceContainer.resources.get(type)!;
          const availableToTransfer = sourceState.current - sourceState.max * targetFillRatio;
          const transferAmount = Math.min(difference, availableToTransfer);

          // Transfer resources
          this.transferBetweenContainers(
            sourceContainer.config.id,
            container.config.id,
            type,
            transferAmount
          );
        }
      }
    }
  }

  /**
   * Transfer resources between containers
   */
  public transferBetweenContainers(
    sourceId: string,
    targetId: string,
    type: ResourceType</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 537:2 - Line 562:2),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 694:2 - Line 719:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn279"
              onclick="toggleCodeBlock('cloneGroup279', 'expandBtn279', 'collapseBtn279')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn279"
              onclick="toggleCodeBlock('cloneGroup279', 'expandBtn279', 'collapseBtn279')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup279"
            ><code class="language-typescript text-sm text-gray-800">ResourceType,
    amount: number
  ): number {
    if (amount &lt;= 0 || sourceId === targetId) {
      return 0;
    }

    // Retrieve from source
    const retrievedAmount = this.retrieveResource(sourceId, type, amount);

    if (retrievedAmount &lt;= 0) {
      return 0;
    }

    // Store in target
    const storedAmount = this.storeResource(targetId, type, retrievedAmount);

    // If not all was stored, return remainder to source
    if (storedAmount &lt; retrievedAmount) {
      const remainder = retrievedAmount - storedAmount;
      this.storeResource(sourceId, type, remainder);
    }

    // Record transfer
    this.recordTransfer({
      type,</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 617:17 - Line 623:4),
              src/managers/resource/ResourceStorageManager.ts (Line 601:15 - Line 607:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn280"
              onclick="toggleCodeBlock('cloneGroup280', 'expandBtn280', 'collapseBtn280')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn280"
              onclick="toggleCodeBlock('cloneGroup280', 'expandBtn280', 'collapseBtn280')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup280"
            ><code class="language-typescript text-sm text-gray-800">(type: ResourceType): number {
    let total = 0;

    for (const container of Array.from(this.containers.values())) {
      const resourceState = container.resources.get(type);
      if (resourceState) {
        total += resourceState.max</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceStorageManager.ts (Line 641:5 - Line 664:6),
              src/resource/subsystems/ResourceStorageSubsystem.ts (Line 805:11 - Line 828:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn281"
              onclick="toggleCodeBlock('cloneGroup281', 'expandBtn281', 'collapseBtn281')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn281"
              onclick="toggleCodeBlock('cloneGroup281', 'expandBtn281', 'collapseBtn281')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup281"
            ><code class="language-typescript text-sm text-gray-800">) || 5;
  }

  /**
   * Update container configuration
   */
  public updateContainerConfig(id: string, config: Partial&lt;StorageContainerConfig&gt;): boolean {
    const container = this.containers.get(id);
    if (!container) {
      return false;
    }

    // Update config
    container.config = {
      ...container.config,
      ...config,
    };

    return true;
  }

  /**
   * Clean up resources
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourcePoolManager.ts (Line 7:38 - Line 27:8),
              src/types/resources/ResourcePoolTypes.ts (Line 1:18 - Line 21:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn282"
              onclick="toggleCodeBlock('cloneGroup282', 'expandBtn282', 'collapseBtn282')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn282"
              onclick="toggleCodeBlock('cloneGroup282', 'expandBtn282', 'collapseBtn282')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup282"
            ><code class="language-typescript text-sm text-gray-800">;

/**
 * Pool allocation strategy
 */
export type PoolAllocationStrategy = 'equal' | 'priority' | 'demand-based' | 'custom';

/**
 * Pool distribution rule
 */
export interface PoolDistributionRule {
  id: string;
  poolId: string;
  targetIds: string[];
  resourceType: ResourceType;
  percentage: number;
  minAmount?: number;
  maxAmount?: number;
  priority: number;
  condition?: (state: ResourceState) =&gt; boolean;
  enabled</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourcePoolManager.ts (Line 684:16 - Line 707:3),
              src/managers/resource/ResourcePoolManager.ts (Line 356:10 - Line 379:29)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn283"
              onclick="toggleCodeBlock('cloneGroup283', 'expandBtn283', 'collapseBtn283')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn283"
              onclick="toggleCodeBlock('cloneGroup283', 'expandBtn283', 'collapseBtn283')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup283"
            ><code class="language-typescript text-sm text-gray-800">.resources = {
        [ ResourceType.MINERALS ]: createResourceState(ResourceType.MINERALS),
        [ ResourceType.ENERGY ]: createResourceState(ResourceType.ENERGY),
        [ ResourceType.POPULATION ]: createResourceState(ResourceType.POPULATION),
        [ ResourceType.RESEARCH ]: createResourceState(ResourceType.RESEARCH),
        [ ResourceType.FOOD ]: createResourceState(ResourceType.FOOD),
        [ ResourceType.WATER ]: createResourceState(ResourceType.WATER),
        [ ResourceType.PLASMA ]: createResourceState(ResourceType.PLASMA),
        [ ResourceType.GAS ]: createResourceState(ResourceType.GAS),
        [ ResourceType.EXOTIC ]: createResourceState(ResourceType.EXOTIC),
        [ ResourceType.ORGANIC ]: createResourceState(ResourceType.ORGANIC),
        [ ResourceType.IRON ]: createResourceState(ResourceType.IRON),
        [ ResourceType.COPPER ]: createResourceState(ResourceType.COPPER),
        [ ResourceType.TITANIUM ]: createResourceState(ResourceType.TITANIUM),
        [ ResourceType.URANIUM ]: createResourceState(ResourceType.URANIUM),
        [ ResourceType.HELIUM ]: createResourceState(ResourceType.HELIUM),
        [ ResourceType.DEUTERIUM ]: createResourceState(ResourceType.DEUTERIUM),
        [ ResourceType.ANTIMATTER ]: createResourceState(ResourceType.ANTIMATTER),
        [ ResourceType.DARK_MATTER ]: createResourceState(ResourceType.DARK_MATTER),
        [ ResourceType.EXOTIC_MATTER ]: createResourceState(ResourceType.EXOTIC_MATTER),
      };
    }

    if</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourcePoolManager.ts (Line 708:16 - Line 731:40),
              src/managers/resource/ResourcePoolManager.ts (Line 356:10 - Line 379:29)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn284"
              onclick="toggleCodeBlock('cloneGroup284', 'expandBtn284', 'collapseBtn284')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn284"
              onclick="toggleCodeBlock('cloneGroup284', 'expandBtn284', 'collapseBtn284')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup284"
            ><code class="language-typescript text-sm text-gray-800">.resources = {
        [ ResourceType.MINERALS ]: createResourceState(ResourceType.MINERALS),
        [ ResourceType.ENERGY ]: createResourceState(ResourceType.ENERGY),
        [ ResourceType.POPULATION ]: createResourceState(ResourceType.POPULATION),
        [ ResourceType.RESEARCH ]: createResourceState(ResourceType.RESEARCH),
        [ ResourceType.FOOD ]: createResourceState(ResourceType.FOOD),
        [ ResourceType.WATER ]: createResourceState(ResourceType.WATER),
        [ ResourceType.PLASMA ]: createResourceState(ResourceType.PLASMA),
        [ ResourceType.GAS ]: createResourceState(ResourceType.GAS),
        [ ResourceType.EXOTIC ]: createResourceState(ResourceType.EXOTIC),
        [ ResourceType.ORGANIC ]: createResourceState(ResourceType.ORGANIC),
        [ ResourceType.IRON ]: createResourceState(ResourceType.IRON),
        [ ResourceType.COPPER ]: createResourceState(ResourceType.COPPER),
        [ ResourceType.TITANIUM ]: createResourceState(ResourceType.TITANIUM),
        [ ResourceType.URANIUM ]: createResourceState(ResourceType.URANIUM),
        [ ResourceType.HELIUM ]: createResourceState(ResourceType.HELIUM),
        [ ResourceType.DEUTERIUM ]: createResourceState(ResourceType.DEUTERIUM),
        [ ResourceType.ANTIMATTER ]: createResourceState(ResourceType.ANTIMATTER),
        [ ResourceType.DARK_MATTER ]: createResourceState(ResourceType.DARK_MATTER),
        [ ResourceType.EXOTIC_MATTER ]: createResourceState(ResourceType.EXOTIC_MATTER),
      };
    }

    // Check if source has enough resources</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceIntegration.ts (Line 112:2 - Line 133:44),
              src/managers/resource/ResourceIntegration.ts (Line 90:2 - Line 111:41)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn285"
              onclick="toggleCodeBlock('cloneGroup285', 'expandBtn285', 'collapseBtn285')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn285"
              onclick="toggleCodeBlock('cloneGroup285', 'expandBtn285', 'collapseBtn285')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup285"
            ><code class="language-typescript text-sm text-gray-800">as ModuleEventType, event =&gt; {
      // Type guard for event data
      if (!event?.data || typeof event?.data !== 'object') {
        return;
      }

      // Extract and validate resource type
      const resourceType = event?.data?.type;
      if (!this.isValidResourceType(resourceType)) {
        return;
      }

      const enumType = toEnumResourceType(resourceType);

      // Get resource state
      const resourceState = this.resourceManager.getResourceState(enumType);
      if (resourceState) {
        this.updateResourceState(resourceType, resourceState);
      }
    });

    // Subscribe to resource transferred events</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/resource/ResourceCostManager.ts (Line 57:2 - Line 87:6),
              src/managers/resource/ResourcePoolManager.ts (Line 113:5 - Line 143:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn286"
              onclick="toggleCodeBlock('cloneGroup286', 'expandBtn286', 'collapseBtn286')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn286"
              onclick="toggleCodeBlock('cloneGroup286', 'expandBtn286', 'collapseBtn286')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup286"
            ><code class="language-typescript text-sm text-gray-800">;
  }

  /**
   * Register a container
   */
  public registerContainer(container: ResourceContainer): boolean {
    if (!container.id) {
      console.error('Invalid container:', container);
      return false;
    }

    this.containers.set(container.id, container);
    return true;
  }

  /**
   * Unregister a container
   */
  public unregisterContainer(id: string): boolean {
    if (!this.containers.has(id)) {
      return false;
    }

    this.containers.delete(id);
    return true;
  }

  /**
   * Set discount for a resource type
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 193:17 - Line 205:24),
              src/managers/module/SubModuleManager.ts (Line 167:13 - Line 179:69)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn287"
              onclick="toggleCodeBlock('cloneGroup287', 'expandBtn287', 'collapseBtn287')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn287"
              onclick="toggleCodeBlock('cloneGroup287', 'expandBtn287', 'collapseBtn287')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup287"
            ><code class="language-typescript text-sm text-gray-800">, (effect, moduleId) =&gt; {
      const module = moduleManager.getModule(moduleId);
      if (!module) {
        return {
          success: false,
          effectType: effect.type,
          target: effect.target,
          value: effect.value,
          error: `Module ${moduleId} not found`,
        };
      }

      // Apply resource boost</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 207:47 - Line 218:33),
              src/managers/module/SubModuleManager.ts (Line 181:43 - Line 192:33)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn288"
              onclick="toggleCodeBlock('cloneGroup288', 'expandBtn288', 'collapseBtn288')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn288"
              onclick="toggleCodeBlock('cloneGroup288', 'expandBtn288', 'collapseBtn288')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup288"
            ><code class="language-typescript text-sm text-gray-800">${moduleId}: ${effect.target} ${effect.isPercentage ? '+' : ''}${effect.value}${effect.isPercentage ? '%' : ''}`
      );

      return {
        success: true,
        effectType: effect.type,
        target: effect.target,
        value: effect.value,
      };
    });

    // Unlock ability effect handler</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 219:17 - Line 231:18),
              src/managers/module/SubModuleManager.ts (Line 167:13 - Line 179:69)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn289"
              onclick="toggleCodeBlock('cloneGroup289', 'expandBtn289', 'collapseBtn289')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn289"
              onclick="toggleCodeBlock('cloneGroup289', 'expandBtn289', 'collapseBtn289')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup289"
            ><code class="language-typescript text-sm text-gray-800">, (effect, moduleId) =&gt; {
      const module = moduleManager.getModule(moduleId);
      if (!module) {
        return {
          success: false,
          effectType: effect.type,
          target: effect.target,
          value: effect.value,
          error: `Module ${moduleId} not found`,
        };
      }

      // Unlock ability</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 243:14 - Line 255:15),
              src/managers/module/SubModuleManager.ts (Line 167:13 - Line 179:69)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn290"
              onclick="toggleCodeBlock('cloneGroup290', 'expandBtn290', 'collapseBtn290')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn290"
              onclick="toggleCodeBlock('cloneGroup290', 'expandBtn290', 'collapseBtn290')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup290"
            ><code class="language-typescript text-sm text-gray-800">, (effect, moduleId) =&gt; {
      const module = moduleManager.getModule(moduleId);
      if (!module) {
        return {
          success: false,
          effectType: effect.type,
          target: effect.target,
          value: effect.value,
          error: `Module ${moduleId} not found`,
        };
      }

      // Reduce cost</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 257:4 - Line 268:29),
              src/managers/module/SubModuleManager.ts (Line 181:4 - Line 192:33)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn291"
              onclick="toggleCodeBlock('cloneGroup291', 'expandBtn291', 'collapseBtn291')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn291"
              onclick="toggleCodeBlock('cloneGroup291', 'expandBtn291', 'collapseBtn291')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup291"
            ><code class="language-typescript text-sm text-gray-800"> : ''}${effect.value}${effect.isPercentage ? '%' : ''}`
      );

      return {
        success: true,
        effectType: effect.type,
        target: effect.target,
        value: effect.value,
      };
    });

    // Automation effect handler</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 269:13 - Line 281:20),
              src/managers/module/SubModuleManager.ts (Line 167:13 - Line 179:69)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn292"
              onclick="toggleCodeBlock('cloneGroup292', 'expandBtn292', 'collapseBtn292')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn292"
              onclick="toggleCodeBlock('cloneGroup292', 'expandBtn292', 'collapseBtn292')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup292"
            ><code class="language-typescript text-sm text-gray-800">, (effect, moduleId) =&gt; {
      const module = moduleManager.getModule(moduleId);
      if (!module) {
        return {
          success: false,
          effectType: effect.type,
          target: effect.target,
          value: effect.value,
          error: `Module ${moduleId} not found`,
        };
      }

      // Apply automation</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 293:10 - Line 305:24),
              src/managers/module/SubModuleManager.ts (Line 167:13 - Line 179:69)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn293"
              onclick="toggleCodeBlock('cloneGroup293', 'expandBtn293', 'collapseBtn293')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn293"
              onclick="toggleCodeBlock('cloneGroup293', 'expandBtn293', 'collapseBtn293')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup293"
            ><code class="language-typescript text-sm text-gray-800">, (effect, moduleId) =&gt; {
      const module = moduleManager.getModule(moduleId);
      if (!module) {
        return {
          success: false,
          effectType: effect.type,
          target: effect.target,
          value: effect.value,
          error: `Module ${moduleId} not found`,
        };
      }

      // Apply special effect</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 813:2 - Line 831:46),
              src/managers/module/SubModuleManager.ts (Line 782:2 - Line 800:53)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn294"
              onclick="toggleCodeBlock('cloneGroup294', 'expandBtn294', 'collapseBtn294')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn294"
              onclick="toggleCodeBlock('cloneGroup294', 'expandBtn294', 'collapseBtn294')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup294"
            ><code class="language-typescript text-sm text-gray-800">= (event: ModuleEvent): void =&gt; {
    // Type guard for event data
    if (!event?.data || typeof event?.data !== 'object') {
      return;
    }

    // Safely extract moduleId with type checking
    const moduleId = typeof event?.data?.moduleId === 'string' ? event?.data?.moduleId : undefined;
    if (!moduleId) {
      return;
    }

    // Check if module has sub-modules
    const module = moduleManager.getModule(moduleId);
    if (!module || !module.subModules || module.subModules.length === 0) {
      return;
    }

    // Activate sub-modules that should be active</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/SubModuleManager.ts (Line 842:2 - Line 860:30),
              src/managers/module/SubModuleManager.ts (Line 782:2 - Line 800:53)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn295"
              onclick="toggleCodeBlock('cloneGroup295', 'expandBtn295', 'collapseBtn295')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn295"
              onclick="toggleCodeBlock('cloneGroup295', 'expandBtn295', 'collapseBtn295')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup295"
            ><code class="language-typescript text-sm text-gray-800">= (event: ModuleEvent): void =&gt; {
    // Type guard for event data
    if (!event?.data || typeof event?.data !== 'object') {
      return;
    }

    // Safely extract moduleId with type checking
    const moduleId = typeof event?.data?.moduleId === 'string' ? event?.data?.moduleId : undefined;
    if (!moduleId) {
      return;
    }

    // Check if module has sub-modules
    const module = moduleManager.getModule(moduleId);
    if (!module || !module.subModules || module.subModules.length === 0) {
      return;
    }

    // Deactivate all sub-modules</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/OfficerManager.ts (Line 458:5 - Line 471:6),
              src/managers/module/OfficerManager.ts (Line 428:5 - Line 441:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn296"
              onclick="toggleCodeBlock('cloneGroup296', 'expandBtn296', 'collapseBtn296')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn296"
              onclick="toggleCodeBlock('cloneGroup296', 'expandBtn296', 'collapseBtn296')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup296"
            ><code class="language-typescript text-sm text-gray-800">// Apply trait bonuses
    officer.traits.forEach(traitId =&gt; {
      const trait = OFFICER_TRAITS.find(t =&gt; t.id === traitId);
      if (trait?.effects.bonuses?.squadBonus) {
        bonus *= 1 + trait.effects.bonuses.squadBonus;
      }
    });

    return bonus;
  }

  /**
   * Add experience to an officer and handle level ups
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/ModuleUpgradeManager.ts (Line 344:2 - Line 360:20),
              src/managers/module/ModuleUpgradeManager.ts (Line 276:6 - Line 292:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn297"
              onclick="toggleCodeBlock('cloneGroup297', 'expandBtn297', 'collapseBtn297')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn297"
              onclick="toggleCodeBlock('cloneGroup297', 'expandBtn297', 'collapseBtn297')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup297"
            ><code class="language-typescript text-sm text-gray-800">;
      }
    }

    // Check tech requirements
    if (requirements.techRequirements) {
      // TODO: Implement tech requirement checking
      // This would require integration with a tech tree system
    }

    // Check module requirements
    if (requirements.moduleRequirements) {
      for (const req of requirements.moduleRequirements) {
        const modules = moduleManager.getModulesByType(req.type);
        const hasRequiredModule = modules.some(m =&gt; m.level &gt;= req.level);
        if (!hasRequiredModule) {
          missingRequirements</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/ModuleUpgradeManager.ts (Line 360:2 - Line 376:2),
              src/managers/module/ModuleUpgradeManager.ts (Line 292:6 - Line 308:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn298"
              onclick="toggleCodeBlock('cloneGroup298', 'expandBtn298', 'collapseBtn298')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn298"
              onclick="toggleCodeBlock('cloneGroup298', 'expandBtn298', 'collapseBtn298')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup298"
            ><code class="language-typescript text-sm text-gray-800">;
        }
      }
    }

    // Check building level
    if (requirements.buildingLevel) {
      // Find the building this module is attached to
      let attachedBuilding = undefined;
      for (const building of moduleManager.getBuildings()) {
        if (building.modules.some(m =&gt; m.id === moduleId)) {
          attachedBuilding = building;
          break;
        }
      }

      if (!attachedBuilding)</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/module/ModuleStatusManager.ts (Line 146:5 - Line 156:17),
              src/managers/module/SubModuleManager.ts (Line 151:5 - Line 160:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn299"
              onclick="toggleCodeBlock('cloneGroup299', 'expandBtn299', 'collapseBtn299')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn299"
              onclick="toggleCodeBlock('cloneGroup299', 'expandBtn299', 'collapseBtn299')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup299"
            ><code class="language-typescript text-sm text-gray-800">this.unsubscribeHandles.push(
      moduleEventBus.subscribe('MODULE_UPGRADED' as ModuleEventType, this.handleModuleUpgraded)
    );
    this.unsubscribeHandles.push(
      moduleEventBus.subscribe('MODULE_ACTIVATED' as ModuleEventType, this.handleModuleActivated)
    );
    this.unsubscribeHandles.push(
      moduleEventBus.subscribe('MODULE_DEACTIVATED' as ModuleEventType, this.handleModuleDeactivated)
    );

    // Status events</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/game/AsteroidFieldManager.ts (Line 19:1 - Line 34:2),
              src/types/combat/HazardTypes.ts (Line 3:2 - Line 18:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn300"
              onclick="toggleCodeBlock('cloneGroup300', 'expandBtn300', 'collapseBtn300')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn300"
              onclick="toggleCodeBlock('cloneGroup300', 'expandBtn300', 'collapseBtn300')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup300"
            ><code class="language-typescript text-sm text-gray-800">interface Hazard {
  id: string;
  type: 'asteroids' | 'debris' | 'radiation' | 'anomaly';
  position: Position;
  radius: number;
  severity: 'low' | 'medium' | 'high';
  effect: {
    type: 'damage' | 'slow' | 'shield' | 'weapon';
    value: number;
  };
  movement?: {
    speed: number;
    direction: number;
  };
  particles?: number;
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/game/AsteroidFieldManager.ts (Line 623:7 - Line 628:31),
              src/managers/game/AsteroidFieldManager.ts (Line 460:7 - Line 465:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn301"
              onclick="toggleCodeBlock('cloneGroup301', 'expandBtn301', 'collapseBtn301')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn301"
              onclick="toggleCodeBlock('cloneGroup301', 'expandBtn301', 'collapseBtn301')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup301"
            ><code class="language-typescript text-sm text-gray-800">const distanceToField = Math.sqrt(
        Math.pow(position.x - field.position.x, 2) + Math.pow(position.y - field.position.y, 2)
      );

      if (distanceToField &lt;= field.radius) {
        // Apply field density effects</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/exploration/ReconShipManagerImpl.ts (Line 262:2 - Line 271:2),
              src/managers/exploration/ReconShipManagerImpl.ts (Line 155:2 - Line 164:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn302"
              onclick="toggleCodeBlock('cloneGroup302', 'expandBtn302', 'collapseBtn302')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn302"
              onclick="toggleCodeBlock('cloneGroup302', 'expandBtn302', 'collapseBtn302')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup302"
            ><code class="language-typescript text-sm text-gray-800">{
    this.ships.set(ship.id, ship);
    this.publish({
      type: EventType.EXPLORATION_SHIP_REGISTERED,
      moduleId: ship.id,
      moduleType: 'ship' as ModuleType,
      timestamp: Date.now(),
      data: { shipId: ship.id, ship },
    });
  }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/exploration/ExplorationManagerImpl.ts (Line 221:2 - Line 248:6),
              src/managers/exploration/ExplorationManagerImpl.ts (Line 175:7 - Line 202:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn303"
              onclick="toggleCodeBlock('cloneGroup303', 'expandBtn303', 'collapseBtn303')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn303"
              onclick="toggleCodeBlock('cloneGroup303', 'expandBtn303', 'collapseBtn303')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup303"
            ><code class="language-typescript text-sm text-gray-800">;
    status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
    position?: { x: number; y: number };
  }): StarSystem {
    const now = Date.now();

    const newSystem: StarSystem = {
      ...system,
      position: system.position || { x: 0, y: 0 },
      assignedShips: [],
      discoveredAt: now,
    };

    this.systems.set(system.id, newSystem);
    this.stats.systemsCreated++;

    // Emit event
    const event = this.createEvent(ExplorationEvents.SYSTEM_CREATED, {
      system: newSystem,
    });
    this.publishEvent(event);

    return newSystem;
  }

  /**
   * Update a star system
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/exploration/ExplorationManager.ts (Line 75:1 - Line 93:7),
              src/managers/exploration/ExplorationManagerImpl.ts (Line 32:1 - Line 50:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn304"
              onclick="toggleCodeBlock('cloneGroup304', 'expandBtn304', 'collapseBtn304')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn304"
              onclick="toggleCodeBlock('cloneGroup304', 'expandBtn304', 'collapseBtn304')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup304"
            ><code class="language-typescript text-sm text-gray-800">}

// Define interfaces for the types used
export interface StarSystem {
  id: string;
  name: string;
  type?: string;
  resources?: ResourceType[];
  status: 'unmapped' | 'mapped' | 'scanning' | 'analyzed';
  assignedShips: string[];
  position: {
    x: number;
    y: number;
  };
  lastScanned?: number;
  discoveredAt?: number;
}

export interface Sector</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/effects/ParticleSystemManager.ts (Line 29:2 - Line 49:8),
              src/managers/game/ParticleSystemManager.ts (Line 120:1 - Line 140:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn305"
              onclick="toggleCodeBlock('cloneGroup305', 'expandBtn305', 'collapseBtn305')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn305"
              onclick="toggleCodeBlock('cloneGroup305', 'expandBtn305', 'collapseBtn305')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup305"
            ><code class="language-typescript text-sm text-gray-800">interface ParticleSystemConfig {
  maxParticles: number;
  spawnRate: number;
  position: Position;
  spread: number;
  initialVelocity: {
    min: Position;
    max: Position;
  };
  acceleration: Position;
  size: {
    min: number;
    max: number;
  };
  life: {
    min: number;
    max: number;
  };
  color: string | string[];
  blendMode?: 'normal' | 'additive';
  quality</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/effects/ParticleSystemManager.ts (Line 120:2 - Line 135:8),
              src/managers/game/ParticleSystemManager.ts (Line 41:2 - Line 56:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn306"
              onclick="toggleCodeBlock('cloneGroup306', 'expandBtn306', 'collapseBtn306')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn306"
              onclick="toggleCodeBlock('cloneGroup306', 'expandBtn306', 'collapseBtn306')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup306"
            ><code class="language-typescript text-sm text-gray-800">,
      active: false,
      position: { x: 0, y: 0 },
      velocity: { x: 0, y: 0 },
      acceleration: { x: 0, y: 0 },
      size: 1,
      color: '#ffffff',
      opacity: 1,
      life: 1,
      maxLife: 1,
      reset(): void {
        this.active = false;
        this.position = { x: 0, y: 0 };
        this.velocity = { x: 0, y: 0 };
        this.acceleration = { x: 0, y: 0 };
        this.opacity</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/effects/ParticleSystemManager.ts (Line 292:2 - Line 308:5),
              src/managers/game/ParticleSystemManager.ts (Line 176:5 - Line 195:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn307"
              onclick="toggleCodeBlock('cloneGroup307', 'expandBtn307', 'collapseBtn307')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn307"
              onclick="toggleCodeBlock('cloneGroup307', 'expandBtn307', 'collapseBtn307')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup307"
            ><code class="language-typescript text-sm text-gray-800">};
    particle.velocity = {
      x:
        this.config.initialVelocity.min.x +
        Math.random() * (this.config.initialVelocity.max.x - this.config.initialVelocity.min.x),
      y:
        this.config.initialVelocity.min.y +
        Math.random() * (this.config.initialVelocity.max.y - this.config.initialVelocity.min.y),
    };
    particle.acceleration = { ...this.config.acceleration };
    particle.size =
      this.config.size.min + Math.random() * (this.config.size.max - this.config.size.min);
    particle.life =
      this.config.life.min + Math.random() * (this.config.life.max - this.config.life.min);
    particle.maxLife = particle.life;

    this</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/combat/CombatShipManagerImpl.ts (Line 317:9 - Line 329:8),
              src/managers/combat/CombatShipManagerImpl.ts (Line 202:13 - Line 214:22)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn308"
              onclick="toggleCodeBlock('cloneGroup308', 'expandBtn308', 'collapseBtn308')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn308"
              onclick="toggleCodeBlock('cloneGroup308', 'expandBtn308', 'collapseBtn308')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup308"
            ><code class="language-typescript text-sm text-gray-800">readyWeapon.state.status = 'cooling';
        readyWeapon.state.currentStats.cooldown = Date.now();
        ship.energy -=
          readyWeapon.config.baseStats.energyCost * (ship.techBonuses?.energyEfficiency || 1);

        // Update combat stats
        ship.combatStats.damageDealt +=
          readyWeapon.config.baseStats.damage * (ship.techBonuses?.weaponEfficiency || 1);
      }
    }
  }

  private</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/combat/ObjectDetectionSystem.ts (Line 343:9 - Line 356:20),
              src/managers/combat/ObjectDetectionSystem.ts (Line 243:5 - Line 256:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn309"
              onclick="toggleCodeBlock('cloneGroup309', 'expandBtn309', 'collapseBtn309')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn309"
              onclick="toggleCodeBlock('cloneGroup309', 'expandBtn309', 'collapseBtn309')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup309"
            ><code class="language-typescript text-sm text-gray-800">for (const object of this.detectables.values()) {
          // Skip objects of the same faction (assumed to share IFF)
          if (object.faction === detector.faction) {
            continue;
          }

          // Skip inactive objects
          if (!object.isActive) {
            continue;
          }

          const distance = getDistance(detector.position, object.position);

          // Apply scan boost</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/combat/ObjectDetectionSystem.ts (Line 471:2 - Line 490:6),
              src/managers/combat/ThreatAssessmentManager.ts (Line 489:2 - Line 509:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn310"
              onclick="toggleCodeBlock('cloneGroup310', 'expandBtn310', 'collapseBtn310')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn310"
              onclick="toggleCodeBlock('cloneGroup310', 'expandBtn310', 'collapseBtn310')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup310"
            ><code class="language-typescript text-sm text-gray-800">}
  ): number {
    const deltaX = target.x - source.x;
    const deltaY = target.y - source.y;

    // Calculate angle in radians
    const angleRad = Math.atan2(deltaY, deltaX);

    // Convert to degrees and ensure 0-359 range
    let angleDeg = ((angleRad * 180) / Math.PI) % 360;
    if (angleDeg &lt; 0) {
      angleDeg += 360;
    }

    return angleDeg;
  }

  /**
   * Register event listener
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/colony/ColonyManagerImpl.ts (Line 382:6 - Line 395:7),
              src/managers/colony/ColonyManagerImpl.ts (Line 333:8 - Line 346:16)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn311"
              onclick="toggleCodeBlock('cloneGroup311', 'expandBtn311', 'collapseBtn311')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn311"
              onclick="toggleCodeBlock('cloneGroup311', 'expandBtn311', 'collapseBtn311')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup311"
            ><code class="language-typescript text-sm text-gray-800">(([ resource, amount ]) =&gt; {
      // Convert string resource to ResourceType enum
      let resourceType: ResourceType;
      switch (resource) {
        case ResourceType.MINERALS:
          resourceType = ResourceType.MINERALS;
          break;
        case ResourceType.ENERGY:
          resourceType = ResourceType.ENERGY;
          break;
        default:
          resourceType = ResourceType.MINERALS; // Default case
      }
      return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/managers/automation/GlobalAutomationManager.ts (Line 374:13 - Line 380:2),
              src/managers/automation/GlobalAutomationManager.ts (Line 361:13 - Line 367:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn312"
              onclick="toggleCodeBlock('cloneGroup312', 'expandBtn312', 'collapseBtn312')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn312"
              onclick="toggleCodeBlock('cloneGroup312', 'expandBtn312', 'collapseBtn312')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup312"
            ><code class="language-typescript text-sm text-gray-800">const { target, value } = condition;
            if (target &amp;&amp; value !== undefined) {
              const resourceAmount = this.getResourceAmount(target as ResourceType);
              // Extract numeric value for comparison
              const threshold =
                typeof value === 'number' ? value : (value as ResourceConditionValue).amount;
              if (resourceAmount &lt;</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/registry/ServiceRegistry.ts (Line 216:12 - Line 226:8),
              src/lib/registry/ServiceRegistry.ts (Line 198:12 - Line 208:8)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn313"
              onclick="toggleCodeBlock('cloneGroup313', 'expandBtn313', 'collapseBtn313')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn313"
              onclick="toggleCodeBlock('cloneGroup313', 'expandBtn313', 'collapseBtn313')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup313"
            ><code class="language-typescript text-sm text-gray-800">);
        if (!entry || !entry.initialized) {
          continue;
        }

        try {
          await entry.instance.dispose();
          entry.initialized = false;
        } catch (error) {
          errorLoggingService.logError(error as Error, ErrorType.INITIALIZATION, undefined, {
            service</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/optimization/RenderBatcher.d.ts (Line 11:1 - Line 23:10),
              src/lib/optimization/RenderBatcher.ts (Line 11:2 - Line 23:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn314"
              onclick="toggleCodeBlock('cloneGroup314', 'expandBtn314', 'collapseBtn314')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn314"
              onclick="toggleCodeBlock('cloneGroup314', 'expandBtn314', 'collapseBtn314')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup314"
            ><code class="language-typescript text-sm text-gray-800">interface RenderItem {
  id: string;
  position: Position;
  size: { width: number; height: number };
  rotation: number;
  opacity: number;
  color: string;
  texture?: string;
  shader?: string;
  uniforms?: Record&lt;string, unknown&gt;;
}

interface</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/managers/ServiceRegistry.ts (Line 224:5 - Line 229:5),
              src/lib/managers/ServiceRegistry.ts (Line 181:9 - Line 186:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn315"
              onclick="toggleCodeBlock('cloneGroup315', 'expandBtn315', 'collapseBtn315')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn315"
              onclick="toggleCodeBlock('cloneGroup315', 'expandBtn315', 'collapseBtn315')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup315"
            ><code class="language-typescript text-sm text-gray-800">// Collect dependencies
    const deps: Record&lt;string, BaseManager&gt; = {};
    for (const depName of config.dependencies ?? []) {
      const dep = this.services.get(depName);
      if (!dep) {
        throw new Error(`Dependency '${depName}' not found for service '${name</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/events/UnifiedEventSystem.ts (Line 248:5 - Line 260:21),
              src/lib/events/UnifiedEventSystem.ts (Line 183:5 - Line 195:41)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn316"
              onclick="toggleCodeBlock('cloneGroup316', 'expandBtn316', 'collapseBtn316')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn316"
              onclick="toggleCodeBlock('cloneGroup316', 'expandBtn316', 'collapseBtn316')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup316"
            ><code class="language-typescript text-sm text-gray-800">// Get handlers for this event type
    const handlersMap = this.handlers.get(event?.type);
    if (!handlersMap || handlersMap.size === 0) {
      return;
    }

    try {
      // Convert to array and sort by priority
      const handlers = Array.from(handlersMap.values()).sort(
        (a, b) =&gt; (b.options?.priority ?? 0) - (a.options?.priority ?? 0)
      );

      // Call each handler</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/events/UnifiedEventSystem.ts (Line 285:5 - Line 293:26),
              src/lib/events/UnifiedEventSystem.ts (Line 271:11 - Line 279:34)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn317"
              onclick="toggleCodeBlock('cloneGroup317', 'expandBtn317', 'collapseBtn317')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn317"
              onclick="toggleCodeBlock('cloneGroup317', 'expandBtn317', 'collapseBtn317')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup317"
            ><code class="language-typescript text-sm text-gray-800">} catch (error) {
      if (options?.errorMode === 'throw') {
        throw error;
      } else {
        errorLoggingService.logError(
          error instanceof Error ? error : new Error(String(error)),
          ErrorType.RUNTIME,
          undefined,
          { context: 'EventSystem.publishSync'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/events/UnifiedEventSystem.ts (Line 369:2 - Line 380:27),
              src/lib/events/UnifiedEventSystem.ts (Line 353:12 - Line 364:53)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn318"
              onclick="toggleCodeBlock('cloneGroup318', 'expandBtn318', 'collapseBtn318')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn318"
              onclick="toggleCodeBlock('cloneGroup318', 'expandBtn318', 'collapseBtn318')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup318"
            ><code class="language-typescript text-sm text-gray-800">) {
        for (const [id, subscription] of handlersMap.entries()) {
          if (subscription.scope === scope) {
            handlersMap.delete(id);
          }
        }
        if (handlersMap.size === 0) {
          this.handlers.delete(eventType);
        }
      }
    } else {
      // Clear all subscriptions</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/lib/events/BaseEventEmitter.ts (Line 85:2 - Line 91:5),
              src/lib/events/ModuleEventBus.ts (Line 66:2 - Line 72:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn319"
              onclick="toggleCodeBlock('cloneGroup319', 'expandBtn319', 'collapseBtn319')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn319"
              onclick="toggleCodeBlock('cloneGroup319', 'expandBtn319', 'collapseBtn319')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup319"
            ><code class="language-typescript text-sm text-gray-800">as EventType,
      timestamp: Date.now(),
      moduleId: (data as { moduleId?: string })?.moduleId || 'unknown',
      moduleType: (data as { moduleType?: ModuleType })?.moduleType || 'radar',
      data: data as Record&lt;string, unknown&gt;,
    };
    this</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/ui/useComponentLifecycle.ts (Line 215:2 - Line 228:31),
              src/hooks/ui/useComponentLifecycle.ts (Line 73:2 - Line 86:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn320"
              onclick="toggleCodeBlock('cloneGroup320', 'expandBtn320', 'collapseBtn320')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn320"
              onclick="toggleCodeBlock('cloneGroup320', 'expandBtn320', 'collapseBtn320')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup320"
            ><code class="language-typescript text-sm text-gray-800">{
      // Mark as mounted
      isMounted.current = true;

      // Call onMount callback if provided
      if (options?.onMount) {
        try {
          options?.onMount();
        } catch (error) {
          errorLoggingService.logError(
            error instanceof Error ? error : new Error('Error in onMount callback'),
            ErrorType.RUNTIME,
            ErrorSeverity.MEDIUM,
            { componentName: 'useDynamicComponentLifecycle'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/ui/useComponentLifecycle.ts (Line 231:7 - Line 250:31),
              src/hooks/ui/useComponentLifecycle.ts (Line 88:7 - Line 107:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn321"
              onclick="toggleCodeBlock('cloneGroup321', 'expandBtn321', 'collapseBtn321')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn321"
              onclick="toggleCodeBlock('cloneGroup321', 'expandBtn321', 'collapseBtn321')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup321"
            ><code class="language-typescript text-sm text-gray-800">}
    }

    // Set up event subscriptions
    const unsubscribers: Array&lt;() =&gt; void&gt; = [];

    if (options?.eventSubscriptions) {
      options?.eventSubscriptions.forEach(subscription =&gt; {
        // Subscribe to the event
        const unsubscribe = moduleEventBus.subscribe(subscription.eventType, event =&gt; {
          // Only call handler if component is still mounted
          if (isMounted.current) {
            try {
              subscription.handler(event);
            } catch (error) {
              errorLoggingService.logError(
                error instanceof Error ? error : new Error(`Error handling event ${subscription.eventType}`),
                ErrorType.EVENT_HANDLING,
                ErrorSeverity.MEDIUM,
                { componentName: 'useDynamicComponentLifecycle'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/ui/useComponentLifecycle.ts (Line 264:2 - Line 277:31),
              src/hooks/ui/useComponentLifecycle.ts (Line 119:2 - Line 132:24)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn322"
              onclick="toggleCodeBlock('cloneGroup322', 'expandBtn322', 'collapseBtn322')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn322"
              onclick="toggleCodeBlock('cloneGroup322', 'expandBtn322', 'collapseBtn322')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup322"
            ><code class="language-typescript text-sm text-gray-800">{
        // Mark as unmounted
        isMounted.current = false;

        // Call onUnmount callback if provided
        if (options?.onUnmount) {
          try {
            options?.onUnmount();
          } catch (error) {
            errorLoggingService.logError(
              error instanceof Error ? error : new Error('Error in onUnmount callback'),
              ErrorType.RUNTIME,
              ErrorSeverity.MEDIUM,
              { componentName: 'useDynamicComponentLifecycle'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/resources/useResourceTracking.ts (Line 401:2 - Line 417:4),
              src/hooks/resources/useResourceTracking.ts (Line 355:2 - Line 371:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn323"
              onclick="toggleCodeBlock('cloneGroup323', 'expandBtn323', 'collapseBtn323')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn323"
              onclick="toggleCodeBlock('cloneGroup323', 'expandBtn323', 'collapseBtn323')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup323"
            ><code class="language-typescript text-sm text-gray-800">= useCallback(
    (type: ResourceType, amount: number) =&gt; {
      if (amount &lt;= 0) {
        return;
      }

      setState(prev =&gt; {
        const resources = new Map(prev.resources);
        const current = resources.get(type) || {
          current: 0,
          min: 0,
          max: 100,
          production: 0,
          consumption: 0,
        };

        const newValue = Math.max</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/resources/useResourceTracking.ts (Line 428:14 - Line 446:21),
              src/hooks/resources/useResourceTracking.ts (Line 382:10 - Line 400:22)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn324"
              onclick="toggleCodeBlock('cloneGroup324', 'expandBtn324', 'collapseBtn324')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn324"
              onclick="toggleCodeBlock('cloneGroup324', 'expandBtn324', 'collapseBtn324')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup324"
            ><code class="language-typescript text-sm text-gray-800">,
          amount,
          timestamp: Date.now(),
        };

        const history = [transfer, ...prev.history].slice(0, historyLimit);

        return {
          ...prev,
          resources,
          history,
          lastUpdated: Date.now(),
        };
      });
    },
    [historyLimit]
  );

  // Transfer resource</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/resources/useResourceTracking.ts (Line 604:2 - Line 613:3),
              src/hooks/resources/useResourceTracking.ts (Line 584:2 - Line 593:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn325"
              onclick="toggleCodeBlock('cloneGroup325', 'expandBtn325', 'collapseBtn325')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn325"
              onclick="toggleCodeBlock('cloneGroup325', 'expandBtn325', 'collapseBtn325')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup325"
            ><code class="language-typescript text-sm text-gray-800">= useCallback(
    (percentage: number) =&gt; {
      const result: ResourceType[] = [];

      // Convert Map entries to array to avoid MapIterator error
      const resourceEntries = Array.from(state.resources.entries());
      for (const [type, resource] of resourceEntries) {
        const resourcePercentage = (resource.current / resource.max) * 100;

        if (resourcePercentage &lt;=</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/modules/useModuleUpgrade.ts (Line 198:7 - Line 209:2),
              src/hooks/modules/useModuleUpgrade.ts (Line 177:5 - Line 188:13)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn327"
              onclick="toggleCodeBlock('cloneGroup327', 'expandBtn327', 'collapseBtn327')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn327"
              onclick="toggleCodeBlock('cloneGroup327', 'expandBtn327', 'collapseBtn327')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup327"
            ><code class="language-typescript text-sm text-gray-800">try {
        // Get all modules
        const modules = moduleManager.getActiveModules();

        // Filter modules with available upgrades
        const availableUpgrades = modules.filter(module =&gt; {
          const status = moduleUpgradeManager.getUpgradeStatus(module.id);
          return status?.upgradeAvailable &amp;&amp; status?.requirementsMet;
        });

        setModuleIds(availableUpgrades.map(module =&gt; module.id));
      }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/modules/useModuleStatus.ts (Line 210:5 - Line 219:7),
              src/hooks/modules/useModuleUpgrade.ts (Line 118:5 - Line 129:26)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn328"
              onclick="toggleCodeBlock('cloneGroup328', 'expandBtn328', 'collapseBtn328')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn328"
              onclick="toggleCodeBlock('cloneGroup328', 'expandBtn328', 'collapseBtn328')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup328"
            ><code class="language-typescript text-sm text-gray-800">if (hours &gt; 0) {
      return `${hours}h ${minutes % 60}m`;
    }
    if (minutes &gt; 0) {
      return `${minutes}m ${seconds % 60}s`;
    }
    return `${seconds}s`;
  }, []);

  return</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/modules/useModuleEvents.ts (Line 104:3 - Line 119:6),
              src/hooks/modules/useModuleEvents.ts (Line 67:3 - Line 82:39)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn329"
              onclick="toggleCodeBlock('cloneGroup329', 'expandBtn329', 'collapseBtn329')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn329"
              onclick="toggleCodeBlock('cloneGroup329', 'expandBtn329', 'collapseBtn329')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup329"
            ><code class="language-typescript text-sm text-gray-800">handler: (event: ModuleManagerEvent) =&gt; void, // Revert handler type to ModuleManagerEvent
  options: { enabled?: boolean; deps?: React.DependencyList; } = {}
): void {
  const { enabled = true, deps = [] } = options;
  const handlerRef = useRef(handler);

  useEffect(() =&gt; {
    handlerRef.current = handler;
  }, [ handler, ...deps ]);

  useEffect(() =&gt; {
    if (!enabled) {
      return;
    }

    const</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useResourceSystemIntegration.ts (Line 78:2 - Line 87:2),
              src/hooks/integration/useResourceSystemIntegration.ts (Line 47:2 - Line 57:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn330"
              onclick="toggleCodeBlock('cloneGroup330', 'expandBtn330', 'collapseBtn330')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn330"
              onclick="toggleCodeBlock('cloneGroup330', 'expandBtn330', 'collapseBtn330')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup330"
            ><code class="language-typescript text-sm text-gray-800">|| null);
            setError(null);
          } catch (e) {
            const error = e instanceof Error ? e : new Error(String(e));
            setError(error);

            // Log error
            errorLoggingService.logError(error, ErrorType.UI, ErrorSeverity.MEDIUM, {
              component: 'useResource',
              resourceType,</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useResourceSystemIntegration.ts (Line 164:9 - Line 171:15),
              src/hooks/integration/useResourceSystemIntegration.ts (Line 48:9 - Line 55:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn331"
              onclick="toggleCodeBlock('cloneGroup331', 'expandBtn331', 'collapseBtn331')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn331"
              onclick="toggleCodeBlock('cloneGroup331', 'expandBtn331', 'collapseBtn331')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup331"
            ><code class="language-typescript text-sm text-gray-800">setError(null);
      } catch (e) {
        const error = e instanceof Error ? e : new Error(String(e));
        setError(error);

        // Log error
        errorLoggingService.logError(error, ErrorType.UI, ErrorSeverity.MEDIUM, {
          component: 'useResources'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useResourceSystemIntegration.ts (Line 201:15 - Line 211:13),
              src/hooks/integration/useResourceSystemIntegration.ts (Line 162:9 - Line 172:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn332"
              onclick="toggleCodeBlock('cloneGroup332', 'expandBtn332', 'collapseBtn332')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn332"
              onclick="toggleCodeBlock('cloneGroup332', 'expandBtn332', 'collapseBtn332')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup332"
            ><code class="language-typescript text-sm text-gray-800">}

              setError(null);
            } catch (e) {
              const error = e instanceof Error ? e : new Error(String(e));
              setError(error);

              // Log error
              errorLoggingService.logError(error, ErrorType.UI, ErrorSeverity.MEDIUM, {
                component: 'useResources',
                resourceType</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useResourceSystemIntegration.ts (Line 281:2 - Line 293:18),
              src/hooks/integration/useResourceSystemIntegration.ts (Line 250:2 - Line 262:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn333"
              onclick="toggleCodeBlock('cloneGroup333', 'expandBtn333', 'collapseBtn333')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn333"
              onclick="toggleCodeBlock('cloneGroup333', 'expandBtn333', 'collapseBtn333')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup333"
            ><code class="language-typescript text-sm text-gray-800">amount;
        resourceManager.setResourceAmount(resourceType, newAmount);
        return true;
      }
      return false;
    } catch (e) {
      const error = e instanceof Error ? e : new Error(String(e));
      setError(error);

      // Log error
      errorLoggingService.logError(error, ErrorType.UI, ErrorSeverity.MEDIUM, {
        component: 'useResourceActions',
        method: 'consumeResource'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useResourceSystemIntegration.ts (Line 307:5 - Line 315:14),
              src/hooks/integration/useResourceSystemIntegration.ts (Line 254:6 - Line 262:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn334"
              onclick="toggleCodeBlock('cloneGroup334', 'expandBtn334', 'collapseBtn334')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn334"
              onclick="toggleCodeBlock('cloneGroup334', 'expandBtn334', 'collapseBtn334')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup334"
            ><code class="language-typescript text-sm text-gray-800">;
    } catch (e) {
      const error = e instanceof Error ? e : new Error(String(e));
      setError(error);

      // Log error
      errorLoggingService.logError(error, ErrorType.UI, ErrorSeverity.MEDIUM, {
        component: 'useResourceActions',
        method: 'setResource'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useModuleSystemIntegration.ts (Line 99:6 - Line 107:29),
              src/hooks/integration/useModuleSystemIntegration.ts (Line 79:5 - Line 87:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn335"
              onclick="toggleCodeBlock('cloneGroup335', 'expandBtn335', 'collapseBtn335')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn335"
              onclick="toggleCodeBlock('cloneGroup335', 'expandBtn335', 'collapseBtn335')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup335"
            ><code class="language-typescript text-sm text-gray-800">);
      return true;
    } catch (e) {
      const error = e instanceof Error ? e : new Error(String(e));
      setError(error);
      
      // Log error
      errorLoggingService.logError(error, ErrorType.RUNTIME, ErrorSeverity.MEDIUM, {
        component: 'useModule.deactivateModule'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useModuleSystemIntegration.ts (Line 118:9 - Line 126:26),
              src/hooks/integration/useModuleSystemIntegration.ts (Line 79:5 - Line 87:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn336"
              onclick="toggleCodeBlock('cloneGroup336', 'expandBtn336', 'collapseBtn336')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn336"
              onclick="toggleCodeBlock('cloneGroup336', 'expandBtn336', 'collapseBtn336')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup336"
            ><code class="language-typescript text-sm text-gray-800">);
      return true;
    } catch (e) {
      const error = e instanceof Error ? e : new Error(String(e));
      setError(error);
      
      // Log error
      errorLoggingService.logError(error, ErrorType.RUNTIME, ErrorSeverity.MEDIUM, {
        component: 'useModule.upgradeModule'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useModuleSystemIntegration.ts (Line 172:2 - Line 180:13),
              src/hooks/integration/useModuleSystemIntegration.ts (Line 33:5 - Line 41:12)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn337"
              onclick="toggleCodeBlock('cloneGroup337', 'expandBtn337', 'collapseBtn337')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn337"
              onclick="toggleCodeBlock('cloneGroup337', 'expandBtn337', 'collapseBtn337')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup337"
            ><code class="language-typescript text-sm text-gray-800">);
        setError(null);
      } catch (e) {
        const error = e instanceof Error ? e : new Error(String(e));
        setError(error);
        
        // Log error
        errorLoggingService.logError(error, ErrorType.RUNTIME, ErrorSeverity.MEDIUM, {
          component: 'useModules'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useModuleSystemIntegration.ts (Line 259:2 - Line 268:26),
              src/hooks/integration/useModuleSystemIntegration.ts (Line 79:5 - Line 87:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn338"
              onclick="toggleCodeBlock('cloneGroup338', 'expandBtn338', 'collapseBtn338')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn338"
              onclick="toggleCodeBlock('cloneGroup338', 'expandBtn338', 'collapseBtn338')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup338"
            ><code class="language-typescript text-sm text-gray-800">);
      
      return true;
    } catch (e) {
      const error = e instanceof Error ? e : new Error(String(e));
      setError(error);
      
      // Log error
      errorLoggingService.logError(error, ErrorType.RUNTIME, ErrorSeverity.MEDIUM, {
        component: 'useModules.removeModule'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/integration/useEventSystemIntegration.ts (Line 51:2 - Line 63:24),
              src/hooks/integration/useEventSystemIntegration.ts (Line 20:10 - Line 32:54)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn339"
              onclick="toggleCodeBlock('cloneGroup339', 'expandBtn339', 'collapseBtn339')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn339"
              onclick="toggleCodeBlock('cloneGroup339', 'expandBtn339', 'collapseBtn339')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup339"
            ><code class="language-typescript text-sm text-gray-800">,
  handler: (event: BaseEvent) =&gt; void,
  deps: unknown[] = []
) {
  // Use ref to store the handler to prevent unnecessary re-subscriptions
  const handlerRef = useRef(handler);
  
  // Update handler ref when handler changes
  useEffect(() =&gt; {
    handlerRef.current = handler;
  }, [handler]);
  
  // Set up subscriptions</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/factions/useEnemyAI.ts (Line 211:3 - Line 219:33),
              src/hooks/factions/useFleetAI.ts (Line 673:3 - Line 681:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn340"
              onclick="toggleCodeBlock('cloneGroup340', 'expandBtn340', 'collapseBtn340')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn340"
              onclick="toggleCodeBlock('cloneGroup340', 'expandBtn340', 'collapseBtn340')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup340"
            ><code class="language-typescript text-sm text-gray-800">const avgThreat = threats.reduce(
    (acc, threat) =&gt; ({
      x: acc.x + threat.position.x / threats.length,
      y: acc.y + threat.position.y / threats.length,
    }),
    { x: 0, y: 0 }
  );

  // Retreat in opposite direction</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/events/useEventSubscription.ts (Line 179:3 - Line 196:36),
              src/hooks/events/useEventSubscription.ts (Line 75:5 - Line 92:35)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn341"
              onclick="toggleCodeBlock('cloneGroup341', 'expandBtn341', 'collapseBtn341')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn341"
              onclick="toggleCodeBlock('cloneGroup341', 'expandBtn341', 'collapseBtn341')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup341"
            ><code class="language-typescript text-sm text-gray-800">);

  // Track whether we're subscribed and how munknown events we've received
  const [subscribed, setSubscribed] = useState&lt;boolean&gt;(false);
  const receivedCountRef = useRef&lt;number&gt;(0);

  // Track the unsubscribe function
  const unsubscribeRef = useRef&lt;(() =&gt; void) | null&gt;(null);

  // Memoize the handler function to include filtering
  const eventHandler = useCallback(
    (event: T) =&gt; {
      // Apply filter if provided
      if (filter &amp;&amp; !filter(event)) {
        return;
      }

      // Update latest events if tracking</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/events/useEventBatching.ts (Line 220:3 - Line 245:33),
              src/hooks/events/useEventBatching.ts (Line 144:3 - Line 169:33)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn342"
              onclick="toggleCodeBlock('cloneGroup342', 'expandBtn342', 'collapseBtn342')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn342"
              onclick="toggleCodeBlock('cloneGroup342', 'expandBtn342', 'collapseBtn342')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup342"
            ><code class="language-typescript text-sm text-gray-800">event: ModuleEvent | null;

  /**
   * Clear the current event
   */
  clearEvent: () =&gt; void;

  /**
   * Whether an event is available
   */
  hasEvent: boolean;

  /**
   * Event type of the current event
   */
  eventType: ModuleEventType | null;

  /**
   * Module ID of the current event
   */
  moduleId: string | null;
} {
  // State for the current event
  const [event, setEvent] = useState&lt;ModuleEvent | null&gt;(null);

  // Subscribe to throttled events</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/events/useEventBatching.ts (Line 265:13 - Line 284:2),
              src/hooks/events/useEventBatching.ts (Line 189:13 - Line 208:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn343"
              onclick="toggleCodeBlock('cloneGroup343', 'expandBtn343', 'collapseBtn343')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn343"
              onclick="toggleCodeBlock('cloneGroup343', 'expandBtn343', 'collapseBtn343')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup343"
            ><code class="language-typescript text-sm text-gray-800">]);

  // Clear the current event
  const clearEvent = () =&gt; {
    setEvent(null);
  };

  // Derived values
  const hasEvent = event !== null;
  const eventType = event?.type || null;
  const moduleId = event?.moduleId || null;

  return {
    event,
    clearEvent,
    hasEvent,
    eventType,
    moduleId,
  };
}</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/combat/useCombatAI.ts (Line 139:7 - Line 158:46),
              src/hooks/combat/useCombatAI.ts (Line 117:10 - Line 136:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn344"
              onclick="toggleCodeBlock('cloneGroup344', 'expandBtn344', 'collapseBtn344')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn344"
              onclick="toggleCodeBlock('cloneGroup344', 'expandBtn344', 'collapseBtn344')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup344"
            ><code class="language-typescript text-sm text-gray-800">) ?? []
      ).map(unit =&gt; ({
        ...unit,
        velocity: { x: 0, y: 0 }, // Add default velocity for units
        status: convertStatus(unit.status),
        weapons: unit.weapons.map(weapon =&gt; ({
          id: weapon.id,
          type: weapon.type as WeaponCategory,
          damage: weapon.damage,
          range: weapon.range,
          cooldown: weapon.cooldown,
          status: weapon.status as WeaponStatus,
        })),
        stats: {
          ...unit.stats,
          armor: 0, // Add default armor value
        },
      }));

      // Update formation based on combat situation</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/combat/useCombatAI.ts (Line 166:11 - Line 179:7),
              src/hooks/combat/useCombatAI.ts (Line 121:9 - Line 134:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn345"
              onclick="toggleCodeBlock('cloneGroup345', 'expandBtn345', 'collapseBtn345')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn345"
              onclick="toggleCodeBlock('cloneGroup345', 'expandBtn345', 'collapseBtn345')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup345"
            ><code class="language-typescript text-sm text-gray-800">status: convertStatus(unit.status),
          weapons: unit.weapons.map(weapon =&gt; ({
            id: weapon.id,
            type: weapon.type as WeaponCategory,
            damage: weapon.damage,
            range: weapon.range,
            cooldown: weapon.cooldown,
            status: weapon.status as WeaponStatus,
          })),
          stats: {
            ...unit.stats,
            armor: 0, // Add default armor value
          },
          target</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/automation/useGlobalAutomation.ts (Line 284:2 - Line 300:27),
              src/hooks/automation/useGlobalAutomation.ts (Line 222:2 - Line 238:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn346"
              onclick="toggleCodeBlock('cloneGroup346', 'expandBtn346', 'collapseBtn346')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn346"
              onclick="toggleCodeBlock('cloneGroup346', 'expandBtn346', 'collapseBtn346')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup346"
            ><code class="language-typescript text-sm text-gray-800">= useCallback(
    (
      name: string,
      description: string,
      systems: SystemId[],
      actions: AutomationAction[],
      options?: {
        conditions?: AutomationCondition[];
        interval?: number;
        priority?: MessagePriority;
        enabled?: boolean;
        tags?: string[];
      }
    ): string =&gt; {
      return createRoutine(
        name,
        'performance-optimization'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/errorHandling/utils/migration.ts (Line 92:2 - Line 100:19),
              src/errorHandling/utils/migration.ts (Line 33:2 - Line 41:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn347"
              onclick="toggleCodeBlock('cloneGroup347', 'expandBtn347', 'collapseBtn347')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn347"
              onclick="toggleCodeBlock('cloneGroup347', 'expandBtn347', 'collapseBtn347')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup347"
            ><code class="language-typescript text-sm text-gray-800">} = props;

  // Create fallback function if FallbackComponent is provided
  let fallback: ((error: Error, reset: () =&gt; void) =&gt; React.ReactNode) | undefined = undefined;
  if (FallbackComponent) {
    fallback = (error: Error, reset: () =&gt; void) =&gt; {
      return React.createElement(FallbackComponent, {
        error,
        resetErrorBoundary</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 110:12 - Line 125:4),
              src/config/ships/spaceRatsShips.ts (Line 504:13 - Line 519:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn367"
              onclick="toggleCodeBlock('cloneGroup367', 'expandBtn367', 'collapseBtn367')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn367"
              onclick="toggleCodeBlock('cloneGroup367', 'expandBtn367', 'collapseBtn367')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup367"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'rail-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['railGun'],
        currentWeapon: {
          config: {
            id: 'heavy-railgun',
            name: 'Heavy Railgun',
            category: 'railGun',
            tier: 3,
            baseStats: {
              damage: 300</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 189:12 - Line 204:3),
              src/config/ships/spaceRatsShips.ts (Line 583:13 - Line 598:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn368"
              onclick="toggleCodeBlock('cloneGroup368', 'expandBtn368', 'collapseBtn368')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn368"
              onclick="toggleCodeBlock('cloneGroup368', 'expandBtn368', 'collapseBtn368')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup368"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'mgss-1',
        size: 'medium' as WeaponMountSize,
        position: 'turret' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['mgss'],
        currentWeapon: {
          config: {
            id: 'mgss-cannon',
            name: 'MGSS Cannon',
            category: 'mgss',
            tier: 2,
            baseStats: {
              damage: 40</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 502:2 - Line 515:16),
              src/config/ships/lostNovaShips.ts (Line 344:2 - Line 357:19)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn369"
              onclick="toggleCodeBlock('cloneGroup369', 'expandBtn369', 'collapseBtn369')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn369"
              onclick="toggleCodeBlock('cloneGroup369', 'expandBtn369', 'collapseBtn369')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup369"
            ><code class="language-typescript text-sm text-gray-800">,
    cargo: 250,
    tier: 3,
    faction: 'lost-nova',
    weapons: [
      {
        id: 'rail-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['railGun'],
        currentWeapon: {
          config: {
            id: 'heavy-railgun'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 503:4 - Line 521:5),
              src/config/ships/lostNovaShips.ts (Line 108:4 - Line 520:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn370"
              onclick="toggleCodeBlock('cloneGroup370', 'expandBtn370', 'collapseBtn370')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn370"
              onclick="toggleCodeBlock('cloneGroup370', 'expandBtn370', 'collapseBtn370')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup370"
            ><code class="language-typescript text-sm text-gray-800">,
    tier: 3,
    faction: 'lost-nova',
    weapons: [
      {
        id: 'rail-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['railGun'],
        currentWeapon: {
          config: {
            id: 'heavy-railgun',
            name: 'Heavy Railgun',
            category: 'railGun',
            tier: 3,
            baseStats: {
              damage: 200,
              range: 1300</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 584:12 - Line 597:2),
              src/config/ships/spaceRatsShips.ts (Line 425:13 - Line 438:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn371"
              onclick="toggleCodeBlock('cloneGroup371', 'expandBtn371', 'collapseBtn371')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn371"
              onclick="toggleCodeBlock('cloneGroup371', 'expandBtn371', 'collapseBtn371')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup371"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'rocket-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['rockets'],
        currentWeapon: {
          config: {
            id: 'heavy-rockets',
            name: 'Heavy Rockets',
            category: 'rockets',
            tier: 3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 663:12 - Line 676:2),
              src/config/ships/spaceRatsShips.ts (Line 662:13 - Line 675:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn372"
              onclick="toggleCodeBlock('cloneGroup372', 'expandBtn372', 'collapseBtn372')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn372"
              onclick="toggleCodeBlock('cloneGroup372', 'expandBtn372', 'collapseBtn372')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup372"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'gauss-1',
        size: 'medium' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['gaussCannon'],
        currentWeapon: {
          config: {
            id: 'gauss-cannon',
            name: 'Gauss Cannon',
            category: 'gaussCannon',
            tier: 3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/lostNovaShips.ts (Line 741:2 - Line 755:2),
              src/config/ships/lostNovaShips.ts (Line 425:2 - Line 439:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn373"
              onclick="toggleCodeBlock('cloneGroup373', 'expandBtn373', 'collapseBtn373')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn373"
              onclick="toggleCodeBlock('cloneGroup373', 'expandBtn373', 'collapseBtn373')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup373"
            ><code class="language-typescript text-sm text-gray-800">,
    faction: 'lost-nova',
    weapons: [
      {
        id: 'mgss-1',
        size: 'medium' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['mgss'],
        currentWeapon: {
          config: {
            id: 'mgss-cannon',
            name: 'MGSS Cannon',
            category: 'mgss',
            tier: 3</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/equatorHorizonShips.ts (Line 566:18 - Line 581:4),
              src/config/ships/spaceRatsShips.ts (Line 425:13 - Line 599:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn374"
              onclick="toggleCodeBlock('cloneGroup374', 'expandBtn374', 'collapseBtn374')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn374"
              onclick="toggleCodeBlock('cloneGroup374', 'expandBtn374', 'collapseBtn374')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup374"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'rocket-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['rockets'],
        currentWeapon: {
          config: {
            id: 'heavy-rockets',
            name: 'Heavy Rockets',
            category: 'rockets',
            tier: 3,
            baseStats: {
              damage: 280</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/equatorHorizonShips.ts (Line 724:18 - Line 739:4),
              src/config/ships/spaceRatsShips.ts (Line 504:13 - Line 519:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn375"
              onclick="toggleCodeBlock('cloneGroup375', 'expandBtn375', 'collapseBtn375')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn375"
              onclick="toggleCodeBlock('cloneGroup375', 'expandBtn375', 'collapseBtn375')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup375"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'rail-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['railGun'],
        currentWeapon: {
          config: {
            id: 'heavy-railgun',
            name: 'Heavy Railgun',
            category: 'railGun',
            tier: 3,
            baseStats: {
              damage: 350</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/equatorHorizonShips.ts (Line 803:18 - Line 818:4),
              src/config/ships/lostNovaShips.ts (Line 426:12 - Line 757:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn376"
              onclick="toggleCodeBlock('cloneGroup376', 'expandBtn376', 'collapseBtn376')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn376"
              onclick="toggleCodeBlock('cloneGroup376', 'expandBtn376', 'collapseBtn376')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup376"
            ><code class="language-typescript text-sm text-gray-800">,
    weapons: [
      {
        id: 'mgss-1',
        size: 'medium' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['mgss'],
        currentWeapon: {
          config: {
            id: 'mgss-cannon',
            name: 'MGSS Cannon',
            category: 'mgss',
            tier: 3,
            baseStats: {
              damage: 100</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/equatorHorizonShips.ts (Line 821:2 - Line 835:4),
              src/config/ships/lostNovaShips.ts (Line 760:2 - Line 774:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn377"
              onclick="toggleCodeBlock('cloneGroup377', 'expandBtn377', 'collapseBtn377')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn377"
              onclick="toggleCodeBlock('cloneGroup377', 'expandBtn377', 'collapseBtn377')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup377"
            ><code class="language-typescript text-sm text-gray-800">,
              energyCost: 10,
              cooldown: 3,
              effects: [PLASMA_EFFECT],
            },
            visualAsset: 'weapons/mgss/advanced',
            mountRequirements: {
              size: 'medium' as WeaponMountSize,
              power: 25,
            },
          },
          state: {
            status: 'ready' as WeaponStatus,
            currentStats: {
              damage: 100</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/ships/equatorHorizonShips.ts (Line 880:4 - Line 897:4),
              src/config/ships/equatorHorizonShips.ts (Line 643:4 - Line 660:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn378"
              onclick="toggleCodeBlock('cloneGroup378', 'expandBtn378', 'collapseBtn378')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn378"
              onclick="toggleCodeBlock('cloneGroup378', 'expandBtn378', 'collapseBtn378')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup378"
            ><code class="language-typescript text-sm text-gray-800">,
    tier: 3,
    faction: 'equator-horizon',
    weapons: [
      {
        id: 'gauss-1',
        size: 'large' as WeaponMountSize,
        position: 'front' as WeaponMountPosition,
        rotation: 0,
        allowedCategories: ['gaussCannon'],
        currentWeapon: {
          config: {
            id: 'gauss-cannon',
            name: 'Gauss Cannon',
            category: 'gaussCannon',
            tier: 3,
            baseStats: {
              damage: 240</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/modules/defaultModuleConfigs.ts (Line 98:45 - Line 108:3),
              src/config/modules/defaultModuleConfigs.ts (Line 62:51 - Line 72:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn379"
              onclick="toggleCodeBlock('cloneGroup379', 'expandBtn379', 'collapseBtn379')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn379"
              onclick="toggleCodeBlock('cloneGroup379', 'expandBtn379', 'collapseBtn379')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup379"
            ><code class="language-typescript text-sm text-gray-800">,
    requirements: {
      minLevel: 1,
      buildingType: ['colony'],
      resourceCosts: [
        { type: ResourceType.MINERALS, amount: 400 },
        { type: ResourceType.ENERGY, amount: 300 },
      ],
    },
    baseStats: {
      power: 70</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/modules/defaultModuleConfigs.ts (Line 116:48 - Line 126:3),
              src/config/modules/defaultModuleConfigs.ts (Line 8:41 - Line 18:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn380"
              onclick="toggleCodeBlock('cloneGroup380', 'expandBtn380', 'collapseBtn380')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn380"
              onclick="toggleCodeBlock('cloneGroup380', 'expandBtn380', 'collapseBtn380')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup380"
            ><code class="language-typescript text-sm text-gray-800">,
    requirements: {
      minLevel: 1,
      buildingType: ['mothership', 'colony'],
      resourceCosts: [
        { type: ResourceType.MINERALS, amount: 300 },
        { type: ResourceType.ENERGY, amount: 200 },
      ],
    },
    baseStats: {
      power: 40</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/config/modules/defaultModuleConfigs.ts (Line 134:47 - Line 144:3),
              src/config/modules/defaultModuleConfigs.ts (Line 80:46 - Line 90:3)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn381"
              onclick="toggleCodeBlock('cloneGroup381', 'expandBtn381', 'collapseBtn381')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn381"
              onclick="toggleCodeBlock('cloneGroup381', 'expandBtn381', 'collapseBtn381')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup381"
            ><code class="language-typescript text-sm text-gray-800">,
    requirements: {
      minLevel: 1,
      buildingType: ['colony'],
      resourceCosts: [
        { type: ResourceType.MINERALS, amount: 500 },
        { type: ResourceType.ENERGY, amount: 300 },
      ],
    },
    baseStats: {
      power: 60</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/ResourceTypeConverter.ts (Line 56:8 - Line 69:61),
              src/utils/resources/ResourceTypeConverter.ts (Line 21:5 - Line 36:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn417"
              onclick="toggleCodeBlock('cloneGroup417', 'expandBtn417', 'collapseBtn417')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn417"
              onclick="toggleCodeBlock('cloneGroup417', 'expandBtn417', 'collapseBtn417')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup417"
            ><code class="language-typescript text-sm text-gray-800">,
    IRON: ResourceType.IRON,
    COPPER: ResourceType.COPPER,
    TITANIUM: ResourceType.TITANIUM,
    URANIUM: ResourceType.URANIUM,
    WATER: ResourceType.WATER,
    HELIUM: ResourceType.HELIUM,
    DEUTERIUM: ResourceType.DEUTERIUM,
    ANTIMATTER: ResourceType.ANTIMATTER,
    DARK_MATTER: ResourceType.DARK_MATTER,
    EXOTIC_MATTER: ResourceType.EXOTIC_MATTER,
  };

  // Mapping from enum resource types to string resource types</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/utils/ResourceTypeConverter.ts (Line 70:16 - Line 97:6),
              src/utils/resources/ResourceTypeConverter.ts (Line 37:19 - Line 63:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn418"
              onclick="toggleCodeBlock('cloneGroup418', 'expandBtn418', 'collapseBtn418')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn418"
              onclick="toggleCodeBlock('cloneGroup418', 'expandBtn418', 'collapseBtn418')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup418"
            ><code class="language-typescript text-sm text-gray-800">: Record&lt;ResourceType, string&gt; = {
    [ResourceType.MINERALS]: 'MINERALS',
    [ResourceType.ENERGY]: 'ENERGY',
    [ResourceType.POPULATION]: 'POPULATION',
    [ResourceType.RESEARCH]: 'RESEARCH',
    [ResourceType.PLASMA]: 'PLASMA',
    [ResourceType.GAS]: 'GAS',
    [ResourceType.EXOTIC]: 'EXOTIC',
    [ResourceType.ORGANIC]: 'ORGANIC',
    [ResourceType.FOOD]: 'FOOD',
    [ResourceType.IRON]: 'IRON',
    [ResourceType.COPPER]: 'COPPER',
    [ResourceType.TITANIUM]: 'TITANIUM',
    [ResourceType.URANIUM]: 'URANIUM',
    [ResourceType.WATER]: 'WATER',
    [ResourceType.HELIUM]: 'HELIUM',
    [ResourceType.DEUTERIUM]: 'DEUTERIUM',
    [ResourceType.ANTIMATTER]: 'ANTIMATTER',
    [ResourceType.DARK_MATTER]: 'DARK_MATTER',
    [ResourceType.EXOTIC_MATTER]: 'EXOTIC_MATTER',
  };

  /**
   * Convert a string resource type to an enum resource type
   *
   * @param stringType The string resource type
   * @returns The enum resource type or undefined if not found
   */</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/styles/mediaQueries.ts (Line 179:3 - Line 185:52), src/ui/theme/defaultTheme.ts
              (Line 153:3 - Line 160:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn419"
              onclick="toggleCodeBlock('cloneGroup419', 'expandBtn419', 'collapseBtn419')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn419"
              onclick="toggleCodeBlock('cloneGroup419', 'expandBtn419', 'collapseBtn419')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup419"
            ><code class="language-typescript text-sm text-gray-800">breakpoints: {
    [ThemeBreakpoint.XS]: '0px',
    [ThemeBreakpoint.SM]: '600px',
    [ThemeBreakpoint.MD]: '960px',
    [ThemeBreakpoint.LG]: '1280px',
    [ThemeBreakpoint.XL]: '1920px',
    [ThemeBreakpoint.XXL]: '2560px', // Add XXL breakpoint to match ThemeBreakpoint enum</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/WorkerService.ts (Line 275:2 - Line 285:22),
              src/services/WorkerService.ts (Line 246:9 - Line 257:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn420"
              onclick="toggleCodeBlock('cloneGroup420', 'expandBtn420', 'collapseBtn420')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn420"
              onclick="toggleCodeBlock('cloneGroup420', 'expandBtn420', 'collapseBtn420')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup420"
            ><code class="language-typescript text-sm text-gray-800">;
    this.metadata.metrics = metrics;

    // Release worker
    const workerEntry = Array.from(this.workerPool.entries()).find(([, t]) =&gt; t === task);
    const worker = workerEntry?.[0];
    if (worker) {
      this.workerPool.set(worker, null);
    }

    // Call error handler</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/WebGLService.ts (Line 713:16 - Line 729:17), src/services/WebGLService.ts
              (Line 694:2 - Line 710:14)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn421"
              onclick="toggleCodeBlock('cloneGroup421', 'expandBtn421', 'collapseBtn421')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn421"
              onclick="toggleCodeBlock('cloneGroup421', 'expandBtn421', 'collapseBtn421')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup421"
            ><code class="language-typescript text-sm text-gray-800">): void {
    if (!this.gl) {
      throw new Error('WebGL context not initialized');
    }

    const storageExt = this.gl.getExtension('WEBGL_storage_buffer');
    if (!storageExt) {
      throw new Error('Storage buffers not supported');
    }

    const buffer = this.storageBuffers.get(name);
    if (!buffer) {
      throw new Error(`Storage buffer '${name}' not found`);
    }

    this.gl.bindBuffer(storageExt.SHADER_STORAGE_BUFFER, buffer.buffer);
    this.gl.getBufferSubData</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/EventPropagationService.ts (Line 123:9 - Line 134:2),
              src/services/EventPropagationService.ts (Line 102:5 - Line 114:31)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn422"
              onclick="toggleCodeBlock('cloneGroup422', 'expandBtn422', 'collapseBtn422')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn422"
              onclick="toggleCodeBlock('cloneGroup422', 'expandBtn422', 'collapseBtn422')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup422"
            ><code class="language-typescript text-sm text-gray-800">// Update metrics
        if (!this.metadata.metrics) {
          this.metadata.metrics = {};
        }
        const { metrics } = this.metadata;
        metrics.total_subscriptions = Array.from(this.subscriptions.values()).reduce(
          (sum, subs) =&gt; sum + subs.length,
          0
        );
        metrics.total_event_types = this.subscriptions.size;
        this.metadata.metrics = metrics;
      }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/EventPropagationService.ts (Line 202:2 - Line 212:41),
              src/services/RecoveryService.ts (Line 152:6 - Line 162:62)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn423"
              onclick="toggleCodeBlock('cloneGroup423', 'expandBtn423', 'collapseBtn423')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn423"
              onclick="toggleCodeBlock('cloneGroup423', 'expandBtn423', 'collapseBtn423')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup423"
            ><code class="language-typescript text-sm text-gray-800">): void {
    // Update error metrics
    if (!this.metadata.metrics) {
      this.metadata.metrics = {};
    }
    const { metrics } = this.metadata;
    metrics.total_errors = (metrics.total_errors ?? 0) + 1;
    metrics.last_error_timestamp = Date.now();
    this.metadata.metrics = metrics;

    // Use custom error handler if available</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/ErrorLoggingService.ts (Line 149:8 - Line 155:14),
              src/services/ErrorLoggingService.ts (Line 130:8 - Line 136:18)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn424"
              onclick="toggleCodeBlock('cloneGroup424', 'expandBtn424', 'collapseBtn424')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn424"
              onclick="toggleCodeBlock('cloneGroup424', 'expandBtn424', 'collapseBtn424')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup424"
            ><code class="language-typescript text-sm text-gray-800">(message: string, metadata?: Record&lt;string, unknown&gt;): void {
    // Update metrics
    if (!this.metadata.metrics) {
      this.metadata.metrics = {};
    }
    const { metrics } = this.metadata;
    metrics[ 'info_logged'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/ComponentRegistryService.ts (Line 125:5 - Line 134:2),
              src/services/ComponentRegistryService.ts (Line 89:5 - Line 99:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn425"
              onclick="toggleCodeBlock('cloneGroup425', 'expandBtn425', 'collapseBtn425')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn425"
              onclick="toggleCodeBlock('cloneGroup425', 'expandBtn425', 'collapseBtn425')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup425"
            ><code class="language-typescript text-sm text-gray-800">// Update metrics
    if (!this.metadata.metrics) {
      this.metadata.metrics = {};
    }
    const { metrics } = this.metadata;
    metrics.total_components = this.components.size;
    metrics.total_types = this.typeIndex.size;
    metrics.total_event_types = this.eventIndex.size;
    this.metadata.metrics = metrics;
  }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/ComponentRegistryService.ts (Line 200:3 - Line 212:36),
              src/services/EventPropagationService.ts (Line 200:3 - Line 162:62)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn426"
              onclick="toggleCodeBlock('cloneGroup426', 'expandBtn426', 'collapseBtn426')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn426"
              onclick="toggleCodeBlock('cloneGroup426', 'expandBtn426', 'collapseBtn426')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup426"
            ><code class="language-typescript text-sm text-gray-800">}

  public override handleError(error: Error, context?: Record&lt;string, unknown&gt;): void {
    // Update error metrics
    if (!this.metadata.metrics) {
      this.metadata.metrics = {};
    }
    const { metrics } = this.metadata;
    metrics.total_errors = (metrics.total_errors ?? 0) + 1;
    metrics.last_error_timestamp = Date.now();
    this.metadata.metrics = metrics;

    // Forward to error logging service</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/APIService.ts (Line 146:9 - Line 155:2), src/services/APIService.ts (Line
              126:7 - Line 136:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn427"
              onclick="toggleCodeBlock('cloneGroup427', 'expandBtn427', 'collapseBtn427')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn427"
              onclick="toggleCodeBlock('cloneGroup427', 'expandBtn427', 'collapseBtn427')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup427"
            ><code class="language-typescript text-sm text-gray-800">);

    // Update metrics
    if (!this.metadata.metrics) {
      this.metadata.metrics = {};
    }
    const {metrics} = this.metadata;
    metrics.active_streams = this.activeStreams.size;
    this.metadata.metrics = metrics;
  }</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/services/APIService.ts (Line 239:12 - Line 249:7), src/services/APIService.ts
              (Line 84:2 - Line 94:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn428"
              onclick="toggleCodeBlock('cloneGroup428', 'expandBtn428', 'collapseBtn428')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn428"
              onclick="toggleCodeBlock('cloneGroup428', 'expandBtn428', 'collapseBtn428')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup428"
            ><code class="language-typescript text-sm text-gray-800">${queryParams}`);
      if (!response || !response.ok) {
        throw new Error(`HTTP error! status: ${response?.status}`);
      }

      const result = await response.json();

      // Update metrics
      this.updateMetrics('success', startTime);

      return result</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/registry/ResourceRegistry.ts (Line 755:7 - Line 765:22),
              src/registry/ResourceRegistry.ts (Line 181:5 - Line 191:62)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn429"
              onclick="toggleCodeBlock('cloneGroup429', 'expandBtn429', 'collapseBtn429')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn429"
              onclick="toggleCodeBlock('cloneGroup429', 'expandBtn429', 'collapseBtn429')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup429"
            ><code class="language-typescript text-sm text-gray-800">// Initialize category maps
      Object.values(ResourceCategory).forEach(category =&gt; {
        this.resourcesByCategory.set(category, new Set());
      });

      // Initialize quality maps
      Object.values(ResourceQuality).forEach(quality =&gt; {
        this.resourcesByQuality.set(quality, new Map());
      });

      // Register resources</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/registry/ResourceRegistry.ts (Line 825:7 - Line 841:20),
              src/registry/ResourceRegistry.ts (Line 749:7 - Line 191:62)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn430"
              onclick="toggleCodeBlock('cloneGroup430', 'expandBtn430', 'collapseBtn430')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn430"
              onclick="toggleCodeBlock('cloneGroup430', 'expandBtn430', 'collapseBtn430')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup430"
            ><code class="language-typescript text-sm text-gray-800">this.resourceMetadata?.clear();
      this.resourcesByCategory.clear();
      this.resourcesByTag.clear();
      this.resourcesByQuality.clear();
      this.conversionRates.clear();

      // Initialize category maps
      Object.values(ResourceCategory).forEach(category =&gt; {
        this.resourcesByCategory.set(category, new Set());
      });

      // Initialize quality maps
      Object.values(ResourceQuality).forEach(quality =&gt; {
        this.resourcesByQuality.set(quality, new Map());
      });

      // Import resources</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/initialization/serviceRegistration.ts (Line 11:1 - Line 20:7),
              src/types/global.d.ts (Line 8:1 - Line 21:4)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn431"
              onclick="toggleCodeBlock('cloneGroup431', 'expandBtn431', 'collapseBtn431')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn431"
              onclick="toggleCodeBlock('cloneGroup431', 'expandBtn431', 'collapseBtn431')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup431"
            ><code class="language-typescript text-sm text-gray-800">import { CombatManager } from '../managers/ManagerRegistry';
import { ResourceManager } from '../managers/game/ResourceManager';
import { MiningShipManagerImpl } from '../managers/mining/MiningShipManagerImpl';
import { ResourceCostManager } from '../managers/resource/ResourceCostManager';
import { ResourceExchangeManager } from '../managers/resource/ResourceExchangeManager';
import { ResourceFlowManager } from '../managers/resource/ResourceFlowManager';
import { ResourcePoolManager } from '../managers/resource/ResourcePoolManager';
import { ResourceStorageManager } from '../managers/resource/ResourceStorageManager';
import { ResourceThresholdManager } from '../managers/resource/ResourceThresholdManager';
import</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/initialization/moduleFrameworkInit.ts (Line 91:2 - Line 100:19),
              src/initialization/moduleFrameworkInit.ts (Line 61:2 - Line 70:20)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn432"
              onclick="toggleCodeBlock('cloneGroup432', 'expandBtn432', 'collapseBtn432')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn432"
              onclick="toggleCodeBlock('cloneGroup432', 'expandBtn432', 'collapseBtn432')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup432"
            ><code class="language-typescript text-sm text-gray-800">as ModuleEventType, event =&gt; {
    const module = moduleManager.getModule(event?.moduleId);
    if (!module) {
      return;
    }

    // Get module config
    const configs = getModuleConfigs();
    const config = configs[module.type];
    if (!config || !config.resourceProduction</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/initialization/moduleFrameworkInit.ts (Line 168:2 - Line 196:9),
              src/initialization/moduleFrameworkInit.ts (Line 137:2 - Line 163:11)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn433"
              onclick="toggleCodeBlock('cloneGroup433', 'expandBtn433', 'collapseBtn433')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn433"
              onclick="toggleCodeBlock('cloneGroup433', 'expandBtn433', 'collapseBtn433')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup433"
            ><code class="language-typescript text-sm text-gray-800">as ModuleEventType, event =&gt; {
    if (!event.data || !isResourceThresholdEventData(event.data)) {
      console.warn('Invalid resource threshold event data:', event.data);
      return;
    }

    const { thresholdType, resourceType } = event.data;

    if (thresholdType !== 'min') {
      return;
    }

    // Get modules that consume this resource
    const modules = Array.from(moduleManager.getActiveModules());
    const affectedModules = modules.filter(module =&gt; {
      const configs = getModuleConfigs();
      const config = configs[module.type];
      return (
        config &amp;&amp;
        config.resourceConsumption &amp;&amp;
        config.resourceConsumption[resourceType as keyof typeof config.resourceConsumption]
      );
    });

    // Update status for affected modules
    for (const module of affectedModules) {
      moduleStatusManager.updateModuleStatus(
        module.id,
        'active'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/useTypedApi.ts (Line 306:11 - Line 321:6), src/hooks/useTypedApi.ts (Line
              220:9 - Line 234:2)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn434"
              onclick="toggleCodeBlock('cloneGroup434', 'expandBtn434', 'collapseBtn434')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn434"
              onclick="toggleCodeBlock('cloneGroup434', 'expandBtn434', 'collapseBtn434')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup434"
            ><code class="language-typescript text-sm text-gray-800">} catch (error) {
            if (isMounted.current) {
              setState({
                data: null,
                isLoading: false,
                isError: true,
                error: error instanceof ApiError ? error : null,
                isValidationError:
                  error instanceof ApiError &amp;&amp;
                  (error.type === 'RESPONSE_VALIDATION_ERROR' ||
                    error.type === 'REQUEST_VALIDATION_ERROR'),
                isSuccess: false,
              });
            }

            throw</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/useTypedApi.ts (Line 373:7 - Line 390:6), src/hooks/useTypedApi.ts (Line
              345:8 - Line 362:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn435"
              onclick="toggleCodeBlock('cloneGroup435', 'expandBtn435', 'collapseBtn435')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn435"
              onclick="toggleCodeBlock('cloneGroup435', 'expandBtn435', 'collapseBtn435')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup435"
            ><code class="language-typescript text-sm text-gray-800">&lt;
  RequestType,
  ResponseType,
  RequestSchema extends z.ZodType&lt;RequestType&gt;,
  ResponseSchema extends z.ZodType&lt;ResponseType&gt;,
&gt;(
  apiClient: TypeSafeApiClient,
  path: string,
  requestSchema: RequestSchema,
  responseSchema: ResponseSchema,
  options: UseApiOptions &amp; {
    headers?: Record&lt;string, string&gt;;
    withCredentials?: boolean;
  } = {}
) {
  const { useMutation } = useTypedApi(apiClient);
  return useMutation&lt;RequestType, ResponseType, RequestSchema, ResponseSchema&gt;(
    'PUT'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/hooks/useTypedApi.ts (Line 401:9 - Line 418:8), src/hooks/useTypedApi.ts (Line
              345:8 - Line 362:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn436"
              onclick="toggleCodeBlock('cloneGroup436', 'expandBtn436', 'collapseBtn436')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn436"
              onclick="toggleCodeBlock('cloneGroup436', 'expandBtn436', 'collapseBtn436')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup436"
            ><code class="language-typescript text-sm text-gray-800">&lt;
  RequestType,
  ResponseType,
  RequestSchema extends z.ZodType&lt;RequestType&gt;,
  ResponseSchema extends z.ZodType&lt;ResponseType&gt;,
&gt;(
  apiClient: TypeSafeApiClient,
  path: string,
  requestSchema: RequestSchema,
  responseSchema: ResponseSchema,
  options: UseApiOptions &amp; {
    headers?: Record&lt;string, string&gt;;
    withCredentials?: boolean;
  } = {}
) {
  const { useMutation } = useTypedApi(apiClient);
  return useMutation&lt;RequestType, ResponseType, RequestSchema, ResponseSchema&gt;(
    'PATCH'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/api/TypeSafeApiClient.ts (Line 340:14 - Line 348:12), src/api/TypeSafeApiClient.ts
              (Line 309:7 - Line 317:5)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn438"
              onclick="toggleCodeBlock('cloneGroup438', 'expandBtn438', 'collapseBtn438')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn438"
              onclick="toggleCodeBlock('cloneGroup438', 'expandBtn438', 'collapseBtn438')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup438"
            ><code class="language-typescript text-sm text-gray-800">,
    responseSchema: ResponseSchema,
    options: {
      queryParams?: Record&lt;string, string | number | boolean | undefined&gt;;
      headers?: Record&lt;string, string&gt;;
      withCredentials?: boolean;
    } = {}
  ): Promise&lt;ResponseType&gt; {
    const endpoint: ApiEndpoint&lt;RequestType</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/api/TypeSafeApiClient.ts (Line 363:4 - Line 381:6), src/api/TypeSafeApiClient.ts
              (Line 332:5 - Line 350:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn439"
              onclick="toggleCodeBlock('cloneGroup439', 'expandBtn439', 'collapseBtn439')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn439"
              onclick="toggleCodeBlock('cloneGroup439', 'expandBtn439', 'collapseBtn439')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup439"
            ><code class="language-typescript text-sm text-gray-800">&lt;
    RequestType,
    ResponseType,
    RequestSchema extends z.ZodType&lt;RequestType&gt;,
    ResponseSchema extends z.ZodType&lt;ResponseType&gt;,
  &gt;(
    path: string,
    requestData: RequestType,
    requestSchema: RequestSchema,
    responseSchema: ResponseSchema,
    options: {
      queryParams?: Record&lt;string, string | number | boolean | undefined&gt;;
      headers?: Record&lt;string, string&gt;;
      withCredentials?: boolean;
    } = {}
  ): Promise&lt;ResponseType&gt; {
    const endpoint: ApiEndpoint&lt;RequestType, ResponseType, RequestSchema, ResponseSchema&gt; = {
      path,
      method: 'PUT'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/api/TypeSafeApiClient.ts (Line 394:6 - Line 412:8), src/api/TypeSafeApiClient.ts
              (Line 332:5 - Line 350:7)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn440"
              onclick="toggleCodeBlock('cloneGroup440', 'expandBtn440', 'collapseBtn440')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn440"
              onclick="toggleCodeBlock('cloneGroup440', 'expandBtn440', 'collapseBtn440')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup440"
            ><code class="language-typescript text-sm text-gray-800">&lt;
    RequestType,
    ResponseType,
    RequestSchema extends z.ZodType&lt;RequestType&gt;,
    ResponseSchema extends z.ZodType&lt;ResponseType&gt;,
  &gt;(
    path: string,
    requestData: RequestType,
    requestSchema: RequestSchema,
    responseSchema: ResponseSchema,
    options: {
      queryParams?: Record&lt;string, string | number | boolean | undefined&gt;;
      headers?: Record&lt;string, string&gt;;
      withCredentials?: boolean;
    } = {}
  ): Promise&lt;ResponseType&gt; {
    const endpoint: ApiEndpoint&lt;RequestType, ResponseType, RequestSchema, ResponseSchema&gt; = {
      path,
      method: 'PATCH'</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/api/TypeSafeApiClient.ts (Line 425:7 - Line 436:9), src/api/TypeSafeApiClient.ts
              (Line 308:4 - Line 319:6)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn441"
              onclick="toggleCodeBlock('cloneGroup441', 'expandBtn441', 'collapseBtn441')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn441"
              onclick="toggleCodeBlock('cloneGroup441', 'expandBtn441', 'collapseBtn441')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup441"
            ><code class="language-typescript text-sm text-gray-800">&lt;ResponseType, ResponseSchema extends z.ZodType&lt;ResponseType&gt;&gt;(
    path: string,
    responseSchema: ResponseSchema,
    options: {
      queryParams?: Record&lt;string, string | number | boolean | undefined&gt;;
      headers?: Record&lt;string, string&gt;;
      withCredentials?: boolean;
    } = {}
  ): Promise&lt;ResponseType&gt; {
    const endpoint: ApiEndpoint&lt;void, ResponseType, z.ZodType&lt;void&gt;, ResponseSchema&gt; = {
      path,
      method: 'DELETE'</code></pre>
          </div>
          <!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed-->
        </div>
        <a name="css-clones"></a>
        <h2 class="mb-4 text-2xl font-semibold text-gray-700">css</h2>
        <div class="divide-y divide-gray-200 border-b-2">
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/DynamicBudgetAdjustmentPanel.tsx (Line 647:12 - Line
              673:15), src/components/ui/performance/PerformanceRegressionReport.tsx (Line 540:13 -
              Line 566:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn177"
              onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn177"
              onclick="toggleCodeBlock('cloneGroup177', 'expandBtn177', 'collapseBtn177')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup177"
            ><code class="language-css text-sm text-gray-800"> {
          display: flex;
          border-bottom: 1px solid #e0e0e0;
          background-color: #f5f5f5;
        }

        .tab-button {
          padding: 12px 16px;
          border: none;
          background: none;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          color: #555;
          border-bottom: 2px solid transparent;
        }

        .tab-button:hover {
          background-color: #ececec;
        }

        .tab-button.active {
          color: #1a73e8;
          border-bottom-color: #1a73e8;
        }

        .panel-content</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AdvancedMetricAnalysis.tsx (Line 573:34 - Line 597:15),
              src/components/ui/performance/MLPerformancePrediction.tsx (Line 719:35 - Line 743:21)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn185"
              onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn185"
              onclick="toggleCodeBlock('cloneGroup185', 'expandBtn185', 'collapseBtn185')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup185"
            ><code class="language-css text-sm text-gray-800"> {
          padding: 20px;
          font-family:
            system-ui,
            -apple-system,
            BlinkMacSystemFont,
            'Segoe UI',
            Roboto,
            sans-serif;
        }

        h2 {
          color: #333;
          border-bottom: 2px solid #4285f4;
          padding-bottom: 10px;
          margin-bottom: 20px;
        }

        h3 {
          color: #4285f4;
          margin-top: 0;
          margin-bottom: 15px;
        }

        .analysis-tabs</code></pre>
          </div>
          <div class="py-4">
            <p class="text-gray-600">
              src/components/ui/performance/AdvancedMetricAnalysis.tsx (Line 649:32 - Line 673:15),
              src/components/ui/performance/MLPerformancePrediction.tsx (Line 809:23 - Line 834:27)
            </p>
            <button
              class="ml-2 rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="expandBtn186"
              onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')"
            >
              Show code</button
            ><button
              class="ml-2 hidden rounded bg-gray-500 px-1 py-0.5 text-xs text-white focus:outline-none"
              id="collapseBtn186"
              onclick="toggleCodeBlock('cloneGroup186', 'expandBtn186', 'collapseBtn186')"
            >
              Hide code
            </button>
            <pre
              class="mt-2 hidden rounded border border-gray-200 bg-gray-100 p-4"
              id="cloneGroup186"
            ><code class="language-css text-sm text-gray-800"> {
          padding: 15px;
          margin: 0;
          background: #f5f5f5;
          border-bottom: 1px solid #ddd;
        }

        table {
          width: 100%;
          border-collapse: collapse;
        }

        th,
        td {
          padding: 12px 15px;
          text-align: left;
          border-bottom: 1px solid #eee;
        }

        th {
          background: #f9f9f9;
          font-weight: 500;
        }

        .severity-high</code></pre>
          </div>
          <!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed-->
        </div>
      </section>
      <!-- Add more sections for other formats and clone groups as needed-->
    </main>
    <footer class="mt-8 bg-white py-4 shadow">
      <div class="container mx-auto px-4 text-center">
        <p class="text-sm text-gray-600">
          This report is generated by jscpd, an open-source copy/paste detector.
        </p>
        <p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p>
        <a
          class="text-sm text-blue-500"
          href="https://github.com/kucherenko/jscpd"
          target="_blank"
          rel="noopener noreferrer"
          >View jscpd on GitHub</a
        >
      </div>
    </footer>
    <script src="js/prism.js"></script>
    <script>
      function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
        const codeBlock = document.getElementById(codeBlockId);
        const expandBtn = document.getElementById(expandBtnId);
        const collapseBtn = document.getElementById(collapseBtnId);

        codeBlock.classList.toggle('hidden');
        expandBtn.classList.toggle('hidden');
        collapseBtn.classList.toggle('hidden');
      }
    </script>
  </body>
</html>
