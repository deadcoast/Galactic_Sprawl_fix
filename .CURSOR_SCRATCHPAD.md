# Error-Correction Tasklist (generated 2025-06-04)

*Following ERROR_CORRECTION.md guidelines:*

## Scratchpad Documentation

### CONTEXT AWARE EDITS

- Search `.docs/changelog/MASTER_CODEBASE_ARCHIVE.md` for identifiers related to the current tasklist or error-correction.

## CURRENT SCRATCHPAD 2025-06-05

## Galactic Sprawl â€” TypeScript & ESLint Task List (2025-06-07)

---

### â± Priority 0 â€“ Build-Blocking (Severity 8)

| #    | What Broke                                                                | Where / Typical Line(s)                                                                                                                                                                           | How to Fix (quick recipe)                                                                                                                                 |
| ---- | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| P0-1 | **TS2769 â€“ â€œNo overload matches this callâ€ (MUI Grid / Typography)**      | `DataAnalysisSystem.tsx 677â€“828`, `CanvasLineChart.tsx 950`                                                                                                                                       | Add required `component` prop to every `Grid`/`Typography` element or cast with `as const`; check your `@mui/material` version matches your typings.      |
| P0-2 | **TS2322 / 2345 â€“ Type mismatch or â€œundefinedâ€ passed where not allowed** | `BattleEnvironment.tsx 433`, `HeatMap.tsx 146/168/192`, `HarbringerGalleon.tsx 113/116`, `ShipHangarManager.ts 1245/1680`, etc.                                                                   | Audit each site: tighten unions (`string \| Position` â†’ proper discriminated type), guard against `undefined`, or narrow generics before passing to APIs. |
| P0-3 | **Missing exports / Wrong imports**                                       | `main.tsx (ends with .tsx)`, `ErrorTypes.ts 27 (duplicate enum)`, `darkTheme.ts (alpha, createTheme)`, `DataCollectionService.ts (UNEXPORTED member)`, `tsconfig.json allowImportingTsExtensions` | Fix import paths (`./App.tsx`â†’`./App`), de-dupe enum values, upgrade or pin `@mui/material`, and remove unknown ts-config option.                         |
| P0-4 | **Implicit any / unsafe any / unsafe member access**                      | `CombatShipManager.ts`, `DataPointVirtualList.tsx`, `VisualizationInspector.tsx`, etc.                                                                                                            | Replace `any` with real interfaces, add optional chaining, or assert types with `as`.                                                                     |
| P0-5 | **Jest typings missing (TS2708 / 2694)**                                  | `ModuleContext.test.tsx`                                                                                                                                                                          | `npm i -D @types/jest` (or vitest types), then update tsconfig `types` array.                                                                             |
| P0-6 | **Global script flagged by --isolatedModules (TS1208)**                   | `calculations.ts`                                                                                                                                                                                 | Add `export {}` or move helpers into a module file.                                                                                                       |

> **Exit criterion:** `pnpm tsc --noEmit` returns **0 errors**.

---

### ðŸ”§ Priority 1 â€“ Warnings & Clean-Up (Severity 4)

* **Unused variables / values**

  * `customFleetAIResult`, `points`, `rangeCircles` (`BattleEnvironment.tsx`)
  * Dozens more in tests & mining managers.
    *Action:* remove or prefix with `_` if intentional side effect.

* **Unexpected console statements** (`no-console`) â€“ 25+ hits in mining, renderers, etc.
  *Action:* wrap in a logger or remove.

* **Sourcery suggestions** (assignment operator, object destructuring, unreachable code, merge nested ifs).
  *Action:* auto-apply Sourcery quick-fix or replicate manually.

* **Prefer optional chaining** (`ResourceDiscoverySystem.tsx 232`).
  *Action:* replace `&&` chains with `?.`.

* **Consistent generic constructors & array-type** in `ModuleAttachmentManager.ts` and `WebGLRenderer.tsx`.
  *Action:* change `new Map<string, number>()` â†’ `new Map<string, number>()` and replace `Array<T>` with `T[]`.

> **Exit criterion:** `eslint . --max-warnings 0` passes.

---

### ðŸ“ Priority 2 â€“ Informational / Style (Severity â‰¤ 2)

* **Prefer `interface` over `type`, record over index signature** (`EventTypes.ts` 430 â€“ 572).
* **Binding element implicitly has `any`** â€“ theme, width, etc.
* **Sourcery style comments** â€“ avoid function declarations inside blocks, prefer `const`, etc.

> **Exit criterion:** codebase lint score clean; no Sourcery suggestions left.

---

### **Recommended Attack Order for Cursor Agent**

1. **Run `pnpm update`** â€“ bring `@mui/material`, `@types/react`, `typescript-eslint`, and Jest/Vitest types into sync.
2. **Apply P0 fixes module-by-module** (table above). Commit after each module compiles.
3. **Enable `eslint --fix` & Sourcery auto-apply**; sweep P1 warnings.
4. **Refactor style issues (P2).**
5. **Lock in with CI:** add `tsc --noEmit` and `eslint --max-warnings 0` to pre-push hook.

---

### TASKLIST
- [ ] **HIGH PRIORITY**: FIX DOCUMENTED ERRORS
  - [ ] P0-1 Resolve TS2769 overload errors (MUI Grid/Typography)
  - [ ] P0-2 Fix TS2322 / 2345 type mismatches & undefined guards
  - [ ] P0-3 Correct imports & tsconfig options, dedupe enums
  - [ ] P0-4 Remove implicit/unsafe any usages
  - [ ] P0-5 Install Jest types, clear 2708 / 2694
  - [ ] P0-6 Convert global script to module (TS1208)

  - [ ] P1-1 IMPLEMENT all unused vars, values & Placeholders. DO NOT DELETE UNLESS ABSOLUTELY NECESSARY.
  - [ ] P1-2 Replace console.* with logger
  - [ ] P1-3 Auto-apply Sourcery structural fixes
  - [ ] P1-4 Add optional chaining where flagged
  - [ ] P1-5 Fix generic-constructor / array-type style issues

  - [ ] P2-1 Convert index signatures to Record / interfaces
  - [ ] P2-2 Eliminate remaining implicit any bindings
  - [ ] P2-3 Clear remaining Sourcery style comments

- [ ] **MEDIUM PRIORITY**: Fix remaining ESLint violations in EventTypes.ts
  - [ ] Convert index signatures to Record types (lines 430, 480)
  - [ ] Convert type to interface (line 572)
  - [ ] Remove unused type parameter (line 439)
  - [ ] Remove unused eslint-disable directive (line 551)

*Finish P0 before touching P1; do not promote code until `tsc` is green.*

---