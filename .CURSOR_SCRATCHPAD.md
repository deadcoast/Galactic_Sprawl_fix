# Error-Correction Tasklist (generated 2025-06-04)

_Following ERROR_CORRECTION.md guidelines:_

## ESLINT TASKLIST

## HIGH (PRIORITY 1)

- [ ] **Type-safety violations (`any`, unsafe ops)**
  - [ ] `@typescript-eslint/no-unsafe-assignment`, `no-unsafe-argument`, `no-unsafe-call`, `no-unsafe-member-access`, `no-unsafe-return`
- [ ] **Missing `await` / promise misuse**
  - [ ] `@typescript-eslint/require-await`
  - [ ] `@typescript-eslint/no-floating-promises`
  - [ ] `@typescript-eslint/no-misused-promises`
  - [ ] `@typescript-eslint/await-thenable`
- [ ] **Improper null / undefined guarding**
  - [ ] `@typescript-eslint/prefer-nullish-coalescing` (`??`, `??=`, `??:`)
  - [ ] `@typescript-eslint/prefer-optional-chain`
- [ ] **Template-string safety**
  - [ ] `@typescript-eslint/restrict-template-expressions`
  - [ ] `@typescript-eslint/no-base-to-string`
- [ ] **Unsafe enum / switch logic**
  - [ ] `@typescript-eslint/no-unsafe-enum-comparison`

---

## MEDIUM (PRIORITY 2)

- [ ] **Error-handling correctness**
  - [ ] `@typescript-eslint/prefer-promise-reject-errors`
  - [ ] `@typescript-eslint/no-unsafe-optional-chaining`
- [ ] **API / semantic soundness**
  - [ ] `@typescript-eslint/unbound-method`
  - [ ] `@typescript-eslint/no-redundant-type-constituents`
  - [ ] `@typescript-eslint/no-empty-object-type`
  - [ ] `@typescript-eslint/no-explicit-any`
- [ ] **Code style that aids maintainability**
  - [ ] `prefer-const`
  - [ ] `no-unsafe-enum-comparison` (non-switch contexts)
  - [ ] `@typescript-eslint/consistent-indexed-object-style`

---

## LOW (PRIORITY 3)

- [ ] **Noise removal**
  - [ ] `no-console` (swap to logger / conditional compile)
  - [ ] `@typescript-eslint/no-unused-vars`
  - [ ] `_` / `_e` placeholders ‚Äî either prefix with `_` or delete
- [ ] **Readability niceties**
  - [ ] `@typescript-eslint/no-unsafe-enum-comparison` (when purely stylistic)
  - [ ] `@typescript-eslint/no-unused-vars` in test fixtures & storybook files
- [ ] **Misc. tidy-ups**
  - [ ] Broken interface extensions (`no-empty-object-type`)
  - [ ] Record-vs-index-signature (`consistent-indexed-object-style`)
  - [ ] Any remaining redundant JSX/string interpolation quirks

---

## How to use this list

1. **Pick one rule at a time.**  
   Run `eslint . --rule '<ruleId>: error' --fix` or use Cursor‚Äôs multi-file quick-fix.
2. **Commit after each rule.** Smaller diffs, easier rollbacks.
3. **Check off items above** (‚åò-space in Markdown preview toggles checkboxes).
4. When HIGH is clear, re-run the full lint task; promote any leftover MEDIUM issues if they block CI.

---

### Quick commands

```bash
# All HIGH rules at once (adjust as you clear issues)
eslint . --fix \
  --rule '@typescript-eslint/no-unsafe-assignment: error' \
  --rule '@typescript-eslint/require-await: error' \
  --rule '@typescript-eslint/prefer-nullish-coalescing: error' \
  --rule '@typescript-eslint/no-floating-promises: error' \
  --rule '@typescript-eslint/restrict-template-expressions: error'
```

---

### ‚è± Priority 0 ‚Äì Build-Blocking (Severity 8)

P0-1 ‚Äì TS2769: ‚ÄúNo overload matches this call‚Äù (MUI Grid / Typography)
‚Ä¢ Where:
DataAnalysisSystem.tsx (lines 677‚Äì828)
CanvasLineChart.tsx (line 950)
‚Ä¢ Fix:
Add the required component prop to every Grid or Typography element.
If needed, cast the element with as const.
Also, confirm your @mui/material version matches its typings.

P0-2 ‚Äì TS2322 / TS2345: Type mismatch or undefined passed where not allowed
‚Ä¢ Where:
BattleEnvironment.tsx (line 433)
HeatMap.tsx (lines 146 / 168 / 192)
HarbringerGalleon.tsx (lines 113 / 116)
ShipHangarManager.ts (lines 1245 / 1680)
‚Ä¶and similar locations
‚Ä¢ Fix:
‚Ä¢ Audit and refactor union types (e.g., string | Position) into discriminated unions
‚Ä¢ Guard against undefined
‚Ä¢ Narrow generics before passing to APIs

P0-3 ‚Äì Missing exports / Wrong imports
‚Ä¢ Where:
‚Ä¢ main.tsx (check file extensions)
‚Ä¢ ErrorTypes.ts (line 27) ‚Äì duplicate enum
‚Ä¢ darkTheme.ts ‚Äì alpha, createTheme issues
‚Ä¢ DataCollectionService.ts ‚Äì unexported members
‚Ä¢ tsconfig.json ‚Äì invalid option like allowImportingTsExtensions
‚Ä¢ Fix:
‚Ä¢ Fix import paths (./App.tsx ‚Üí ./App)
‚Ä¢ De-duplicate enum values
‚Ä¢ Upgrade or pin @mui/material
‚Ä¢ Remove unsupported tsconfig options

P0-4 ‚Äì Implicit any / Unsafe any / Unsafe member access
‚Ä¢ Where:
‚Ä¢ CombatShipManager.ts
‚Ä¢ DataPointVirtualList.tsx
‚Ä¢ VisualizationInspector.tsx
‚Ä¢ Additional files flagged by ESLint
‚Ä¢ Fix:
‚Ä¢ Replace any with real interfaces
‚Ä¢ Use optional chaining (?.)
‚Ä¢ Assert known types with as Type

P0-5 ‚Äì Jest typings missing (TS2708 / TS2694)
‚Ä¢ Where:
‚Ä¢ ModuleContext.test.tsx
‚Ä¢ Fix:
‚Ä¢ Install test typings: npm i -D @types/jest or use vitest types if applicable
‚Ä¢ Add "types": ["jest"] to your tsconfig.json

P0-6 ‚Äì Global script error (--isolatedModules, TS1208)
‚Ä¢ Where:
‚Ä¢ calculations.ts
‚Ä¢ Fix:
‚Ä¢ Add export {} to mark it as a module
‚Ä¢ Or move helpers into an existing module

### Exit Criterion:

Run this to confirm all issues are resolved:

pnpm tsc --noEmit

Success = zero errors returned

---

### üîß Priority 1 ‚Äì Warnings & Clean-Up (Severity 4)

- **Unused variables / values**

  - `customFleetAIResult`, `points`, `rangeCircles` (`BattleEnvironment.tsx`)
  - Dozens more in tests & mining managers.
    _Action:_ remove or prefix with `_` if intentional side effect.

- **Unexpected console statements** (`no-console`) ‚Äì 25+ hits in mining, renderers, etc.
  _Action:_ wrap in a logger or remove.

- **Sourcery suggestions** (assignment operator, object destructuring, unreachable code, merge nested ifs).
  _Action:_ auto-apply Sourcery quick-fix or replicate manually.

- **Prefer optional chaining** (`ResourceDiscoverySystem.tsx 232`).
  _Action:_ replace `&&` chains with `?.`.

- **Consistent generic constructors & array-type** in `ModuleAttachmentManager.ts` and `WebGLRenderer.tsx`.
  _Action:_ change `new Map<string, number>()` ‚Üí `new Map<string, number>()` and replace `Array<T>` with `T[]`.

> **Exit criterion:** `eslint . --max-warnings 0` passes.

---

### üìù Priority 2 ‚Äì Informational / Style (Severity ‚â§ 2)

- **Prefer `interface` over `type`, record over index signature** (`EventTypes.ts` 430 ‚Äì 572).
- **Binding element implicitly has `any`** ‚Äì theme, width, etc.
- **Sourcery style comments** ‚Äì avoid function declarations inside blocks, prefer `const`, etc.

> **Exit criterion:** codebase lint score clean; no Sourcery suggestions left.

---

### **Recommended Attack Order for Cursor Agent**

1. **Run `pnpm update`** ‚Äì bring `@mui/material`, `@types/react`, `typescript-eslint`, and Jest/Vitest types into sync.
2. **Apply P0 fixes module-by-module** (table above). Commit after each module compiles.
3. **Enable `eslint --fix` & Sourcery auto-apply**; sweep P1 warnings.
4. **Refactor style issues (P2).**
5. **Lock in with CI:** add `tsc --noEmit` and `eslint --max-warnings 0` to pre-push hook.

---

**Remaining MUI Grid/Typography Issues:**

- PIXI.js library compatibility (combat ships) - Low priority
- MUI overload errors (VirtualizedEventLog) - Can be fixed with same approach
- Minor typing issues - Can be addressed as needed

üîÑ `src/components/exploration/DataAnalysisSystem.tsx` - Need to complete remaining Grid components
‚ùå Other files with similar MUI overload errors

- [ ] P1-1 IMPLEMENT all unused vars, values & Placeholders. DO NOT DELETE UNLESS ABSOLUTELY NECESSARY.
- [ ] P1-2 Replace console.\* with logger
- [ ] P1-3 Auto-apply Sourcery structural fixes
- [ ] P1-4 Add optional chaining where flagged
- [ ] P1-5 Fix generic-constructor / array-type style issues

- [ ] P2-1 Convert index signatures to Record / interfaces
- [ ] P2-2 Eliminate remaining implicit any bindings
- [ ] P2-3 Clear remaining Sourcery style comments

- [ ] **MEDIUM PRIORITY**: Fix remaining ESLint violations in EventTypes.ts
  - [ ] Convert index signatures to Record types (lines 430, 480)
  - [ ] Convert type to interface (line 572)
  - [ ] Remove unused type parameter (line 439)
  - [ ] Remove unused eslint-disable directive (line 551)

_Finish P0 before touching P1; do not promote code until `tsc` is green._

---
